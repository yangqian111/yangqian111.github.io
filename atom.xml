<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ppsheep</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://ppsheep.com/"/>
  <updated>2017-01-11T09:05:05.000Z</updated>
  <id>http://ppsheep.com/</id>
  
  <author>
    <name>ppsheep</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Swiftæ•™ç¨‹(å››)â€”æ§åˆ¶æµ</title>
    <link href="http://ppsheep.com/2017/01/11/Swift%E6%95%99%E7%A8%8B(%E5%9B%9B)%E2%80%94%E6%8E%A7%E5%88%B6%E6%B5%81/"/>
    <id>http://ppsheep.com/2017/01/11/Swiftæ•™ç¨‹(å››)â€”æ§åˆ¶æµ/</id>
    <published>2017-01-11T09:04:00.000Z</published>
    <updated>2017-01-11T09:05:05.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="Swiftå®˜æ–¹æ•™ç¨‹å­¦ä¹ ç¬”è®°" scheme="http://ppsheep.com/all-categories/Swift%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Swiftå®˜æ–¹æ•™ç¨‹å­¦ä¹ ç¬”è®°" scheme="http://ppsheep.com/all-tags/Swift%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Swift(ä¸‰)-é›†åˆç±»å‹</title>
    <link href="http://ppsheep.com/2017/01/10/Swift%E6%95%99%E7%A8%8B(%E4%B8%89)%E2%80%94%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/"/>
    <id>http://ppsheep.com/2017/01/10/Swiftæ•™ç¨‹(ä¸‰)â€”é›†åˆç±»å‹/</id>
    <published>2017-01-10T06:13:43.000Z</published>
    <updated>2017-01-11T09:02:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸Šä¸€èŠ‚ï¼Œè®²äº†å…³äºå­—ç¬¦ä¸²å’Œå­—ç¬¦çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹æ¯ç‡¥ï¼Œåœ¨åé¢å‡ ç« èŠ‚çš„å­¦ä¹ ä¸­ï¼Œçœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒæ¯ç‡¥ï¼Œä½†æ˜¯è¿™äº›éƒ½æ˜¯åŸºç¡€çŸ¥è¯†ï¼Œå¯¹äºæœ‰è¿‡ç¼–ç¨‹åŸºç¡€çš„åŒå­¦æ¥è¯´ï¼Œå½“ç„¶è¿‡ä¸€éå·²ç»è¶³å¤Ÿäº†ï¼Œå¯¹äºæ²¡æœ‰ç¼–ç¨‹ç»éªŒçš„åŒå­¦æ¥è¯´ï¼Œè¿˜æ˜¯éœ€è¦çœ‹ä¸€çœ‹ï¼Œäº†è§£ä¸€ä¸‹ã€‚</p>
<p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å…³äºé›†åˆçš„ä¸€äº›ä½¿ç”¨æ–¹æ³•</p>
<a id="more"></a>
<h3 id="é›†åˆçš„å¯å˜æ€§"><a href="#é›†åˆçš„å¯å˜æ€§" class="headerlink" title="é›†åˆçš„å¯å˜æ€§"></a>é›†åˆçš„å¯å˜æ€§</h3><p>å’ŒOCä¸­çš„NSArrayä¸åŒï¼Œåœ¨Swiftä¸­è¿˜æ˜¯é€šè¿‡å˜é‡å’Œå¸¸é‡æ¥æ§åˆ¶é›†åˆçš„å¯å˜æ€§ï¼Œä¸ä»…æ˜¯Array,Setå’ŒDictionaryä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¦‚æœä½ å¸Œæœ›é›†åˆçš„å€¼ä¸å†è¢«æ”¹å˜ï¼Œé‚£ä¹ˆå°±å°†ä»–è®¾ç½®ä¸ºå¸¸é‡ï¼Œå¦‚æœéœ€è¦æ”¹å˜ï¼Œå½“ç„¶å°±éœ€è¦å˜é‡ã€‚</p>
<p>å¦‚æœä¸éœ€è¦æ”¹å˜ï¼Œè¿˜æ˜¯å°½é‡è®¾ç½®æˆå¸¸é‡ï¼Œå¥½çš„ç¼–ç¨‹ä¹ æƒ¯</p>
<h3 id="æ•°ç»„-Arrays"><a href="#æ•°ç»„-Arrays" class="headerlink" title="æ•°ç»„(Arrays)"></a>æ•°ç»„(Arrays)</h3><p>Swiftæ˜¯å®‰å…¨çš„è¯­è¨€ï¼Œåœ¨Swiftä¸­ä½¿ç”¨é›†åˆç±»å‹ï¼Œå¿…é¡»å£°æ˜é›†åˆä¸­çš„æ•°æ®ç±»å‹ï¼Œå’ŒOCåˆä¸å¤ªä¸€æ ·ï¼Œä½¿ç”¨è¿‡Javaæˆ–è€…å…¶ä»–çš„ä¸€äº›ç¼–è¯‘å‹è¯­è¨€çš„åŒå­¦å¯èƒ½å¾ˆå®¹æ˜“ç†è§£ï¼Œå¾ˆå¤šè¯­è¨€éƒ½æœ‰æ³›å‹è¿™ä¸€è¯´Array[T]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">let string = [String]()</div><div class="line">// stringæ•°ç»„</div></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºå¸¦æœ‰é»˜è®¤å€¼çš„æ•°ç»„"><a href="#åˆ›å»ºå¸¦æœ‰é»˜è®¤å€¼çš„æ•°ç»„" class="headerlink" title="åˆ›å»ºå¸¦æœ‰é»˜è®¤å€¼çš„æ•°ç»„"></a>åˆ›å»ºå¸¦æœ‰é»˜è®¤å€¼çš„æ•°ç»„</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">let demo = Array(repeating: 1, count: 3)</div><div class="line">//è¿™é‡Œåˆ›å»ºå‡ºæ¥çš„é»˜è®¤æ•°ç»„æ˜¯[1,1,1]</div></pre></td></tr></table></figure>
<h4 id="æ•°ç»„ç›¸åŠ "><a href="#æ•°ç»„ç›¸åŠ " class="headerlink" title="æ•°ç»„ç›¸åŠ "></a>æ•°ç»„ç›¸åŠ </h4><p>æ•°ç»„ç›¸åŠ å¿…é¡»è¦ä¸¤ä¸ªæ•°ç»„çš„å€¼çš„ç±»å‹ä¸€ç›´æ‰èƒ½å¤Ÿè¿›è¡ŒåŠ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">let demo = Array(repeating: 1, count: 3)</div><div class="line">//[1,1,1]</div><div class="line">let demo1 = Array(repeating: 2, count: 5)</div><div class="line">//[2, 2, 2, 2, 2]</div><div class="line"></div><div class="line">let demo2 = demo + demo1</div><div class="line">//[1, 1, 1, 2, 2, 2, 2, 2]</div><div class="line"></div><div class="line">let demo2 = demo1 + demo</div><div class="line">//[2, 2, 2, 2, 2, 1, 1, 1]</div></pre></td></tr></table></figure>
<p>çœ‹ä¸€ä¸‹åŠ çš„é¡ºåºä¸ä¸€æ ·ï¼Œå‡ºæ¥çš„æ•°ç»„ä¹Ÿä¸ä¸€æ ·</p>
<h4 id="å­—é¢é‡æ„é€ æ•°ç»„"><a href="#å­—é¢é‡æ„é€ æ•°ç»„" class="headerlink" title="å­—é¢é‡æ„é€ æ•°ç»„"></a>å­—é¢é‡æ„é€ æ•°ç»„</h4><p>å°±æ˜¯ç”¨[]æ‹¬èµ·æ¥å°±è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let array = [1,2,1,2]</div></pre></td></tr></table></figure>
<h4 id="è®¿é—®å’Œä¿®æ”¹æ•°ç»„"><a href="#è®¿é—®å’Œä¿®æ”¹æ•°ç»„" class="headerlink" title="è®¿é—®å’Œä¿®æ”¹æ•°ç»„"></a>è®¿é—®å’Œä¿®æ”¹æ•°ç»„</h4><p>é¦–å…ˆæ•°ç»„æœ‰ä¸¤ä¸ªå±æ€§ï¼Œç”¨çš„æ¯”è¾ƒå¤šcount / isEmpty<br>åˆ†åˆ«è®¡ç®—æ•°ç»„å¤§å°å’Œæ˜¯å¦ä¸ºç©º</p>
<p>è¿˜æœ‰å°±æ˜¯è®¿é—®æ•°ç»„å…ƒç´ ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹æ ‡æ³•ï¼Œè¿™ä¸ªæˆ‘ä¹Ÿä¸ç»†è®²å¾ˆç®€å•çš„</p>
<p>è¿˜æœ‰æ•°ç»„çš„æ’å…¥å’Œåˆ é™¤</p>
<p>insert(_:at:) / remove(at:)</p>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä¹Ÿä¸ç»†è®²äº†</p>
<h4 id="æ•°ç»„çš„éå†"><a href="#æ•°ç»„çš„éå†" class="headerlink" title="æ•°ç»„çš„éå†"></a>æ•°ç»„çš„éå†</h4><p>åœ¨OCä¸­ï¼Œæˆ‘ä»¬å°±ç»å¸¸ä½¿ç”¨for-inæ¥éå†æ•°ç»„ï¼Œåœ¨è¿™é‡Œä¹Ÿæ˜¯ä¸€æ ·çš„ è¯­æ³•ç¨å¾®æœ‰ç‚¹æ”¹å˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">let demo2 = [2, 2, 2, 2, 2, 1, 1, 1]</div><div class="line"></div><div class="line">for number in demo2 &#123;</div><div class="line">    print(number)</div><div class="line">&#125;</div><div class="line">//ä¸€ä¸ªä¸€ä¸ªæ‰“å°å‡º</div></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³è¦æ‰“å°å‡ºæ¯ä¸ªæ•°ç»„å…ƒç´ çš„ç´¢å¼•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">let demo2 = [2, 2, 2, 2, 2, 1, 1, 1]</div><div class="line"></div><div class="line">for (index,value) in demo2.enumerated() &#123;</div><div class="line">    print(&quot;index = \(index)  value = \(value)&quot;)</div><div class="line">&#125;</div><div class="line">/*</div><div class="line">index = 0  value = 2</div><div class="line">index = 1  value = 2</div><div class="line">index = 2  value = 2</div><div class="line">index = 3  value = 2</div><div class="line">index = 4  value = 2</div><div class="line">index = 5  value = 1</div><div class="line">index = 6  value = 1</div><div class="line">index = 7  value = 1</div><div class="line">*/</div></pre></td></tr></table></figure>
<h3 id="é›†åˆ-Sets"><a href="#é›†åˆ-Sets" class="headerlink" title="é›†åˆ(Sets)"></a>é›†åˆ(Sets)</h3><p>é›†åˆ(Set)ç”¨æ¥å­˜å‚¨ç›¸åŒç±»å‹å¹¶ä¸”æ²¡æœ‰ç¡®å®šé¡ºåºçš„å€¼ã€‚å½“é›†åˆå…ƒç´ é¡ºåºä¸é‡è¦æ—¶æˆ–è€…å¸Œæœ›ç¡®ä¿æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡æ—¶å¯ä»¥ä½¿ç”¨é›†åˆè€Œä¸æ˜¯æ•°ç»„ã€‚</p>
<p>ä½¿ç”¨é›†åˆçš„æœ€ä¸»è¦åŸå› å°±æ˜¯è¿™ä¸ªä¸èƒ½æœ‰é‡å¤æ•°æ®</p>
<h4 id="é›†åˆçš„å“ˆå¸Œå€¼"><a href="#é›†åˆçš„å“ˆå¸Œå€¼" class="headerlink" title="é›†åˆçš„å“ˆå¸Œå€¼"></a>é›†åˆçš„å“ˆå¸Œå€¼</h4><p>ä¸€ä¸ªç±»å‹ä¸ºäº†è¦å­˜å‚¨åœ¨é›†åˆä¸­ï¼Œè¿™ä¸ªç±»å‹å¿…é¡»è¦æ˜¯å¯ä»¥å“ˆå¸Œçš„ã€‚ä¸€ä¸ªå“ˆå¸Œå€¼æ˜¯Intå‹ï¼Œç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œå“ˆå¸Œå€¼å¿…é¡»ç›¸ç­‰ a==b ç­‰ä»·äº  a.hashValue = b.hashValue</p>
<p>åœ¨swiftä¸­  Stringã€Int ã€Boolè¿™äº›å€¼éƒ½æ˜¯å¯å“ˆå¸Œçš„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨é›†åˆä¸­è¦è£…æˆ‘ä»¬è‡ªå®šä¹‰çš„ä¸€ä¸ªç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å‹å¿…é¡»è¦ç¬¦åˆ Swift æ ‡å‡†åº“ä¸­çš„Hashableåè®®ï¼Œè¿™ä¸ªæˆ‘ä»¬åœ¨è®²åˆ°åè®®çš„æ—¶å€™ä¼šå•ç‹¬æ‹å‡ºæ¥è®²</p>
<h4 id="é›†åˆç±»å‹è¯­æ³•"><a href="#é›†åˆç±»å‹è¯­æ³•" class="headerlink" title="é›†åˆç±»å‹è¯­æ³•"></a>é›†åˆç±»å‹è¯­æ³•</h4><p>é›†åˆç±»å‹è¢«å†™ä½œ Set<t>ï¼Œæ²¡é”™ï¼Œä¹Ÿæ˜¯æ³›å‹çš„</t></p>
<h4 id="å­—é¢é‡åˆ›å»ºé›†åˆ"><a href="#å­—é¢é‡åˆ›å»ºé›†åˆ" class="headerlink" title="å­—é¢é‡åˆ›å»ºé›†åˆ"></a>å­—é¢é‡åˆ›å»ºé›†åˆ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let demo: Set&lt;String&gt; = [&quot;a&quot;,&quot;b&quot;]</div></pre></td></tr></table></figure>
<p><strong>ä¸€ä¸ªSetç±»å‹ä¸èƒ½ä»æ•°ç»„å­—é¢é‡ä¸­è¢«å•ç‹¬æ¨æ–­å‡ºæ¥ï¼Œå› æ­¤Setç±»å‹å¿…é¡»æ˜¾å¼å£°æ˜ï¼Œä½†æ˜¯å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥ç®€åŒ–let demo: Set=[â€œaâ€,â€bâ€]</strong>ï¼Œè¿™æ ·ç¼–è¯‘å™¨å°±èƒ½å¤Ÿæ¨æ–­å‡ºæ˜¯ä¸€ä¸ªStringç±»å‹çš„é›†åˆ</p>
<h4 id="è®¿é—®å’Œä¿®æ”¹é›†åˆ"><a href="#è®¿é—®å’Œä¿®æ”¹é›†åˆ" class="headerlink" title="è®¿é—®å’Œä¿®æ”¹é›†åˆ"></a>è®¿é—®å’Œä¿®æ”¹é›†åˆ</h4><p>é›†åˆä¹Ÿæœ‰count \ isEmpty ä¸¤ä¸ªå±æ€§ï¼Œä½†æ˜¯æˆ‘ä»¬è¯´è¿‡é›†åˆæ˜¯æ²¡æœ‰é¡ºåºçš„ï¼Œæ‰€ä»¥å°±æ²¡æœ‰ä¸‹æ ‡è¿™ç§æ¦‚å¿µäº†</p>
<p>è°ƒç”¨remove(_:)åˆ é™¤å…ƒç´ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var favoriteGenres: Set = [&quot;Rock&quot;, &quot;Classical&quot;, &quot;Hip hop&quot;]</div><div class="line"></div><div class="line">if let removedGenre = favoriteGenres.remove(&quot;Rock&quot;) &#123;</div><div class="line">    print(&quot;\(removedGenre)? I&apos;m over it.&quot;)</div><div class="line">&#125; else &#123;</div><div class="line">    print(&quot;I never much cared for that.&quot;)</div><div class="line">&#125;</div><div class="line">// æ‰“å° &quot;Rock? I&apos;m over it.</div></pre></td></tr></table></figure>
<h4 id="éå†é›†åˆ"><a href="#éå†é›†åˆ" class="headerlink" title="éå†é›†åˆ"></a>éå†é›†åˆ</h4><p>for-in</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">for genre in favoriteGenres &#123;</div><div class="line">    print(&quot;\(genre)&quot;)</div><div class="line">&#125;</div><div class="line">// Classical</div><div class="line">// Jazz</div><div class="line">// Hip hop</div></pre></td></tr></table></figure>
<p>é›†åˆä¸­æœ‰ä¸€ä¸ªsorted()æ–¹æ³•ï¼Œå¯ä»¥å†éå†çš„æ—¶å€™ä½¿ç”¨ï¼Œå°†è¿”å›ä¸€ä¸ªæœ‰åºçš„ç»“æœï¼Œè¿™ä¸ªæ¯”è¾ƒæ˜¯æ“ä½œç¬¦â€&lt;â€æ¥è¿›è¡Œæ¯”è¾ƒçš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">for genre in favoriteGenres.sorted() &#123;</div><div class="line">    print(&quot;(genre)&quot;)</div><div class="line">&#125;</div><div class="line">// prints &quot;Classical&quot;</div><div class="line">// prints &quot;Hip hop&quot;</div><div class="line">// prints &quot;Jazz</div></pre></td></tr></table></figure>
<h4 id="é›†åˆçš„æ“ä½œ"><a href="#é›†åˆçš„æ“ä½œ" class="headerlink" title="é›†åˆçš„æ“ä½œ"></a>é›†åˆçš„æ“ä½œ</h4><p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2017-01-11-setVennDiagram_2x.png" alt=""></p>
<p> ä¸Šé¢çš„å›¾æ˜¾ç¤ºäº†é›†åˆä¸­çš„å‡ ä¸ªæ–¹æ³•çš„å«ä¹‰ï¼Œè¿™ä¸ªæˆ‘å°±ä¸ç»†è®²ï¼Œçœ‹å›¾å°±èƒ½å¤Ÿæ˜ç™½</p>
<h3 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h3><h4 id="å­—å…¸çš„å­—é¢é‡å£°æ˜"><a href="#å­—å…¸çš„å­—é¢é‡å£°æ˜" class="headerlink" title="å­—å…¸çš„å­—é¢é‡å£°æ˜"></a>å­—å…¸çš„å­—é¢é‡å£°æ˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let demo = [&quot;key1&quot;:&quot;value1&quot;,&quot;key2&quot;:&quot;value2&quot;]</div></pre></td></tr></table></figure>
<h4 id="è®¿é—®å­—å…¸"><a href="#è®¿é—®å­—å…¸" class="headerlink" title="è®¿é—®å­—å…¸"></a>è®¿é—®å­—å…¸</h4><p>è®¿é—®å’Œä¿®æ”¹å­—å…¸éƒ½å¯ä»¥é€šè¿‡keyæ“ä½œæ¥å®Œæˆï¼Œè¿™ä¸ªæˆ‘ä¹Ÿä¸ç»†è®²äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">demo[&quot;key1&quot;] = &quot;new value&quot;</div><div class="line">//è¿™æ ·å­—å…¸ä¸­çš„value1å°±å˜æˆäº†new value</div></pre></td></tr></table></figure>
<p>ä½œä¸ºå¦ä¸€ç§ä¸‹æ ‡æ–¹æ³•ï¼Œå­—å…¸çš„updateValue(_:forKey:)æ–¹æ³•å¯ä»¥è®¾ç½®æˆ–è€…æ›´æ–°ç‰¹å®šé”®å¯¹åº”çš„å€¼ã€‚å°±åƒä¸Šé¢æ‰€ç¤ºçš„ä¸‹æ ‡ç¤ºä¾‹ï¼ŒupdateValue(_:forKey:)æ–¹æ³•åœ¨è¿™ä¸ªé”®ä¸å­˜åœ¨å¯¹åº”å€¼çš„æ—¶å€™ä¼šè®¾ç½®æ–°å€¼æˆ–è€…åœ¨å­˜åœ¨æ—¶æ›´æ–°å·²å­˜åœ¨çš„å€¼ã€‚å’Œä¸Šé¢çš„ä¸‹æ ‡æ–¹æ³•ä¸åŒçš„ï¼ŒupdateValue(_:forKey:)è¿™ä¸ªæ–¹æ³•è¿”å›æ›´æ–°å€¼ä¹‹å‰çš„åŸå€¼ã€‚è¿™æ ·ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ£€æŸ¥æ›´æ–°æ˜¯å¦æˆåŠŸã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if let oldValue = airports.updateValue(&quot;Dublin Airport&quot;, forKey: &quot;DUB&quot;) &#123;</div><div class="line">    print(&quot;The old value for DUB was (oldValue).&quot;)</div><div class="line">&#125;</div><div class="line">// è¾“å‡º &quot;The old value for DUB was Dublin.</div></pre></td></tr></table></figure>
<h4 id="å­—å…¸çš„éå†"><a href="#å­—å…¸çš„éå†" class="headerlink" title="å­—å…¸çš„éå†"></a>å­—å…¸çš„éå†</h4><p>for-in</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">for (airportCode, airportName) in airports &#123;</div><div class="line">    print(&quot;(airportCode): (airportName)&quot;)</div><div class="line">&#125;</div><div class="line">//å¯¹æ‰€æœ‰éå†</div><div class="line"></div><div class="line">for airportCode in airports.keys &#123;</div><div class="line">    print(&quot;Airport code: (airportCode)&quot;)</div><div class="line">&#125;</div><div class="line">//å¯¹keyéå†</div><div class="line">// Airport code: YYZ</div><div class="line">// Airport code: LHR</div><div class="line">Â </div><div class="line">for airportName in airports.values &#123;</div><div class="line">    print(&quot;Airport name: (airportName)&quot;)</div><div class="line">&#125;</div><div class="line">//å¯¹valueéå†</div><div class="line">// Airport name: Toronto Pearson</div><div class="line">// Airport name: London Heathrow</div></pre></td></tr></table></figure>
<p>é›†åˆå®Œç»“ã€‚ã€‚ã€‚ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ä¸Šä¸€èŠ‚ï¼Œè®²äº†å…³äºå­—ç¬¦ä¸²å’Œå­—ç¬¦çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹æ¯ç‡¥ï¼Œåœ¨åé¢å‡ ç« èŠ‚çš„å­¦ä¹ ä¸­ï¼Œçœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒæ¯ç‡¥ï¼Œä½†æ˜¯è¿™äº›éƒ½æ˜¯åŸºç¡€çŸ¥è¯†ï¼Œå¯¹äºæœ‰è¿‡ç¼–ç¨‹åŸºç¡€çš„åŒå­¦æ¥è¯´ï¼Œå½“ç„¶è¿‡ä¸€éå·²ç»è¶³å¤Ÿäº†ï¼Œå¯¹äºæ²¡æœ‰ç¼–ç¨‹ç»éªŒçš„åŒå­¦æ¥è¯´ï¼Œè¿˜æ˜¯éœ€è¦çœ‹ä¸€çœ‹ï¼Œäº†è§£ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å…³äºé›†åˆçš„ä¸€äº›ä½¿ç”¨æ–¹æ³•&lt;/p&gt;
    
    </summary>
    
      <category term="Swiftå®˜æ–¹æ•™ç¨‹å­¦ä¹ ç¬”è®°" scheme="http://ppsheep.com/all-categories/Swift%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Swiftå®˜æ–¹æ•™ç¨‹å­¦ä¹ ç¬”è®°" scheme="http://ppsheep.com/all-tags/Swift%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Swiftæ•™ç¨‹(äºŒ)â€”å­—ç¬¦ä¸²å’Œå­—ç¬¦</title>
    <link href="http://ppsheep.com/2017/01/09/Swift%E6%95%99%E7%A8%8B(%E4%BA%8C)%E2%80%94%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6/"/>
    <id>http://ppsheep.com/2017/01/09/Swiftæ•™ç¨‹(äºŒ)â€”å­—ç¬¦ä¸²å’Œå­—ç¬¦/</id>
    <published>2017-01-09T08:15:22.000Z</published>
    <updated>2017-01-09T09:57:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªç« èŠ‚ï¼Œæˆ‘ä»¬è®²Swiftä¸­çš„å­—ç¬¦ä¸²å’Œå­—ç¬¦ï¼Œéœ€è¦è¯´æ˜çš„æ˜¯åœ¨Swiftä¸­Stringå’ŒOCä¸­çš„NSStringè¿›è¡Œäº†æ— ç¼è¡”æ¥ï¼Œè¿™å°±æ„å‘³ç€ï¼ŒStringç±»å‹çš„å­—ç¬¦ä¸²å¯ä»¥ç›´æ¥è°ƒç”¨NSStringä¸­æš´éœ²å‡ºæ¥çš„æ–¹æ³•ï¼Œä¸éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p>
<a id="more"></a>
<h3 id="åˆå§‹åŒ–ç©ºå­—ç¬¦ä¸²"><a href="#åˆå§‹åŒ–ç©ºå­—ç¬¦ä¸²" class="headerlink" title="åˆå§‹åŒ–ç©ºå­—ç¬¦ä¸²"></a>åˆå§‹åŒ–ç©ºå­—ç¬¦ä¸²</h3><p>åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨å­—é¢é‡åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆå§‹åŒ–æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var emptyString = &quot;&quot;               // ç©ºå­—ç¬¦ä¸²å­—é¢é‡</div><div class="line">var anotherEmptyString = String()  // åˆå§‹åŒ–æ–¹æ³•</div><div class="line">// ä¸¤ä¸ªå­—ç¬¦ä¸²å‡ä¸ºç©ºå¹¶ç­‰ä»·ã€‚</div></pre></td></tr></table></figure>
<p>è¦æ£€æµ‹æ˜¯å¦ä¸ºç©ºï¼Œå¯ä»¥ä½¿ç”¨isEmpty:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if emptyString.isEmpty &#123;</div><div class="line">    print(&quot;Nothing to see here&quot;)</div><div class="line">&#125;</div><div class="line">// æ‰“å°è¾“å‡ºï¼š&quot;Nothing to see here</div></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²å¯å˜æ€§"><a href="#å­—ç¬¦ä¸²å¯å˜æ€§" class="headerlink" title="å­—ç¬¦ä¸²å¯å˜æ€§"></a>å­—ç¬¦ä¸²å¯å˜æ€§</h3><p>åœ¨Swiftä¸­ï¼Œå­—ç¬¦ä¸²å’ŒOCä¸­çš„ä¸åŒï¼Œå¦‚æœéœ€è¦æ”¹å˜å­—ç¬¦ä¸²ï¼Œåªéœ€è¦å°†å­—ç¬¦ä¸²å®šä¹‰ä¸ºå˜é‡å°±è¡Œï¼Œå¦‚æœè¦ä¿è¯å­—ç¬¦ä¸²ä¸å¯æ”¹å˜ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å°†å­—ç¬¦ä¸²å®šä¹‰ä¸ºletå¸¸é‡ï¼Œè¿™æ ·å­—ç¬¦ä¸²å°±ä¸å¯æ”¹å˜</p>
<h3 id="å­—ç¬¦ä¸²æ˜¯å€¼ç±»å‹"><a href="#å­—ç¬¦ä¸²æ˜¯å€¼ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²æ˜¯å€¼ç±»å‹"></a>å­—ç¬¦ä¸²æ˜¯å€¼ç±»å‹</h3><p>æˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼Œåœ¨Swiftä¸­ï¼Œå€¼ç±»å‹çš„æ•°æ®ä¼ é€’ï¼Œéƒ½æ˜¯é€šè¿‡æ‹·è´çš„æ–¹å¼ï¼ŒStringä¹Ÿæ˜¯å€¼ç±»å‹çš„æ•°æ®ï¼Œåœ¨ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä½¿ç”¨çš„æ‹·è´å½¢å¼ä¼ é€’ã€‚</p>
<h3 id="ä½¿ç”¨å­—ç¬¦"><a href="#ä½¿ç”¨å­—ç¬¦" class="headerlink" title="ä½¿ç”¨å­—ç¬¦"></a>ä½¿ç”¨å­—ç¬¦</h3><p>å¯ä»¥ä½¿ç”¨for-inæ–¹æ³•æ¥éå†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">for character in &quot;Dog!ğŸ¶&quot;.characters &#123;</div><div class="line">    print(character)</div><div class="line">&#125;</div><div class="line">// D</div><div class="line">// o</div><div class="line">// g</div><div class="line">// !</div><div class="line">// ğŸ¶</div></pre></td></tr></table></figure>
<p>é€šè¿‡Characterç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦å¸¸é‡æˆ–è€…å˜é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let exclamationMark: Character = &quot;!&quot;</div></pre></td></tr></table></figure>
<p>å­—ç¬¦ä¸²è¿˜å¯ä»¥é€šè¿‡ä¸€ä¸ªå­—ç¬¦æ•°ç»„æ¥åˆå§‹åŒ–</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let catCharacters: [Character] = [&quot;C&quot;, &quot;a&quot;, &quot;t&quot;, &quot;!&quot;, &quot;ğŸ±&quot;]</div><div class="line">let catString = String(catCharacters)</div><div class="line">print(catString)</div><div class="line">// æ‰“å°è¾“å‡ºï¼š&quot;Cat!ğŸ±</div></pre></td></tr></table></figure>
<h3 id="è¿æ¥å­—ç¬¦ä¸²"><a href="#è¿æ¥å­—ç¬¦ä¸²" class="headerlink" title="è¿æ¥å­—ç¬¦ä¸²"></a>è¿æ¥å­—ç¬¦ä¸²</h3><p>è¿æ¥å­—ç¬¦ä¸²å¯ä»¥ç›´æ¥ä½¿ç”¨+è¿›è¡Œå­—ç¬¦ä¸²çš„è¿æ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let string1 = &quot;hello&quot;</div><div class="line">let string2 = &quot; there&quot;</div><div class="line">var welcome = string1 + string2</div><div class="line">// welcome ç°åœ¨ç­‰äº &quot;hello there</div></pre></td></tr></table></figure>
<p>+=å¯¹äºå­—ç¬¦ä¸²ä¹Ÿæ˜¯ç®¡ç”¨çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var instruction = &quot;look over&quot;</div><div class="line">instruction += string2</div><div class="line">// instruction ç°åœ¨ç­‰äº &quot;look over there&quot;</div></pre></td></tr></table></figure>
<p>å¦å¤–è¿˜æœ‰appen()æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let exclamationMark: Character = &quot;!&quot;</div><div class="line">welcome.append(exclamationMark)</div><div class="line">// welcome ç°åœ¨ç­‰äº &quot;hello there!â€</div></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²æ’å€¼"><a href="#å­—ç¬¦ä¸²æ’å€¼" class="headerlink" title="å­—ç¬¦ä¸²æ’å€¼"></a>å­—ç¬¦ä¸²æ’å€¼</h3><p>åœ¨Swiftä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†int floatç±»å‹çš„å€¼ç›´æ¥æ’å…¥åˆ°stringä¸­ï¼Œä¸éœ€è¦å…ˆè¿›è¡Œç±»å‹è½¬æ¢ï¼Œå†è¿›è¡Œæ’å…¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let multiplier = 3</div><div class="line">let message = &quot;\(multiplier) times 2.5 is \(Double(multiplier) * 2.5)&quot;</div><div class="line">// message æ˜¯ &quot;3 times 2.5 is 7.5â€</div></pre></td></tr></table></figure>
<h3 id="è®¡ç®—å­—ç¬¦ä¸²å­—ç¬¦æ•°é‡"><a href="#è®¡ç®—å­—ç¬¦ä¸²å­—ç¬¦æ•°é‡" class="headerlink" title="è®¡ç®—å­—ç¬¦ä¸²å­—ç¬¦æ•°é‡"></a>è®¡ç®—å­—ç¬¦ä¸²å­—ç¬¦æ•°é‡</h3><p>ä½¿ç”¨countæ–¹æ³•  string.characters.count</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let unusualMenagerie = &quot;Koala ğŸ¨, Snail ğŸŒ, Penguin ğŸ§, Dromedary ğŸª&quot;</div><div class="line">print(&quot;unusualMenagerie has \(unusualMenagerie.characters.count) characters&quot;)</div><div class="line">// æ‰“å°è¾“å‡º &quot;unusualMenagerie has 40 charactersâ€</div></pre></td></tr></table></figure>
<h3 id="è®¿é—®å’Œä¿®æ”¹å­—ç¬¦ä¸²"><a href="#è®¿é—®å’Œä¿®æ”¹å­—ç¬¦ä¸²" class="headerlink" title="è®¿é—®å’Œä¿®æ”¹å­—ç¬¦ä¸²"></a>è®¿é—®å’Œä¿®æ”¹å­—ç¬¦ä¸²</h3><h4 id="å­—ç¬¦ä¸²ç´¢å¼•"><a href="#å­—ç¬¦ä¸²ç´¢å¼•" class="headerlink" title="å­—ç¬¦ä¸²ç´¢å¼•"></a>å­—ç¬¦ä¸²ç´¢å¼•</h4><p>æ¯ä¸€ä¸ªStringå€¼éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ç´¢å¼•(index)ç±»å‹ï¼ŒString.Indexï¼Œå®ƒå¯¹åº”ç€å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªCharacterçš„ä½ç½®ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ä¸åŒçš„å­—ç¬¦å ç”¨çš„å†…å­˜ç©ºé—´ä¸åŒï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨integeræ¥åšç´¢å¼•</p>
<p>ä½¿ç”¨startIndexå¯ä»¥è·å–å­—ç¬¦ä¸²çš„é¦–ä¸ªç´¢å¼•ï¼Œä½¿ç”¨endIndexå¯ä»¥è·å–å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªä½ç½®çš„ç´¢å¼•</p>
<p>é€šè¿‡è°ƒç”¨ String çš„ index(before:) æˆ– index(after:) æ–¹æ³•ï¼Œå¯ä»¥ç«‹å³å¾—åˆ°å‰é¢æˆ–åé¢çš„ä¸€ä¸ªç´¢å¼•ã€‚æ‚¨è¿˜å¯ä»¥é€šè¿‡è°ƒç”¨ index(_:offsetBy:) æ–¹æ³•æ¥è·å–å¯¹åº”åç§»é‡çš„ç´¢å¼•ï¼Œè¿™ç§æ–¹å¼å¯ä»¥é¿å…å¤šæ¬¡è°ƒç”¨ index(before:) æˆ– index(after:) æ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">let greeting = &quot;Guten Tag!&quot;</div><div class="line">greeting[greeting.startIndex]</div><div class="line">// G</div><div class="line">greeting[greeting.index(before: greeting.endIndex)]</div><div class="line">// !</div><div class="line">greeting[greeting.index(after: greeting.startIndex)]</div><div class="line">// u</div><div class="line"></div><div class="line">let index = greeting.index(greeting.startIndex, offsetBy: 7)</div><div class="line">greeting[index]</div><div class="line">// a</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨charactersçš„indiceså±æ€§ï¼Œä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«å…¨éƒ¨ç´¢å¼•çš„èŒƒå›´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªæ¥éå†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">for index in greeting.characters.indices &#123;</div><div class="line">   print(&quot;\(greeting[index]) &quot;, terminator: &quot;&quot;)</div><div class="line">&#125;</div><div class="line">// æ‰“å°è¾“å‡º &quot;G u t e n   T a g !</div></pre></td></tr></table></figure>
<h4 id="æ’å…¥å’Œåˆ é™¤"><a href="#æ’å…¥å’Œåˆ é™¤" class="headerlink" title="æ’å…¥å’Œåˆ é™¤"></a>æ’å…¥å’Œåˆ é™¤</h4><p>è°ƒç”¨ insert(_:at:) æ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„æŒ‡å®šç´¢å¼•æ’å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œè°ƒç”¨ insert(contentsOf:at:) æ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„æŒ‡å®šç´¢å¼•æ’å…¥ä¸€ä¸ªæ®µå­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var welcome = &quot;hello&quot;</div><div class="line">welcome.insert(&quot;!&quot;, at: welcome.endIndex)</div><div class="line">// welcome å˜é‡ç°åœ¨ç­‰äº &quot;hello!&quot;</div><div class="line">Â </div><div class="line">welcome.insert(contentsOf:&quot; there&quot;.characters, at: welcome.index(before: welcome.endIndex))</div><div class="line">// welcome å˜é‡ç°åœ¨ç­‰äº &quot;hello there!</div></pre></td></tr></table></figure>
<p>è°ƒç”¨ remove(at:) æ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„æŒ‡å®šç´¢å¼•åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œè°ƒç”¨ removeSubrange(_:) æ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„æŒ‡å®šç´¢å¼•åˆ é™¤ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">welcome.remove(at: welcome.index(before: welcome.endIndex))</div><div class="line">// welcome ç°åœ¨ç­‰äº &quot;hello there&quot;</div><div class="line">Â </div><div class="line">let range = welcome.index(welcome.endIndex, offsetBy: -6)..&lt;welcome.endIndex</div><div class="line">welcome.removeSubrange(range)</div><div class="line">// welcome ç°åœ¨ç­‰äº &quot;helloâ€œ</div></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²çš„æ¯”è¾ƒ"><a href="#å­—ç¬¦ä¸²çš„æ¯”è¾ƒ" class="headerlink" title="å­—ç¬¦ä¸²çš„æ¯”è¾ƒ"></a>å­—ç¬¦ä¸²çš„æ¯”è¾ƒ</h3><h4 id="å­—ç¬¦ä¸²ç›¸ç­‰"><a href="#å­—ç¬¦ä¸²ç›¸ç­‰" class="headerlink" title="å­—ç¬¦ä¸²ç›¸ç­‰"></a>å­—ç¬¦ä¸²ç›¸ç­‰</h4><p>åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰æˆ–è€…ä¸ç­‰ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨== !=æ¥åˆ¤æ–­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">let quotation = &quot;We&apos;re a lot alike, you and I.&quot;</div><div class="line">let sameQuotation = &quot;We&apos;re a lot alike, you and I.&quot;</div><div class="line">if quotation == sameQuotation &#123;</div><div class="line">    print(&quot;These two strings are considered equal&quot;)</div><div class="line">&#125;</div><div class="line">// æ‰“å°è¾“å‡º &quot;These two strings are considered equalâ€</div></pre></td></tr></table></figure>
<h4 id="å‰ç¼€åç¼€ç›¸ç­‰"><a href="#å‰ç¼€åç¼€ç›¸ç­‰" class="headerlink" title="å‰ç¼€åç¼€ç›¸ç­‰"></a>å‰ç¼€åç¼€ç›¸ç­‰</h4><p>é€šè¿‡è°ƒç”¨å­—ç¬¦ä¸²çš„hasPrefix(_\:)/hasSuffix(_:)æ–¹æ³•æ¥æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ‹¥æœ‰ç‰¹å®šå‰ç¼€/åç¼€ï¼Œä¸¤ä¸ªæ–¹æ³•å‡æ¥æ”¶ä¸€ä¸ªStringç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">let romeoAndJuliet = [</div><div class="line">    &quot;Act 1 Scene 1: Verona, A public place&quot;,</div><div class="line">    &quot;Act 1 Scene 2: Capulet&apos;s mansion&quot;,</div><div class="line">    &quot;Act 1 Scene 3: A room in Capulet&apos;s mansion&quot;,</div><div class="line">    &quot;Act 1 Scene 4: A street outside Capulet&apos;s mansion&quot;,</div><div class="line">    &quot;Act 1 Scene 5: The Great Hall in Capulet&apos;s mansion&quot;,</div><div class="line">    &quot;Act 2 Scene 1: Outside Capulet&apos;s mansion&quot;,</div><div class="line">    &quot;Act 2 Scene 2: Capulet&apos;s orchard&quot;,</div><div class="line">    &quot;Act 2 Scene 3: Outside Friar Lawrence&apos;s cell&quot;,</div><div class="line">    &quot;Act 2 Scene 4: A street in Verona&quot;,</div><div class="line">    &quot;Act 2 Scene 5: Capulet&apos;s mansion&quot;,</div><div class="line">    &quot;Act 2 Scene 6: Friar Lawrence&apos;s cell&quot;</div><div class="line">]</div></pre></td></tr></table></figure>
<p>è®¡ç®—åŒ…å«å¼€å¤´æ˜¯â€Act 1â€çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var act1SceneCount = 0</div><div class="line">for scene in romeoAndJuliet &#123;</div><div class="line">    if scene.hasPrefix(&quot;Act 1 &quot;) &#123;</div><div class="line">        act1SceneCount += 1</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">print(&quot;There are \(act1SceneCount) scenes in Act 1&quot;)</div><div class="line">// æ‰“å°è¾“å‡º &quot;There are 5 scenes in Act 1â€œ</div></pre></td></tr></table></figure>
<p>è®¡ç®—ç»“å°¾æ˜¯â€Capuletâ€™s mansionâ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var mansionCount = 0</div><div class="line">for scene in romeoAndJuliet &#123;</div><div class="line">    if scene.hasSuffix(&quot;Capulet&apos;s mansion&quot;) &#123;</div><div class="line">        mansionCount += 1</div><div class="line">        &#125;</div><div class="line">print(&quot;\(mansionCount) mansion scenesâ€)</div><div class="line">// æ‰“å°è¾“å‡º &quot;6 mansion scenesâ€</div></pre></td></tr></table></figure>
<p>å­—ç¬¦å’Œå­—ç¬¦ä¸²ç« èŠ‚ç»“æŸ</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ä¸ªç« èŠ‚ï¼Œæˆ‘ä»¬è®²Swiftä¸­çš„å­—ç¬¦ä¸²å’Œå­—ç¬¦ï¼Œéœ€è¦è¯´æ˜çš„æ˜¯åœ¨Swiftä¸­Stringå’ŒOCä¸­çš„NSStringè¿›è¡Œäº†æ— ç¼è¡”æ¥ï¼Œè¿™å°±æ„å‘³ç€ï¼ŒStringç±»å‹çš„å­—ç¬¦ä¸²å¯ä»¥ç›´æ¥è°ƒç”¨NSStringä¸­æš´éœ²å‡ºæ¥çš„æ–¹æ³•ï¼Œä¸éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Swiftå®˜æ–¹æ•™ç¨‹å­¦ä¹ ç¬”è®°" scheme="http://ppsheep.com/all-categories/Swift%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Swiftå®˜æ–¹æ•™ç¨‹å­¦ä¹ ç¬”è®°" scheme="http://ppsheep.com/all-tags/Swift%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>iOS pingç½‘ç»œå°å·¥å…·</title>
    <link href="http://ppsheep.com/2017/01/03/iOS-ping%E7%BD%91%E7%BB%9C%E5%B0%8F%E5%B7%A5%E5%85%B7/"/>
    <id>http://ppsheep.com/2017/01/03/iOS-pingç½‘ç»œå°å·¥å…·/</id>
    <published>2017-01-03T05:30:44.000Z</published>
    <updated>2017-01-09T07:47:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>Pingå·¥å…·ç»å¸¸åœ¨æ¸¸æˆä¸­è§åˆ°ï¼Œè®¡ç®—ç½‘ç»œçš„å»¶è¿Ÿï¼ŒAppleå®˜æ–¹æœ‰ä¸€ä¸ªSimplePingçš„demoï¼Œç”¨äºå¯¹ç½‘ç»œè¿›è¡Œæ£€æµ‹ï¼Œå°±è·Ÿæˆ‘ä»¬ç”µè„‘ç«¯çš„pingæ•ˆæœç›¸åŒï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥è¿›è¡Œç½‘ç»œé€Ÿåº¦çš„æ£€æµ‹ï¼Œè¿™é‡Œå°†å®˜æ–¹ç»™å‡ºçš„demoè¿›è¡Œå°è£…ï¼Œå¹¶ä¸”åœ¨SimplePingçš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¸€äº›æ”¹åŠ¨ï¼Œå°†æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„ä¸€äº›å…¶ä»–çš„æ•°æ®å–å‡ºæ¥ï¼Œä¾¿äºæˆ‘ä»¬çš„ä½¿ç”¨ï¼Œæºç æˆ‘ä¼šæ”¾åœ¨æ–‡ç« æœ«å°¾ã€‚</p>
<a id="more"></a>
<h3 id="SimplePing"><a href="#SimplePing" class="headerlink" title="SimplePing"></a>SimplePing</h3><p>Appleå®˜æ–¹çš„demo SimplePing ï¼Œèƒ½å¤Ÿå®ç°ç½‘ç»œpingåŠŸèƒ½ï¼Œä½†æ˜¯æœ‰ä¸€äº›å…¶ä»–çš„æ•°æ®ä¸èƒ½å¤Ÿå¾—åˆ°ï¼Œä¾‹å¦‚å­˜æ´»æ—¶é—´ï¼Œå“åº”æ—¶é—´ç­‰ç­‰ï¼Œä¸‹é¢æ˜¯å®˜æ–¹ä¾‹å­ï¼š</p>
<p><a href="https://developer.apple.com/library/content/samplecode/SimplePing/Introduction/Intro.html" target="_blank" rel="external">https://developer.apple.com/library/content/samplecode/SimplePing/Introduction/Intro.html</a></p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2017-01-03-053734.jpg" alt=""></p>
<h3 id="æ”¹åŠ¨åçš„PPSSimplePing"><a href="#æ”¹åŠ¨åçš„PPSSimplePing" class="headerlink" title="æ”¹åŠ¨åçš„PPSSimplePing"></a>æ”¹åŠ¨åçš„PPSSimplePing</h3><p>æ”¹åŠ¨åçš„SimplePingèƒ½å¤Ÿè®¡ç®—å‡ºå“åº”æ—¶é—´ï¼Œå¾—åˆ°åŸŸåçš„ipåœ°å€ï¼Œå­˜æ´»æ—¶é—´ç­‰ç­‰ã€‚</p>
<h3 id="PPSPingItem"><a href="#PPSPingItem" class="headerlink" title="PPSPingItem"></a>PPSPingItem</h3><p>æ–°å»ºä¸€ä¸ªæˆ‘ä»¬çš„è‡ªå·±çš„å·¥ç¨‹ï¼Œå°†åˆšæ‰ä¸‹è½½çš„ä¾‹å­ä¸­çš„SimplePing å¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶ ä¸¤ä¸ªæ–‡ä»¶æ‹·è´åˆ°æˆ‘ä»¬çš„å·¥ç¨‹ä¸­</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªmodel PPSPingItem  ç”¨æ¥å°è£…æˆ‘ä»¬åœ¨ç½‘ç»œpingè¿‡ç¨‹ä¸­ï¼Œè¿”å›çš„ä¸€äº›æ•°æ®ï¼Œä¾¿äºæ•°æ®å±•ç¤º</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€å¼ ç”µè„‘çš„ç»ˆç«¯pingçš„æ ·å¼ï¼š</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2017-01-03-054734.jpg" alt=""></p>
<p>æˆ‘ä»¬åœ¨æ‰‹æœºç«¯è¦å®ç°çš„ä¹Ÿæ˜¯è¿™ç§æ•ˆæœ</p>
<p>PPSPingItemï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line"></div><div class="line">typedef NS_ENUM(NSUInteger, PPSPingStatus)&#123;</div><div class="line">    PPSPingStatusDidStart,//å¼€å§‹</div><div class="line">    PPSPingStatusDidFailToSendPacket,//å‘é€æ•°æ®åŒ…å¤±è´¥</div><div class="line">    PPSPingStatusDidReceivePacket,//æ”¶åˆ°æ•°æ®åŒ…</div><div class="line">    PPSPingStatusDidReceiveUnexpectedPacket,//æ•°æ®åŒ…æ•°æ®é”™è¯¯</div><div class="line">    PPSPingStatusDidTimeout,//è¶…æ—¶</div><div class="line">    PPSPingStatusError,//é”™è¯¯</div><div class="line">    PPSPingStatusFinished,//å®Œæˆ</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line">@interface PPSPingItem : NSObject</div><div class="line"></div><div class="line">/**</div><div class="line"> </div><div class="line"> ping www.163.com</div><div class="line"> </div><div class="line"> PING 163.xdwscache.ourglb0.com (183.134.24.71): 56 data bytes</div><div class="line"> </div><div class="line"> 64 bytes from 183.134.24.71: icmp_seq=0 ttl=53 time=12.914 ms</div><div class="line"> 64 bytes from 183.134.24.71: icmp_seq=1 ttl=53 time=15.136 ms</div><div class="line"> </div><div class="line"> --- 163.xdwscache.ourglb0.com ping statistics ---</div><div class="line"> 2 packets transmitted, 2 packets received, 0.0% packet loss</div><div class="line"> </div><div class="line"> */</div><div class="line"></div><div class="line">/**</div><div class="line"> å¯¹åº”ä¸Šé¢çš„ä¸€ä¸ªpingè§£é‡Šå±æ€§</div><div class="line"> */</div><div class="line"></div><div class="line">@property(nonatomic) NSString *originalAddress; // 163.xdwscache.ourglb0.com</div><div class="line"></div><div class="line">@property(nonatomic, copy) NSString *IPAddress;// 183.134.24.71</div><div class="line"></div><div class="line">@property(nonatomic) NSUInteger dateBytesLength;// 64</div><div class="line"></div><div class="line">@property(nonatomic) double     timeMilliseconds;//time</div><div class="line"></div><div class="line">@property(nonatomic) NSInteger  timeToLive;//ttl</div><div class="line"></div><div class="line">@property(nonatomic) NSInteger  ICMPSequence;//icmp_seq</div><div class="line"></div><div class="line">@property(nonatomic) PPSPingStatus status;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>PPSPingItemä¸­çš„å±æ€§ï¼Œåœ¨æˆ‘ä»¬pingç½‘ç»œè¿‡ç¨‹ä¸­ï¼Œè¿”å›æ•°æ®æ—¶éœ€è¦ç”¨åˆ°ã€‚</p>
<h3 id="PPSPingServices"><a href="#PPSPingServices" class="headerlink" title="PPSPingServices"></a>PPSPingServices</h3><p>PPSPingServicesæ˜¯ä¸€ä¸ªæœåŠ¡ç±»ï¼Œç”¨ä½œpingçš„å…¥å£ï¼Œä¸€ä¸ªç®¡ç†ç±»ï¼Œä¾›å¤–éƒ¨è°ƒç”¨ï¼Œåœ¨PPSPingServicesç±»ä¸­ï¼Œæˆ‘å°†å‘èµ·ç½‘ç»œpingçš„æ¥å£åšæˆäº†blockï¼Œå½“ç„¶ï¼Œå¦‚æœä½ æ›´å–œæ¬¢delegateï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨delegateå®ç°</p>
<p>é¦–å…ˆï¼Œä¸€ä¸ªç±»æ–¹æ³•ï¼Œè°ƒèµ·PingæœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> å¼€å§‹æ”¶é›†Pingç½‘ç»œæ¶ˆæ¯</div><div class="line"> </div><div class="line"> @param address åŸŸå</div><div class="line"> @param handler å›è°ƒåŒ…ä¿¡æ¯ æ¯æ¬¡æ”¶åˆ°çš„ç½‘ç»œä¿¡æ¯</div><div class="line"> @return PPSPingServices</div><div class="line"> */</div><div class="line">+ (PPSPingServices *)startPingAddress:(NSString *)address</div><div class="line">                      callbackHandler:(void(^)(PPSPingItem *pingItem, NSArray *pingItems))handler;</div></pre></td></tr></table></figure>
<p>åœ¨å®ç°æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®ç°SimplePingDelegateï¼Œdelegateä¸­ä¸€å…±æœ‰6ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«å¯¹åº”è¿™pingçš„ä¸åŒçŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//å¼€å§‹è¿›è¡Œç½‘ç»œæ£€æµ‹</div><div class="line">- (void)simplePing:(SimplePing *)pinger didStartWithAddress:(NSData *)address;</div><div class="line">//ç½‘ç»œæ£€æµ‹å¤±è´¥</div><div class="line">- (void)simplePing:(SimplePing *)pinger didFailWithError:(NSError *)error;</div><div class="line">//å‘é€ç½‘ç»œåŒ…æˆåŠŸ</div><div class="line">- (void)simplePing:(SimplePing *)pinger didSendPacket:(NSData *)packet sequenceNumber:(uint16_t)sequenceNumber;</div><div class="line">//å‘é€ç½‘ç»œåŒ…å¤±è´¥</div><div class="line">- (void)simplePing:(SimplePing *)pinger didFailToSendPacket:(NSData *)packet sequenceNumber:(uint16_t)sequenceNumber error:(NSError *)error;</div><div class="line">//æ”¶åˆ°ç½‘ç»œåŒ…å›åº”</div><div class="line">- (void)simplePing:(SimplePing *)pinger didReceivePingResponsePacket:(NSData *)packet sequenceNumber:(uint16_t)sequenceNumber;</div><div class="line">//æ”¶åˆ°é”™è¯¯çš„ç½‘ç»œåŒ…</div><div class="line">- (void)simplePing:(SimplePing *)pinger didReceiveUnexpectedPacket:(NSData *)packet;</div></pre></td></tr></table></figure>
<p>å¼€å§‹pingç½‘ç»œæ•°æ®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> å¼€å§‹ç½‘ç»œpingç½‘ç»œ</div><div class="line"></div><div class="line"> @param sender æŒ‰é’®</div><div class="line"> */</div><div class="line">- (IBAction)startPing:(id)sender &#123;</div><div class="line"> self.pingService = [PPSPingServices startPingAddress:_domainTextFiled.text callbackHandler:^(PPSPingItem *pingItem, NSArray *pingItems) &#123;</div><div class="line">     NSLog(@&quot;%@&quot;,pingItem);</div><div class="line"> &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨æœåŠ¡ç±»ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹pingç½‘ç»œï¼Œä¼šåœ¨6ä¸ªdelegateæ–¹æ³•ä¸­ï¼Œåˆ†åˆ«è·å¾—pingç½‘ç»œçš„è¿”å›å€¼</p>
<p>çœ‹ä¸€ä¸‹æ•ˆæœå›¾ï¼š</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2017-01-09-iOSping%E5%B0%8F%E5%B7%A5%E5%85%B7.gif" alt=""></p>
<p>åé¢å¦‚æœè¿˜æœ‰æ—¶é—´ï¼Œä¼šæ¥ç€å®Œå–„</p>
<p>æºç æ”¾åœ¨ï¼š</p>
<p><a href="https://github.com/yangqian111/PPSSimplePing" target="_blank" rel="external">https://github.com/yangqian111/PPSSimplePing</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Pingå·¥å…·ç»å¸¸åœ¨æ¸¸æˆä¸­è§åˆ°ï¼Œè®¡ç®—ç½‘ç»œçš„å»¶è¿Ÿï¼ŒAppleå®˜æ–¹æœ‰ä¸€ä¸ªSimplePingçš„demoï¼Œç”¨äºå¯¹ç½‘ç»œè¿›è¡Œæ£€æµ‹ï¼Œå°±è·Ÿæˆ‘ä»¬ç”µè„‘ç«¯çš„pingæ•ˆæœç›¸åŒï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥è¿›è¡Œç½‘ç»œé€Ÿåº¦çš„æ£€æµ‹ï¼Œè¿™é‡Œå°†å®˜æ–¹ç»™å‡ºçš„demoè¿›è¡Œå°è£…ï¼Œå¹¶ä¸”åœ¨SimplePingçš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¸€äº›æ”¹åŠ¨ï¼Œå°†æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„ä¸€äº›å…¶ä»–çš„æ•°æ®å–å‡ºæ¥ï¼Œä¾¿äºæˆ‘ä»¬çš„ä½¿ç”¨ï¼Œæºç æˆ‘ä¼šæ”¾åœ¨æ–‡ç« æœ«å°¾ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="iOSåŸºç¡€ ç½‘ç»œç»„ä»¶" scheme="http://ppsheep.com/all-categories/iOS%E5%9F%BA%E7%A1%80-%E7%BD%91%E7%BB%9C%E7%BB%84%E4%BB%B6/"/>
    
    
      <category term="pingå·¥å…·" scheme="http://ppsheep.com/all-tags/ping%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>Swiftæ•™ç¨‹(ä¸€)â€”åŸºç¡€éƒ¨åˆ†ã€åŸºæœ¬è¿ç®—ç¬¦</title>
    <link href="http://ppsheep.com/2016/12/28/Swift%E6%95%99%E7%A8%8B(%E4%B8%80)%E2%80%94%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86%E3%80%81%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
    <id>http://ppsheep.com/2016/12/28/Swiftæ•™ç¨‹(ä¸€)â€”åŸºç¡€éƒ¨åˆ†ã€åŸºæœ¬è¿ç®—ç¬¦/</id>
    <published>2016-12-28T11:13:10.000Z</published>
    <updated>2017-01-09T01:52:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>Swift  è¯¥æ¥çš„è¿˜æ˜¯è¦æ¥çš„ï¼ŒSwiftä½¿ç”¨èŒƒå›´è¶Šæ¥è¶Šå¹¿ï¼Œä½ ä¸ç”¨ï¼Œå¤§å®¶éƒ½ä¼šç”¨ï¼Œç„¶åå‘¢ã€‚ã€‚ã€‚ä½ åˆè½åäº†ã€‚ã€‚</p>
<a id="more"></a>
<h3 id="å¸¸é‡å˜é‡"><a href="#å¸¸é‡å˜é‡" class="headerlink" title="å¸¸é‡å˜é‡"></a>å¸¸é‡å˜é‡</h3><p>é¦–å…ˆå‘¢ï¼Œæ¯é—¨è¯­è¨€éƒ½æ˜¯ä»å¸¸é‡å˜é‡è®²èµ·ï¼ŒSwiftå½“ç„¶ä¹Ÿä¸ä¾‹å¤–</p>
<p>åœ¨Swiftä¸­å¸¸é‡  ä½¿ç”¨ letå£°æ˜   å˜é‡ä½¿ç”¨varå£°æ˜<br>ä¸åƒOCæˆ–è€…Java æˆ‘ä»¬åœ¨å£°æ˜å¸¸é‡å˜é‡æ—¶ï¼Œå¯ä»¥ä¸åŠ ç±»å‹ï¼Œç¼–è¯‘å™¨èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ¨æ–­å‡ºç±»å‹ï¼Œåƒè¿™æ ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let myName = &quot;Yang Qian&quot;</div><div class="line"></div><div class="line">var myAge = 23</div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢ä¸¤è¡Œä¸­ï¼Œå¹¶æ²¡æœ‰æŒ‡æ˜ myAge å’Œ  myName çš„ç±»å‹ï¼Œç¼–è¯‘å™¨ä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯å¯ä»¥å£°æ˜ä»–ä»¬çš„ç±»å‹çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let myName: String = &quot;Yang Qian&quot;</div><div class="line"></div><div class="line">let myAge: Int  = 23</div><div class="line"></div><div class="line">let ğŸ¶ğŸ® = &quot;dogcow&quot;</div></pre></td></tr></table></figure>
<p><em>æ³¨æ„</em>è¿™é‡Œæœ‰ä¸€ä¸ªä¹¦å†™è§„èŒƒï¼Œè‹¹æœåœ¨æ–‡æ¡£ä¸­ç‰¹æ„æé†’äº†ï¼Œåœ¨å£°æ˜ç±»å‹çš„æ—¶å€™ï¼Œéœ€è¦åœ¨å†’å·åé¢ç©ºä¸€æ ¼ï¼Œä¿æŒæ ¼å¼ä¸€è‡´ã€‚</p>
<blockquote>
<p><strong>å¸¸é‡(let)ä¸€æ—¦å£°æ˜ï¼Œä¾¿ä¸å¯æ›´æ”¹ã€‚å˜é‡(var)å¯è¿›è¡Œæ›´æ”¹</strong></p>
</blockquote>
<h3 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// This is a comment. è¿™æ˜¯ä¸€è¡Œæ³¨é‡Š</div><div class="line"></div><div class="line">/*</div><div class="line"> è¿™æ˜¯å¤šè¡Œæ³¨é‡Š</div><div class="line"> */</div></pre></td></tr></table></figure>
<h3 id="åˆ†å·"><a href="#åˆ†å·" class="headerlink" title="åˆ†å·"></a>åˆ†å·</h3><p>å…³äºåˆ†å·å‘¢ï¼Œåœ¨Swiftä¸­ï¼Œæ¯ä¸ªè¯­å¥ç»“æŸæ˜¯ä¸ç”¨å†™åˆ†å·çš„ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å†™ï¼Œä½†æ˜¯æˆ‘ä»¬æ¨èå‘¢ï¼Œè¿˜æ˜¯ä¸è¦å†™äº†ï¼Œè‹¹æœéƒ½è¯´ä¸ç”¨å†™äº†ï¼Œä½ è¿˜å†™å¹²å˜›ï¼Œè€Œä¸”ç°åœ¨çœ‹ä¸€äº›å¼€æºçš„Swiftä»£ç ï¼Œå¤§ç¥éƒ½æ²¡å†™åˆ†å·ã€‚</p>
<p>ä½†æ˜¯å­˜åœ¨ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯å¦‚æœä½ æƒ³åœ¨ä¸€è¡Œå†™å¤šä¸ªè¯­å¥ï¼Œé‚£æ¯ä¸ªè¯­å¥ä¹‹é—´ä½ å°±éœ€è¦ç”¨åˆ†å·éš”å¼€äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//è¿™æ ·å°±ä¼šæŠ¥é”™äº†</div><div class="line">let myName: String = &quot;Yang Qian&quot; let myAge: Int  = 23</div><div class="line">//è¦è¿™æ ·å†™</div><div class="line">let myName: String = &quot;Yang Qian&quot; ; let myAge: Int  = 23</div></pre></td></tr></table></figure>
<p>è¿™æ ·çš„ä»£ç ä¹Ÿå¤ªä¸‘äº†å§ï¼Œè¿˜æ˜¯ä¸€è¡Œä¸€ä¸ªè¯­å¥å§ï¼Œå…»æˆè‰¯å¥½çš„ä»£ç ä¹ æƒ¯</p>
<h3 id="æ•´æ•°Int"><a href="#æ•´æ•°Int" class="headerlink" title="æ•´æ•°Int"></a>æ•´æ•°Int</h3><p>åœ¨Swiftä¸Šï¼Œæä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ•´æ•°ç±»å‹Intï¼Œåœ¨32ä½çš„æœºå™¨ä¸Šè¿è¡Œï¼Œé‚£è¿™ä¸ªæ•´æ•°çš„é•¿åº¦å°±æ˜¯å’ŒInt32ç›¸åŒï¼Œå¦‚æœå®åœ¨64ä¸ºæœºå™¨ä¸Šè¿è¡Œï¼Œé‚£è¿™ä¸ªæ•´æ•°çš„é•¿åº¦å°±æ˜¯Int64çš„ï¼Œä¸€èˆ¬æ¥è¯´  æˆ‘ä»¬ç›´æ¥ä½¿ç”¨Intå°±å·²ç»OKäº†ã€‚</p>
<h3 id="æ— ç±»å‹UInt"><a href="#æ— ç±»å‹UInt" class="headerlink" title="æ— ç±»å‹UInt"></a>æ— ç±»å‹UInt</h3><p>æ— ç¬¦å·ç±»å‹ï¼Œä¸€èˆ¬å‘¢æˆ‘ä»¬ä¸ä½¿ç”¨ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ  è‹¹æœæ–‡æ¡£ä¸Šè®²çš„</p>
<blockquote>
<p>Use UInt only when you specifically need an unsigned integer type with the same size as the platformâ€™s native word size. If this is not the case, Int is preferred, even when the values to be stored are known to be non-negative</p>
</blockquote>
<h3 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h3><p>ç±»å‹åˆ«å  å°±æ˜¯ç»™ç°æœ‰çš„ç±»å‹åŠ ä¸Šä¸€ä¸ªæˆ‘ä»¬è‡ªå·±è‡ªå®šä¹‰çš„åç§°  ä½¿ç”¨å…³é”®å­— typealiaså®šä¹‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//è¿™æ ·ï¼Œæˆ‘ä»¬å°±å°†UInt16å®šä¹‰æˆäº† AudioSample</div><div class="line">typealias AudioSample = UInt16</div><div class="line"></div><div class="line">var maxAmplitudeFound = AudioSample.min</div><div class="line">// ç­‰ä»·äº  var maxAmplitudeFound = UInt16.min</div></pre></td></tr></table></figure>
<h3 id="Booleans"><a href="#Booleans" class="headerlink" title="Booleans"></a>Booleans</h3><p>ç°åœ¨æˆ‘ä»¬çš„å¸ƒå°”å€¼  ä¸å†æ˜¯OC ä¸­çš„  Yes å’Œ  No äº†  éœ€è¦ä½¿ç”¨  true  false</p>
<p>è€Œä¸” ç°åœ¨å‘¢ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½å†ä½¿ç”¨intçš„  0  1 æ¥è¡¨ç¤º  true æˆ–è€…false äº†  ä¹‹å‰å‘¢  OCæ˜¯å¯ä»¥è¿™æ ·ä½¿ç”¨çš„  ä½†æ˜¯åœ¨swiftä¸­ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let i = 1</div><div class="line">if i &#123;</div><div class="line">    // this example will not compile, and will report an error</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œè‹¹æœè®²äº†ï¼Œæ˜¯ä¼šæŠ¥é”™çš„</p>
<h3 id="Tuples-å…ƒç»„"><a href="#Tuples-å…ƒç»„" class="headerlink" title="Tuples å…ƒç»„"></a>Tuples å…ƒç»„</h3><p>å…ƒç»„ï¼Œè¿™ä¸ªå‰å®³äº†ï¼Œè¿™ä¸ªå¯ä»¥æŠŠå¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå¤åˆå€¼ï¼Œå°±æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œè€Œä¸”è¿™ä¸ªå…ƒç»„é‡Œçš„å„ä¸ªå€¼ï¼Œä¸ç”¨ç±»å‹ç›¸åŒï¼Œè¿™ä¸‹å‰å®³äº†ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ä¼ å‚æ•°ï¼Œè¿˜æœ‰å‡½æ•°è¿”å›å€¼ï¼Œéƒ½å¯ä»¥å¤šä¸ªäº†  æƒ³æƒ³ æŒºæ¿€åŠ¨çš„  è™½ç„¶è¿˜æ²¡ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let http404Error = (404, &quot;Not Found&quot;)</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ï¼Œå°±æ˜¯ä¸€ä¸ªè¡¨ç¤º404 çš„ä¸€ä¸ªå…ƒç»„ï¼Œçœ‹åˆ°äº†ï¼Œæ˜¯ä¸€ä¸ª404 Int å’Œ  ä¸€ä¸ª  String</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">let http404Code = (404, &quot;Not Found&quot;)</div><div class="line"></div><div class="line">let (statusCode, statusString) = http404Code</div><div class="line"></div><div class="line">print(&quot;the code is \(statusCode)&quot;)</div><div class="line"></div><div class="line">print(&quot;the message is \(statusString)&quot;)</div></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">the code is 404</div><div class="line">the message is Not Found</div></pre></td></tr></table></figure>
<p> å¦‚æœå‘¢ï¼Œæˆ‘ä»¬åªå…³å¿ƒæˆ‘ä»¬éœ€è¦çš„æ•°æ®ï¼Œä¸å…³å¿ƒå…¶ä»–çš„ï¼Œæ¯”å¦‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªå…³å¿ƒcode é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è¿™æ ·å†™</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> </div><div class="line">let http404Code = (404, &quot;Not Found&quot;)</div><div class="line"></div><div class="line">let (statusCode, _) = http404Code</div><div class="line"></div><div class="line">print(&quot;the code is \(statusCode)&quot;)</div><div class="line"></div><div class="line">//print(&quot;the message is \(statusString)&quot;)</div></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">the code is 404</div></pre></td></tr></table></figure>
<p>èƒ½å°‘å†™ä¸€ç‚¹æ˜¯ä¸€ç‚¹</p>
<p>è¿˜å¯ä»¥å‘¢ï¼Œåƒæ•°ç»„ä¸€æ ·ï¼Œè¾“å‡ºå…ƒç»„çš„ç¬¬å‡ ä½:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let http404Code = (404, &quot;Not Found&quot;)</div><div class="line"></div><div class="line">print(&quot;the code is \(http404Code.0)&quot;)</div><div class="line"></div><div class="line">print(&quot;the message is \(http404Code.1)&quot;)</div></pre></td></tr></table></figure>
<p>è¾“å‡ºå‘¢,ä¸€æ ·çš„:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">the code is 404</div><div class="line">the message is Not Found</div></pre></td></tr></table></figure>
<p>åˆ«æ€¥ è¿˜æœ‰å†™æ³•å‘¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let http200Status = (statusCode: 200, description: &quot;OK&quot;)</div></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬æ¥è¾“å‡º:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(&quot;The status code is \(http200Status.statusCode)&quot;)</div><div class="line">// Prints &quot;The status code is 200</div></pre></td></tr></table></figure>
<p>ç®€ç›´å¤ªå¼ºå¤§äº†ï¼Œæˆ‘ä¸ªäººæœ€å–œæ¬¢ é‚£ç§ç‚¹è¯­æ³•</p>
<h3 id="Optionals-å¯é€‰ç±»å‹"><a href="#Optionals-å¯é€‰ç±»å‹" class="headerlink" title="Optionals å¯é€‰ç±»å‹"></a>Optionals å¯é€‰ç±»å‹</h3><p>ä½¿ç”¨å¯é€‰ç±»å‹ï¼Œç”¨æ¥å¤„ç†å€¼å¯èƒ½ç¼ºå¤±çš„æƒ…å†µï¼Œè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬çš„ä»£ç å®‰å…¨æ€§èƒ½å¤Ÿæå‡å¾ˆå¤š</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªå¯é€‰ç±»å‹å°±ä¸¤ç§æƒ…å†µ</p>
<ul>
<li>æœ‰å€¼  å°±æ˜¯x</li>
<li>æ— å€¼  å°±æ˜¯nil</li>
</ul>
<!--more-->
<blockquote>
<p>æˆ‘ä»¬çŸ¥é“åœ¨OCä¸­ï¼Œæ˜¯æ²¡æœ‰è¿™ä¸ªæ¦‚å¿µçš„ï¼Œåœ¨OCä¸­ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œæœ‰è¿”å›å€¼ï¼Œå¦‚æœæ˜¯è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œè¦ä¹ˆå°±æ˜¯è¿”å›å¯¹è±¡å®ä¾‹ï¼Œè¦ä¹ˆè¿”å›nilè¡¨ç¤ºå€¼ç¼ºå¤±ã€‚ä½†æ˜¯æˆ‘ä»¬é‡åˆ°éœ€è¦è¿”å›æšä¸¾ï¼Œæˆ‘ä»¬å°±æ²¡åŠæ³•äº†ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå®šä¹‰ä¸€ä¸ªNotFoundè¿™ç§ç±»å‹ï¼Œä½†æ˜¯åœ¨Swiftæˆ‘ä»¬å°±ä¸éœ€è¦äº†</p>
</blockquote>
<p>æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³è®²ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¼ºè½¬æˆä¸€ä¸ªIntæ•´å½¢ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œä¸å¯èƒ½æ¯ä¸ªå­—ç¬¦ä¸²éƒ½èƒ½è½¬æˆæ•´æ•°ï¼Œåƒâ€123â€è¿™ç§å¯ä»¥è½¬æˆæ•´å½¢ï¼Œä½†æ˜¯â€ni haoâ€è¿™ç§ï¼Œèƒ½è½¬æˆæ•´å½¢å—ï¼Ÿä½ åœ¨é€—æˆ‘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let testString = &quot;123&quot;</div><div class="line">let testString1 = &quot;ni hao&quot;</div><div class="line"></div><div class="line">let testInt1 = Int(testString1)</div><div class="line">let testInt2 = Int(testString)</div></pre></td></tr></table></figure>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-12-29-055540.jpg" alt=""></p>
<p>è¿™æ ·ä»£ç å¹¶ä¸ä¼šæŠ¥é”™</p>
<p>æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æ¥è®¾ç½®optionalå€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var serverResponseCode: Int? = 404</div><div class="line">// serverResponseCode contains an actual Int value of 404</div><div class="line">serverResponseCode = nil</div><div class="line">// serverResponseCode now contains no value</div></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼Œåœ¨Swiftä¸­ï¼Œnilçš„å®šä¹‰å’ŒObjective-Cä¸­çš„nilå®šä¹‰ä¸ç›¸åŒï¼Œåœ¨Swiftä¸­ï¼Œnilåªæ˜¯ç”¨æ¥è¡¨ç¤ºå€¼ç¼ºå¤±ï¼Œä¸ç®¡æ˜¯å¯¹è±¡ï¼Œè¿˜æ˜¯Intä¹‹ç±»çš„åŸºç¡€ç±»å‹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨nilæ¥è¡¨ç¤ºå€¼ç¼ºå¤±ï¼Œä½†æ˜¯åœ¨OCä¸­å°±åªæœ‰å¯¹è±¡å¯ä»¥ä½¿ç”¨ï¼Œå› ä¸ºåœ¨OCä¸­æ˜¯è¡¨ç¤ºä¸€ä¸ªæŒ‡å‘ä¸å­˜åœ¨å¯¹è±¡çš„æŒ‡é’ˆ</strong></p>
<p>å¦‚æœä½ åƒä¸‹é¢è¿™æ ·å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œä¸éœ€è¦ä½ å£°æ˜ä»–ä¸ºnilï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºä»–èµ‹å€¼nilï¼Œè¿™æ ¹OCä¸­  è¿˜æ˜¯æœ‰è¾ƒå¤§çš„å·®åˆ«çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var surveyAnswer: String?</div></pre></td></tr></table></figure>
<p>åŒæ ·çš„ï¼Œæˆ‘ä»¬è¿˜æ˜¯å’ŒOCä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨==æˆ–è€…!=æ¥åˆ¤æ–­æ˜¯å¦æ˜¯nil</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if surveyAnswer != nil&#123;</div><div class="line">	//åšä»€ä¹ˆ</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¡®å®šï¼Œè¿™ä¸ªå˜é‡ï¼Œè‚¯å®šæ˜¯æœ‰å€¼çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¼ºåˆ¶è§£åŒ…ï¼Œåœ¨å…¶åé¢åŠ ä¸Šä¸€ä¸ª!</p>
<p>åƒè¿™æ ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if surveyAnswer != nil&#123;</div><div class="line">	//æˆ‘ä»¬å·²ç»çŸ¥é“surveyAnsweræ˜¯è‚¯å®šæœ‰å€¼çš„</div><div class="line">	print(surveyAnswer!)//å¼ºåˆ¶è§£åŒ… è¾“å‡º</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>åœ¨æˆ‘ä»¬å¼ºåˆ¶è§£åŒ…çš„æ—¶å€™ï¼Œä¸€å®šè¦ç¡®ä¿è¿™ä¸ªå€¼æ˜¯æœ‰çš„ï¼Œä¸ç„¶ï¼Œä¼šå‡ºç°é”™è¯¯ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒ</strong></p>
<h3 id="å¯é€‰ç»‘å®š"><a href="#å¯é€‰ç»‘å®š" class="headerlink" title="å¯é€‰ç»‘å®š"></a>å¯é€‰ç»‘å®š</h3><p>è¿™ä¸ª  å‰å®³äº†ï¼Œå¾ˆå¥½ç”¨çš„</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨if å’Œ while è¯­å¥ä¸­ä½¿ç”¨ æˆ‘å°±ç›´æ¥ä¸Šä»£ç äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">if let actualNumber = Int(possibleNumber) &#123;</div><div class="line">    print(&quot;\&quot;\(possibleNumber)\&quot; has an integer value of \(actualNumber)&quot;)</div><div class="line">&#125; else &#123;</div><div class="line">    print(&quot;\&quot;\(possibleNumber)\&quot; could not be converted to an integer&quot;)</div><div class="line">&#125;</div><div class="line">// Prints &quot;&quot;123&quot; has an integer value of 123â€</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¸Šé¢è®²è¿‡ï¼Œè¿™ä¸ªå¼ºè½¬ï¼Œè½¬å‡ºæ¥æ˜¯ä¸€ä¸ªoptionalå€¼ï¼Œæˆ‘ä»¬åœ¨ifè¯­å¥ä¸­åˆ¤æ–­è¿™ä¸ªå€¼ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™å°†è¿™ä¸ªå€¼èµ‹ç»™actualNumberå¸¸é‡ï¼Œåœ¨åˆ¤æ–­è¯­å¥ä¸­éœ€è¦ä½¿ç”¨åˆ°ï¼Œå¦‚æœè½¬å‡ºæ¥æ˜¯ä¸€ä¸ªnilï¼Œé‚£ä¹ˆå°±è·³åˆ°å¦å¤–çš„è¯­å¥ä¸­</p>
<p>è¿˜æœ‰æ›´å¼ºå¤§çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">if let firstNumber = Int(&quot;4&quot;), </div><div class="line">	let secondNumber = Int(&quot;42&quot;), </div><div class="line">	firstNumber &lt; secondNumber &amp;&amp; secondNumber &lt; 100 </div><div class="line">&#123;</div><div class="line">    print(&quot;\(firstNumber) &lt; \(secondNumber) &lt; 100&quot;)</div><div class="line">&#125;</div><div class="line">// Prints &quot;4 &lt; 42 &lt; 100&quot;</div><div class="line"> </div><div class="line">if let firstNumber = Int(&quot;4&quot;)</div><div class="line"> &#123;</div><div class="line">    if let secondNumber = Int(&quot;42&quot;) </div><div class="line">    &#123;</div><div class="line">        if firstNumber &lt; secondNumber &amp;&amp; secondNumber &lt; 100 </div><div class="line">        &#123;</div><div class="line">            print(&quot;\(firstNumber) &lt; \(secondNumber) &lt; 100&quot;)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">// Prints &quot;4 &lt; 42 &lt; 100â€</div></pre></td></tr></table></figure>
<p>è¿™ä¹ˆå¼ºå¤§ çš„  ifè¯­å¥</p>
<h3 id="éšå¼è§£æ"><a href="#éšå¼è§£æ" class="headerlink" title="éšå¼è§£æ"></a>éšå¼è§£æ</h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¾ˆç¡®å®šï¼Œä¸€äº›å˜é‡æˆ–è€…å¸¸é‡ï¼Œè‚¯å®šæ˜¯æœ‰å€¼çš„ï¼Œä¸éœ€è¦å£°æ˜ä¸ºoptionalï¼Œä¸ç„¶æˆ‘ä»¬æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½éœ€è¦åŠ ä¸Š!æ¥è¿›è¡Œè§£åŒ…</p>
<p>Swiftä¸ºæˆ‘ä»¬æä¾›äº†éšå¼å£°æ˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let absolutString: String! = &quot;æˆ‘è‚¯å®šæ˜¯æœ‰å€¼çš„&quot;</div><div class="line"></div><div class="line">print(absolutString)//å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦è§£åŒ…</div></pre></td></tr></table></figure>
<h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h3><p>å¦‚æœä¹‹å‰æœ‰å†™è¿‡Javaçš„åŒå­¦è‚¯å®šå¯¹try catchå¾ˆç†Ÿæ‚‰  åœ¨Swiftä¸­ï¼Œä½¿ç”¨try catchæ¥è¿›è¡Œé”™è¯¯çš„æ•è·å’Œå¤„ç†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">func makeASandwich() throws &#123;</div><div class="line">    // è¿™ä¸ªå‡½æ•°å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯å¼‚å¸¸</div><div class="line">&#125;</div><div class="line"></div><div class="line"> </div><div class="line">do &#123;</div><div class="line">    try makeASandwich()//å¼€å§‹åšä¸‰æ˜æ²»</div><div class="line">    eatASandwich()//å¼€å§‹åƒä¸‰æ˜æ²»</div><div class="line">&#125; catch SandwichError.outOfCleanDishes &#123;//è¿™é‡Œæ•è·åˆ°äº†å¼‚å¸¸ï¼Œæ²¡æœ‰å¹²å‡€çš„ç›˜å­</div><div class="line">    washDishes()</div><div class="line">&#125; catch SandwichError.missingIngredients(let ingredients) &#123;//åˆæ•è·åˆ°äº†å¼‚å¸¸ï¼Œæ²¡æœ‰åŸææ–™</div><div class="line">    buyGroceries(ingredients)//ä¹°åŸææ–™</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æ–­è¨€"><a href="#æ–­è¨€" class="headerlink" title="æ–­è¨€"></a>æ–­è¨€</h3><p>æ–­è¨€æ˜¯å¾ˆå¥½ç”¨çš„ä¸€ä¸ªä¸œè¥¿ï¼Œè€Œä¸”é¼“åŠ±å¤§å®¶ä½¿ç”¨æ–­è¨€ã€‚</p>
<p>æ–­è¨€æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯æˆ‘ä»¬åœ¨è¿è¡Œä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæœ‰äº‹æˆ‘ä»¬éœ€è¦æŸä¸ªå‚æ•°ï¼Œæ¯”å¦‚ä¸€ä¸ªIntä¸€å®šè¦æ˜¯ä¸€ä¸ªå¤§äº0çš„æ•°ï¼Œå¦‚æœä¸å¤§äº0ï¼Œæˆ‘ä»¬çš„å‡½æ•°å°±æ— æ³•è¿è¡Œäº†ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ–­è¨€äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let age = -3</div><div class="line"></div><div class="line">assert(age &gt;= 0, &quot;A person&apos;s age cannot be less than zero&quot;)</div></pre></td></tr></table></figure>
<p>è¿™æ ·ç¨‹åºå°±ä¼šæ£€æŸ¥ageæ˜¯å¦æ˜¯å¤§äºç­‰äº0 çš„  å¦‚æœä¸ç¬¦åˆï¼Œç¨‹åºå°±ä¼šç»ˆæ­¢ï¼Œå¹¶ä¸”æˆ‘ä»¬èƒ½å¤Ÿå¾ˆå¿«çŸ¥é“ ä¸ºä»€ä¹ˆç¨‹åºä¼šç»ˆæ­¢</p>
<p>é‚£æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨åˆ°æ–­è¨€å‘¢ï¼Ÿ</p>
<ul>
<li>å½“ä¼ å…¥ä¸€ä¸ªintçš„ä¸‹æ ‡æ—¶ï¼Œæ¯”å¦‚ä¼ å…¥æ•°ç»„çš„ç´¢å¼•ï¼Œè¿™ä¸ªæ•´æ•°çš„å€¼å¯èƒ½ä¼šå¤ªå¤§æˆ–è€…å¤ªå°</li>
<li>éœ€è¦ç»™å‡½æ•°ä¼ å…¥ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯éæ³•çš„å€¼å¯èƒ½å¯¼è‡´å‡½æ•°ä¸èƒ½æ­£å¸¸æ‰§è¡Œã€‚</li>
<li>ä¸€ä¸ªå¯é€‰å€¼ç°åœ¨æ˜¯nilï¼Œä½†æ˜¯åé¢çš„ä»£ç è¿è¡Œéœ€è¦ä¸€ä¸ªénilå€¼</li>
</ul>
<h3 id="èµ‹å€¼æ“ä½œ"><a href="#èµ‹å€¼æ“ä½œ" class="headerlink" title="èµ‹å€¼æ“ä½œ"></a>èµ‹å€¼æ“ä½œ</h3><p>å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªåŠ å·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let a = 10</div><div class="line">let b = 5</div><div class="line">b = a</div><div class="line">print(b)</div><div class="line">//bè¾“å‡º 10</div></pre></td></tr></table></figure>
<p>å…ƒç»„èµ‹å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">let (x,y) = (1,2)</div><div class="line">//å¥½äº†èµ‹å€¼å¥½äº† x = 1 y = 2</div></pre></td></tr></table></figure>
<h3 id="åŸºæœ¬è¿ç®—"><a href="#åŸºæœ¬è¿ç®—" class="headerlink" title="åŸºæœ¬è¿ç®—"></a>åŸºæœ¬è¿ç®—</h3><p>åŠ å‡ä¹˜é™¤æˆ‘å°±ä¸è®²äº†å§</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªè¿˜æ˜¯è¦è®²ä¸€ä¸‹ï¼Œå­—ç¬¦ä¸²çš„åŠ æ³•  è¿™ä¸ªåœ¨Swiftä¸­æ˜¯ç‰¹æœ‰çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let a = &quot;æˆ‘æ˜¯&quot;</div><div class="line">let b = &quot;ç¨‹åºå‘˜&quot;</div><div class="line">let c = a + b</div><div class="line">print(c)</div><div class="line">//æˆ‘æ˜¯ç¨‹åºå‘˜</div></pre></td></tr></table></figure>
<h3 id="å–ä½™è¿ç®—"><a href="#å–ä½™è¿ç®—" class="headerlink" title="å–ä½™è¿ç®—"></a>å–ä½™è¿ç®—</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">9%2 = 1  ç­‰ä»·äº  (4*2)+1  ä½™ä¸‹ä¸€ä¸ª1</div><div class="line"></div><div class="line">-9%2 = -1 ç­‰ä»·äº  (-4*2)+ -1  ä½™ä¸‹ä¸€ä¸ª -1</div></pre></td></tr></table></figure>
<h3 id="è´Ÿå·çš„ä½¿ç”¨"><a href="#è´Ÿå·çš„ä½¿ç”¨" class="headerlink" title="è´Ÿå·çš„ä½¿ç”¨"></a>è´Ÿå·çš„ä½¿ç”¨</h3><p>è´Ÿè´Ÿå¾—æ­£ è¿™ä¸ªæˆ‘ä»¬éƒ½çŸ¥é“çš„å“¦ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let a = -1</div><div class="line">let b = -a</div><div class="line">//bç°åœ¨æ˜¯1</div><div class="line">let c = -b</div><div class="line">//ç°åœ¨cæ˜¯-1</div></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="+=ä½¿ç”¨"></a>+=ä½¿ç”¨</h3><p>è¿™ä¸ª  å¤§å®¶ä¹Ÿåœ¨å…¶ä»–çš„è¯­è¨€ä¸­è§è¿‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let a = 10</div><div class="line">a+=2  //a = a+2</div><div class="line">print(a)//è¾“å‡º12</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯  æˆ‘ä»¬æ²¡æœ‰è¿™æ ·çš„ç”¨æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let b = a+=2 //è¿™ç§ç”¨æ³•æ˜¯é”™è¯¯çš„</div></pre></td></tr></table></figure>
<h3 id="æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="æ¯”è¾ƒè¿ç®—ç¬¦"></a>æ¯”è¾ƒè¿ç®—ç¬¦</h3><p>==  ç­‰äº</p>
<p>!=  ä¸ç­‰äº</p>
<p>></p>
<p>&lt;</p>
<p>>=</p>
<p>&lt;=</p>
<p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ¯”è¾ƒ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let a = &quot;world&quot;</div><div class="line">let b = &quot;world&quot;</div><div class="line">if a == b &#123;</div><div class="line">	//è¿™é‡Œæ˜¯èƒ½å¤Ÿæ‰§è¡Œåˆ°çš„  è¿™ä¸ºçœŸï¼Œ è¿™é‡Œéœ€è¦æ³¨æ„ä¸‹</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…ƒç»„çš„æ¯”è¾ƒ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(2,&quot;abc&quot;)&gt;(1,&quot;bca&quot;)  //2&gt;1  </div><div class="line">(1,&quot;abc&quot;)&lt;(1,&quot;bca&quot;)  //1ç›¸åŒ æ¯”è¾ƒabcå’Œbca å…ˆæ¯”è¾ƒç¬¬ä¸€ä¸ªå­—æ¯  </div><div class="line">(1,&quot;abc&quot;) == (1,&quot;abc&quot;)</div></pre></td></tr></table></figure>
<h3 id="ä¸‰ç›®è¿ç®—"><a href="#ä¸‰ç›®è¿ç®—" class="headerlink" title="ä¸‰ç›®è¿ç®—"></a>ä¸‰ç›®è¿ç®—</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let contentHeight = 40</div><div class="line">let hasHeader = true</div><div class="line">let rowHeight = contentHeight + (hasHeader ? 50 : 20)</div><div class="line">// rowHeight is equal to 90</div></pre></td></tr></table></figure>
<h3 id="ç©ºåˆè¿ç®—"><a href="#ç©ºåˆè¿ç®—" class="headerlink" title="ç©ºåˆè¿ç®—"></a>ç©ºåˆè¿ç®—</h3><p>è¿™ä¸ªç©ºåˆè¿ç®—æ—¶é’ˆå¯¹å€¼ä¸ºnilçš„æ—¶å€™æ¥åšçš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let defaultColorName = &quot;red&quot;</div><div class="line">var userDefinedColorName: String?   // defaults to nil</div><div class="line"> </div><div class="line">var colorNameToUse = userDefinedColorName ?? defaultColorName</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå¦‚æœuserDefinedColorNameä¸æ˜¯nilçš„è¯colorNameToUseçš„å€¼å°±æ˜¯userDefinedColorNameçš„å€¼ï¼Œå¦‚æœuserDefinedColorNameæ˜¯nil é‚£ä¹ˆcolorNameToUseçš„å€¼ï¼Œå°±æ˜¯defaultColorNameçš„å€¼</p>
<h3 id="åŒºé—´è¿ç®—ç¬¦"><a href="#åŒºé—´è¿ç®—ç¬¦" class="headerlink" title="åŒºé—´è¿ç®—ç¬¦"></a>åŒºé—´è¿ç®—ç¬¦</h3><p>é—­åˆè¿ç®—ï¼ŒåŒ…å«ä¸¤ç«¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">for index in 1...5 &#123;</div><div class="line">    print(&quot;\(index) times 5 is \(index * 5)&quot;)</div><div class="line">&#125;</div><div class="line">// 1 times 5 is 5</div><div class="line">// 2 times 5 is 10</div><div class="line">// 3 times 5 is 15</div><div class="line">// 4 times 5 is 20</div><div class="line">// 5 times 5 is 25</div></pre></td></tr></table></figure>
<p>åŠå¼€åˆè¿ç®—  åŒ…å«å·¦ç«¯ ä¸åŒ…å«å³ç«¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">let names = [&quot;Anna&quot;, &quot;Alex&quot;, &quot;Brian&quot;, &quot;Jack&quot;]</div><div class="line">let count = names.count</div><div class="line">for i in 0..&lt;count &#123;</div><div class="line">    print(&quot;Person \(i + 1) is called \(names[i])&quot;)</div><div class="line">&#125;</div><div class="line">// Person 1 is called Anna</div><div class="line">// Person 2 is called Alex</div><div class="line">// Person 3 is called Brian</div><div class="line">// Person 4 is called Jack</div></pre></td></tr></table></figure>
<h3 id="é€»è¾‘è¿ç®—"><a href="#é€»è¾‘è¿ç®—" class="headerlink" title="é€»è¾‘è¿ç®—"></a>é€»è¾‘è¿ç®—</h3><p>é€»è¾‘è¿ç®—  åŒ…æ‹¬ </p>
<p>!é<br>&amp;&amp; ä¸”<br>|| æˆ–</p>
<p>åŸºç¡€çš„è¿ç®—ç¬¦å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹å­¦ä¹ Stringäº†</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Swift  è¯¥æ¥çš„è¿˜æ˜¯è¦æ¥çš„ï¼ŒSwiftä½¿ç”¨èŒƒå›´è¶Šæ¥è¶Šå¹¿ï¼Œä½ ä¸ç”¨ï¼Œå¤§å®¶éƒ½ä¼šç”¨ï¼Œç„¶åå‘¢ã€‚ã€‚ã€‚ä½ åˆè½åäº†ã€‚ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Swiftå®˜æ–¹æ•™ç¨‹å­¦ä¹ ç¬”è®°" scheme="http://ppsheep.com/all-categories/Swift%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Swiftå®˜æ–¹æ•™ç¨‹å­¦ä¹ ç¬”è®°" scheme="http://ppsheep.com/all-tags/Swift%E5%AE%98%E6%96%B9%E6%95%99%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>iOS-æœ‰æ•ˆç¼–å†™é«˜è´¨é‡Objective-Cæ–¹æ³•(äº”)</title>
    <link href="http://ppsheep.com/2016/12/28/iOS-%E6%9C%89%E6%95%88%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FObjective-C%E6%96%B9%E6%B3%95-%E4%BA%94/"/>
    <id>http://ppsheep.com/2016/12/28/iOS-æœ‰æ•ˆç¼–å†™é«˜è´¨é‡Objective-Cæ–¹æ³•-äº”/</id>
    <published>2016-12-28T09:41:04.000Z</published>
    <updated>2017-01-05T08:38:16.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬å‰é¢çš„4ç¯‡æ–‡ç« ï¼Œå·²ç»å°†Effective OC çš„å‰ä¸¤ç« èŠ‚è®²å®Œäº†ï¼Œæ¥ä¸‹æ¥å‡ ç¯‡æ–‡ç« ï¼Œä¸»è¦ä¼šè®²æˆ‘ä»¬åœ¨å¹³æ—¶ç¼–ç ä¸­çš„ä¸€äº›ä¹ æƒ¯ï¼Œä¸€äº›ç»†èŠ‚é—®é¢˜çš„å¤„ç†ï¼ŒåŒ…æ‹¬æ¥å£å’ŒAPIçš„è®¾è®¡ï¼Œåè®®delegateå’Œåˆ†ç±»çš„ä½¿ç”¨ç­‰ã€‚<br><a id="more"></a></p>
<h4 id="ç”¨å‰ç¼€é¿å…å‘½åç©ºé—´çš„å†²çª"><a href="#ç”¨å‰ç¼€é¿å…å‘½åç©ºé—´çš„å†²çª" class="headerlink" title="ç”¨å‰ç¼€é¿å…å‘½åç©ºé—´çš„å†²çª"></a>ç”¨å‰ç¼€é¿å…å‘½åç©ºé—´çš„å†²çª</h4><p>å› ä¸ºOCå’Œå…¶ä»–è¯­è¨€ä¸åŒï¼Œæ²¡æœ‰å‘½åç©ºé—´è¿™ä¸€è¯´æ³•ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åœ¨ç»™ç±»èµ·åæ—¶ï¼Œè¦è®¾æ³•é¿å…æ½œåœ¨çš„å‘½åå†²çªã€‚å‘ç”Ÿå‘½åå†²çªæ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šçœ‹åˆ°è¿™æ ·çš„é”™è¯¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">duplicate symbol _OBJC_METACLASS_$_XXXXX in:</div><div class="line">	build/something.o</div><div class="line">	build/something_else.o</div><div class="line">duplicate symbol _OBJC_CLASS_$_XXXXX in:</div><div class="line">	build/something.o</div><div class="line">	build/something_else.o</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„æƒ…å†µï¼Œæ„æ€ä¸ºæœ‰ä¸¤ä¸ªåœ°æ–¹éƒ½å®ç°äº†åä¸ºXXXXXçš„ç±»ï¼Œè¿™ç§æƒ…å†µï¼Œå¾€å¾€å‡ºç°åœ¨ï¼Œæˆ‘ä»¬å¼•ç”¨å¤šä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œç¬¬ä¸‰æ–¹åº“ä¹‹é—´å‘½åå†²çªã€æˆ–è€…æ˜¯æˆ‘ä»¬è‡ªå·±å·¥ç¨‹ä¸­çš„å‘½åä¸ç¬¬ä¸‰æ–¹åº“å†²çªã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨ç¼–å†™ç±»åæ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šåŠ ä¸Šè·Ÿè‡ªå·±å·¥ç¨‹ç›¸å…³çš„ä¸€äº›å‰ç¼€ï¼Œè€Œä¸”åœ¨xcodeä¸­æ˜¯æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œè®©æˆ‘ä»¬åœ¨æ–°å»ºç±»æ—¶ï¼Œè‡ªåŠ¨ç»™æˆ‘ä»¬åŠ ä¸Šå‰ç¼€ï¼š</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2017-01-05-064844.jpg" alt=""></p>
<p>è¿™æ ·åœ¨æˆ‘ä»¬æ–°å»ºç±»æ—¶ï¼Œé»˜è®¤å°±ä¼šæœ‰ä¸€ä¸ªPPSçš„å‰ç¼€ï¼š</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2017-01-05-065009.jpg" alt=""></p>
<p><strong>æ³¨æ„:</strong></p>
<p>å¦‚æœä½ æ­£åœ¨ç¼–å†™ç¬¬ä¸‰æ–¹åº“ï¼Œä¾›åˆ«äººä½¿ç”¨ï¼Œé‚£ä¹ˆè¯·ä¸€å®šè¦ä¸ºä½ çš„æ‰€æœ‰ç±»ååŠ ä¸Šä½ è‡ªå®šä¹‰çš„å‰ç¼€ï¼Œè¿™æ ·ï¼Œåˆ«äººç”¨ä½ çš„SDKæ‰ä¸ä¼šå‡ºç°ä¸Šé¢çš„å†²çªæƒ…å†µï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚</p>
<h4 id="æä¾›â€œå…¨èƒ½åˆå§‹åŒ–æ–¹æ³•â€"><a href="#æä¾›â€œå…¨èƒ½åˆå§‹åŒ–æ–¹æ³•â€" class="headerlink" title="æä¾›â€œå…¨èƒ½åˆå§‹åŒ–æ–¹æ³•â€"></a>æä¾›â€œå…¨èƒ½åˆå§‹åŒ–æ–¹æ³•â€</h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼š</p>
<p>ä¸¾ä¸ªä¾‹å­å§</p>
<p>åœ¨NSDateç±»ä¸­ï¼Œåˆå§‹åŒ–æ–¹æ³•æœ‰ä¸‹é¢è¿™å‡ ç§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (instancetype)init;</div><div class="line">- (instancetype)initWithTimeIntervalSinceReferenceDate:(NSTimeInterval)ti;</div><div class="line">- (instancetype)initWithTimeIntervalSinceNow:(NSTimeInterval)secs;</div><div class="line">- (instancetype)initWithTimeIntervalSince1970:(NSTimeInterval)secs;</div><div class="line">- (instancetype)initWithTimeInterval:(NSTimeInterval)secsToBeAdded sinceDate:(NSDate *)date;</div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„å‡ ä¸ªåˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œ(instancetype)initWithTimeIntervalSinceReferenceDate:æ˜¯å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼Œæ„æ€å°±æ˜¯</p>
<p>å…¶ä»–çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œéƒ½æ˜¯æœ€ç»ˆéƒ½æ˜¯è°ƒç”¨å®ƒï¼Œç”Ÿæˆäº†NSDateç±»ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦å¼•å…¥å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•è¿™ä¸ªæ¦‚å¿µå‘¢ï¼Ÿåœ¨æˆ‘ä»¬å¹³æ—¶ç¼–ç ä¸­ï¼Œç»å¸¸åœ¨ç”Ÿæˆä¸€ä¸ªç±»æ—¶ï¼Œä¼ å…¥ä¸€äº›å‚æ•°ï¼Œæ‰èƒ½ä½¿è¿™ä¸ªç±»è¿›è¡Œæ­£å¸¸çš„å·¥ä½œï¼Œå¦‚æœæˆ‘ä»¬è®¾è®¡æ—¶ï¼Œè¿™ä¸ªç±»æœ‰å¾ˆå¤šçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œç„¶è€Œè¿›è¡Œä¸€æ®µæ—¶é—´ç¼–ç è¿‡åï¼Œæˆ‘ä»¬å‘è§‰éœ€è¦ä¿®æ”¹è¿™ä¸ªç±»çš„åº•å±‚æ•°æ®ï¼Œå°±æ˜¯ç”Ÿæˆè¿™ä¸ªç±»å¿…é¡»è¦ä½¿ç”¨åˆ°çš„ä¸€äº›æ•°æ®ï¼Œé‚£ä¹ˆï¼Œè¿™ä¹ˆå¤šçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œæˆ‘ä»¬éƒ½å¾—ä¿®æ”¹ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æ”¹åŠ¨è¿™ä¸ªå…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼Œåº•å±‚æ•°æ®å°±å·²ç»æ”¹å˜ã€‚</p>
<h5 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h5><p>è¿™é‡Œè¿˜æ˜¯å¼•å…¥ä¸€ä¸ªä¾‹å­ï¼š</p>
<p>æ¯”å¦‚æˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªè¡¨ç¤ºçŸ©å½¢çš„ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line"></div><div class="line">@interface EOCRectangle : NSObject</div><div class="line"></div><div class="line">@property (nonatomic, assign, readonly) float width;</div><div class="line">@property (nonatomic, assign, readonly) float height;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼Œä¸ºä»€ä¹ˆå°†é•¿å®½è®¾ç½®æˆreadonlyï¼Œæˆ‘ä»¬åœ¨åé¢ä¸€ç¯‡æ–‡ç« ä¸­è®²ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦æä¾›ä¸€ä¸ªåˆå§‹æ–¹æ³•æ¥è®¾ç½®è¿™ä¸¤ä¸ªå‚æ•°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- (instancetype)initWithWidth:(float)width</div><div class="line">                    andHeight:(float)height;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">-(instancetype)initWithWidth:(float)width andHeight:(float)height&#123;</div><div class="line">    if (self = [super init]) &#123;</div><div class="line">        _width = width;</div><div class="line">        _height = height;</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬ä¼šç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæœ‰äººç›´æ¥ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[EOCRectangle alloc] init];</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•æ¥åˆå§‹åŒ–ï¼Œæˆ‘ä»¬ çš„é•¿å®½ä¸æ˜¯æ²¡åŠæ³•è®¾ç½®äº†ï¼Œé‚£è¿™ä¸ªç±»è‚¯å®šä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•å¤„ç†ï¼š</p>
<p>ç¬¬ä¸€ï¼Œåœ¨initæ–¹æ³•ä¸­ï¼Œä¼ å…¥é»˜è®¤çš„å€¼ï¼Œå°±æ˜¯è®²ç±»å¿…é¡»çš„å‚æ•°çš„é»˜è®¤å€¼ä¼ å…¥ï¼Œå½¢æˆä¸€ä¸ªç±»</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(instancetype)init&#123;</div><div class="line">    return [self initWithWidth:5.0f andHeight:10.0f];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¬¬äºŒç§æ–¹æ³•ï¼Œæ˜¯æˆ‘ä»¬ä¸å¸Œæœ›å¼€å‘è€…è°ƒç”¨initæ–¹æ³•ï¼Œè¿™æ ·ç±»å°±ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨initæ–¹æ³•ä¸­ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯ä¸€èˆ¬æˆ‘ä»¬ä¸è¿™æ ·å¤„ç†ï¼Œåœ¨OCä¸­ï¼Œåªæœ‰å‘ç”Ÿä¸¥é‡é”™è¯¯æ—¶ï¼Œæˆ‘ä»¬æ‰æŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(instancetype)init&#123;</div><div class="line">    @throw [NSException exceptionWithName:NSInternalInconsistencyException reason:@&quot;ä¸å…è®¸è°ƒç”¨è¿™ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œè¯·è°ƒç”¨initWithWidth:andHeight:æ–¹æ³•&quot; userInfo:nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="åœ¨ç»§æ‰¿ä¸­å¤„ç†å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•"><a href="#åœ¨ç»§æ‰¿ä¸­å¤„ç†å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•" class="headerlink" title="åœ¨ç»§æ‰¿ä¸­å¤„ç†å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•"></a>åœ¨ç»§æ‰¿ä¸­å¤„ç†å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•</h5><p>å¦‚æœæˆ‘ä»¬ç°åœ¨éœ€è¦åˆ›å»ºä¸€ä¸ªæ­£æ–¹å½¢ç±»EOCSquareç±»ï¼Œè®©ä»–ç»§æ‰¿è‡ªEOCRectangleç±»ï¼Œè¿™å¾ˆæ­£å¸¸ï¼Œæ­£æ–¹å½¢çš„é•¿å®½å¿…é¡»ç›¸ç­‰ã€‚é‚£ä¹ˆæˆ‘ä»¬éœ€è¦æä¾›ä¸€ä¸ªä¼ å…¥è¾¹é•¿çš„åˆå§‹åŒ–æ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (instancetype)initWithDimension:(float)dimension;</div></pre></td></tr></table></figure>
<p>åœ¨å®ç°ä¸­ï¼šè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œä¼ å…¥ç›¸åŒçš„é•¿å®½ï¼Œå³æ˜¯ä¸€ä¸ªæ­£æ–¹å½¢</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (instancetype)initWithDimension:(float)dimension&#123;</div><div class="line">    return [super initWithWidth:dimension andHeight:dimension];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œå³ä½¿æˆ‘ä»¬æä¾›äº†ä¼ å…¥è¾¹é•¿çš„åˆå§‹åŒ–ï¼Œæ–¹æ³•ï¼Œè°ƒç”¨è€…è¿˜æ˜¯å¯èƒ½ä¼šè°ƒç”¨initWithWidth:andHeight:æˆ–è€…initæ–¹æ³•æ¥åˆå§‹åŒ–ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸æ„¿æ„çœ‹åˆ°çš„ï¼Œäºæ˜¯å°±æœ‰ä¸€ä¸ªé‡è¦çš„ç»“è®ºï¼š</p>
<p><strong>å¦‚æœå­ç±»çš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•å’Œçˆ¶ç±»çš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ä¸åŒï¼Œé‚£ä¹ˆæ€»æ˜¯åº”è¯¥è¦†å†™çˆ¶ç±»çš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">-(instancetype)initWithWidth:(float)width andHeight:(float)height&#123;</div><div class="line">    float dimension = MAX(width, height);</div><div class="line">    return [self initWithDimension:dimension];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬å‘ç°ï¼Œä¸ç®¡è°ƒç”¨è€…è°ƒç”¨äº†initWithWidth:andHeight:è¿˜æ˜¯initæ–¹æ³•ï¼Œéƒ½èƒ½å¤Ÿæ­£å¸¸åˆå§‹åŒ–EOCSquareäº†ï¼Œå› ä¸ºå¦‚æœå¼€å‘è€…è°ƒç”¨initWithWidth:andHeight:ï¼Œé‚£ä¹ˆå› ä¸ºæˆ‘ä»¬EOCSquareè¦†å†™äº†ï¼Œæ‰€ä»¥è°ƒç”¨çš„æ˜¯EOCSquareçš„æ–¹æ³•ï¼Œå¦‚æœè°ƒç”¨è€…è°ƒç”¨äº†initæ–¹æ³•ï¼Œé‚£ä¹ˆæœ€ç»ˆè°ƒç”¨åˆ°çš„è¿˜æ˜¯EOCSquareçš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ã€‚</p>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸è¦†å†™çˆ¶ç±»çš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼Œè¿™æ ·æ˜¾å¾—æ¯«ä¸åˆç†ï¼Œæ”¹å˜çˆ¶ç±»çš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•é€»è¾‘ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬è¿™æ ·å¤„ç†ï¼Œåœ¨å­ç±»ä¸­ï¼Œè¦†ç›–çˆ¶ç±»çš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼Œå¹¶ä¸”æŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(instancetype)initWithWidth:(float)width andHeight:(float)height&#123;</div><div class="line">    @throw [NSException exceptionWithName:NSInternalInconsistencyException reason:@&quot;ä¸å…è®¸è°ƒç”¨è¿™ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œè¯·è°ƒç”¨initWithDimension:æ–¹æ³•&quot; userInfo:nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¦†å†™initæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(instancetype)init&#123;</div><div class="line">    return [self initWithDimension:5.0f];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºï¼Œå¼€å‘è€…åœ¨åˆå§‹åŒ–æ­£æ–¹å½¢æ—¶ï¼Œåªèƒ½ä¼ å…¥ç›¸åº”çš„è¾¹é•¿ï¼Œå¦‚æœä¼ å…¥é•¿å®½ï¼Œé‚£ä¹ˆè®¤ä¸ºæ˜¯è°ƒç”¨è€…è‡ªå·±çŠ¯äº†é”™è¯¯ã€‚</p>
<h5 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h5><ul>
<li>åœ¨ç±»ä¸­æä¾›ä¸€ä¸ªå…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼Œå¹¶æŒ‡æ˜å…¶ä»–åˆå§‹åŒ–æ–¹æ³•éƒ½éœ€è¦è°ƒç”¨å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•</li>
<li>è‹¥å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ä¸åŒï¼Œåˆ™å­ç±»åº”è¯¥è¦†å†™è¶…ç±»çš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•</li>
<li>å¦‚æœè¶…ç±»çš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ä¸é€‚ç”¨äºå­ç±»ï¼Œé‚£ä¹ˆåº”è¯¥åœ¨å­ç±»ä¸­è¦†å†™è¶…ç±»çš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•,å¹¶ä¸”åœ¨å…¶ä¸­æŠ›å‡ºå¼‚å¸¸</li>
</ul>
<h4 id="å®ç°description"><a href="#å®ç°description" class="headerlink" title="å®ç°description"></a>å®ç°description</h4><p>åœ¨è°ƒè¯•ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å°†å¯¹è±¡çš„ä¿¡æ¯æ‰“å°å‡ºæ¥ï¼Œæœ€å¸¸ç”¨åˆ°çš„æ–¹å¼å°±æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSLog(@&quot;object = %@&quot;,object);</div></pre></td></tr></table></figure>
<p>åœ¨æ‰“å°æ•°ç»„æˆ–è€…å­—å…¸ä¸Šï¼Œè¿™æ ·æ˜¯å¾ˆå¥½ç”¨çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">NSArray *arr = @[@&quot;111&quot;,@&quot;222&quot;];</div><div class="line">NSLog(@&quot;arr = %@&quot;,arr);</div><div class="line"></div><div class="line">//æ‰“å°å‡º</div><div class="line">arr = (</div><div class="line">    111,</div><div class="line">    222</div><div class="line">)</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¦‚æˆ‘ä»¬åœ¨è‡ªå®šä¹‰çš„ç±»ä¸­ï¼Œå°±ä¸ä¼šåƒåˆšæ‰é‚£æ ·è¾“å‡ºäº†ï¼Œè¾“å‡ºçš„å¾€å¾€æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">EOCRectangle *rectangle = [[EOCRectangle alloc] initWithWidth:10 andHeight:5];</div><div class="line">NSLog(@&quot;rectangle = %@&quot;, rectangle);</div><div class="line"></div><div class="line">//æ‰“å°è¾“å‡º</div><div class="line">rectangle = &lt;EOCRectangle: 0x1740068f0&gt;</div></pre></td></tr></table></figure>
<p>è¾“å‡ºçš„æ˜¯ä¸€å †å†…å­˜åœ°å€</p>
<p>è¿™æ ·ä¸€ç‚¹ä¹Ÿä¸å¥½è°ƒè¯•ï¼Œè¦æƒ³è¾“å‡ºå¯¹è±¡çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç±»ä¸­ï¼Œé‡å†™descriptionæ–¹æ³•ï¼Œåœ¨å†™çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©NSDictionaryçš„è¾“å‡ºæ ¼å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">-(NSString *)description&#123;</div><div class="line">    return [NSString stringWithFormat:@&quot;%@:%p,%@&quot;,</div><div class="line">            [self class],</div><div class="line">            self,</div><div class="line">          @&#123;</div><div class="line">            @&quot;width&quot;:@(_width),</div><div class="line">            @&quot;height&quot;:@(_height),</div><div class="line">            &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬çš„è¾“å‡ºå°±æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">rectangle = EOCRectangle:0x17000b2b0, &#123;</div><div class="line">    height = 5;</div><div class="line">    width = 10;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç®€å•æ˜äº†</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•:debugDescription</p>
<p>è¿™ä¸ªæ–¹æ³•ï¼Œæ˜¯æˆ‘ä»¬åœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œæ‰“æ–­ç‚¹ï¼Œåœ¨xcodeçš„æ§åˆ¶å°è¾“å‡ºçš„æ—¶å€™ï¼Œéœ€è¦æ‰“å°çš„ä¸œè¥¿</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(NSString *)debugDescription&#123;</div><div class="line">    return @&quot;po çš„æ—¶å€™æ‰“å°æˆ‘&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨ç±»EOCRectangleé‡å†™äº†debugDescriptionæ–¹æ³•ï¼Œç„¶åå†æ§åˆ¶å°æ‰“å°</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2017-01-05-082705.jpg" alt=""></p>
<p>è¿™ä¸‹æ˜ç™½äº†å§ï¼Œå¥½ï¼Œä»Šå¤©å…ˆåˆ°è¿™é‡Œã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬å‰é¢çš„4ç¯‡æ–‡ç« ï¼Œå·²ç»å°†Effective OC çš„å‰ä¸¤ç« èŠ‚è®²å®Œäº†ï¼Œæ¥ä¸‹æ¥å‡ ç¯‡æ–‡ç« ï¼Œä¸»è¦ä¼šè®²æˆ‘ä»¬åœ¨å¹³æ—¶ç¼–ç ä¸­çš„ä¸€äº›ä¹ æƒ¯ï¼Œä¸€äº›ç»†èŠ‚é—®é¢˜çš„å¤„ç†ï¼ŒåŒ…æ‹¬æ¥å£å’ŒAPIçš„è®¾è®¡ï¼Œåè®®delegateå’Œåˆ†ç±»çš„ä½¿ç”¨ç­‰ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="iOS ç¼–å†™é«˜è´¨é‡ä»£ç çš„æ–¹æ³•" scheme="http://ppsheep.com/all-categories/iOS-%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81%E7%9A%84%E6%96%B9%E6%B3%95/"/>
    
    
      <category term="iOS ç¼–å†™é«˜è´¨é‡ä»£ç " scheme="http://ppsheep.com/all-tags/iOS-%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>iOS-æœ‰æ•ˆç¼–å†™é«˜è´¨é‡Objective-Cæ–¹æ³•(å››)</title>
    <link href="http://ppsheep.com/2016/12/28/iOS-%E6%9C%89%E6%95%88%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FObjective-C%E6%96%B9%E6%B3%95-%E5%9B%9B/"/>
    <id>http://ppsheep.com/2016/12/28/iOS-æœ‰æ•ˆç¼–å†™é«˜è´¨é‡Objective-Cæ–¹æ³•-å››/</id>
    <published>2016-12-28T07:45:28.000Z</published>
    <updated>2017-01-20T07:51:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>çœ‹åˆ°ä¸Šä¸€æ¬¡å‘è¿™ä¸ªç³»åˆ—çš„æ–‡ç« ï¼Œå·²ç»æ˜¯ä¸€ä¸ªæœˆä¹‹å‰äº†ï¼Œæˆ‘çš„å¦ˆå‘€ï¼Œè¿™ä¸ªæ—¶é—´è¿‡å¾—æŒºå¿«çš„ï¼Œä¸€ä¸‹ä¸€ä¸ªæ¥æœˆè¿‡å»äº†ï¼Œåˆ°ç°åœ¨æ‰æ¥æ›´ï¼ŒçœŸæ˜¯å¯¹ä¸èµ·å¤§å®¶äº†ï¼Œå½“æ—¶æˆ‘è®°å¾—æ˜¯è¯´é‡æ–°æ¥è¯»ä¸€éEffective Objective-C ç¡®å®å‘¢ï¼Œä¹¦æœ‰åœ¨è¯»ï¼Œå°±å®Œæˆäº†ç¬¬äºŒç« èŠ‚ï¼Œç°åœ¨å‘¢ï¼Œæˆ‘ä»¬ç»§ç»­ã€‚ã€‚ã€‚</p>
<a id="more"></a>
<h3 id="ç†è§£objc-msgSendçš„ä½œç”¨"><a href="#ç†è§£objc-msgSendçš„ä½œç”¨" class="headerlink" title="ç†è§£objc_msgSendçš„ä½œç”¨"></a>ç†è§£objc_msgSendçš„ä½œç”¨</h3><p>åœ¨å¯¹è±¡ä¸Šè°ƒç”¨æ–¹æ³•æ˜¯Objective-Cå¸¸ç”¨çš„åŠŸèƒ½ã€‚ç”¨Objcçš„æœ¯è¯­æ¥è®²ï¼Œå«åšâ€œä¼ é€’æ¶ˆæ¯â€ã€‚æ¶ˆæ¯æœ‰â€œåç§°(name)â€æˆ–â€œé€‰æ‹©å­(selector)â€ï¼Œå¯ä»¥æ¥å—å‚æ•°ï¼Œè€Œä¸”å¯ä»¥æœ‰è¿”å›å€¼ã€‚</p>
<p>ç”±äºOCæ˜¯Cçš„è¶…é›†ï¼Œæ‰€ä»¥æœ€å¥½å…ˆç†è§£Cè¯­è¨€çš„å‡½æ•°è°ƒç”¨æ–¹å¼ã€‚Cè¯­è¨€ä½¿ç”¨â€œé™æ€ç»‘å®šâ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç¼–è¯‘æœŸé—´ï¼Œå°±èƒ½å¤ŸçŸ¥é“æ‰€åº”è¯¥è°ƒç”¨çš„å‡½æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line"></div><div class="line">void printHello()&#123;</div><div class="line">    printf(&quot;Hello world\n&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">void printGoodBye()&#123;</div><div class="line">    printf(&quot;Goodbye world\n&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">void doTheThing(int type)&#123;</div><div class="line">    if (type == 0) &#123;</div><div class="line">        printHello();</div><div class="line">    &#125;else&#123;</div><div class="line">        printGoodBye();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœä¸è€ƒè™‘å†…è”å…³ç³»ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åœ¨ç¼–è¯‘ä»£ç çš„æ—¶å€™å°±å·²ç»çŸ¥é“äº†ç¨‹åºä¸­æœ‰printHelloå’ŒprintGoodByeè¿™ä¸¤ä¸ªå‡½æ•°äº†ï¼Œå¦‚æœæˆ‘ä»¬å°†ç¼–å†™çš„æ–¹å¼æ”¹å˜ä¸€ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">void printHello()&#123;</div><div class="line">    printf(&quot;Hello world\n&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">void printGoodBye()&#123;</div><div class="line">    printf(&quot;Goodbye world\n&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">void doTheThing(int type)&#123;</div><div class="line">    void (*fnc)();</div><div class="line">    if (type == 0) &#123;</div><div class="line">        fnc = printHello;</div><div class="line">    &#125;else&#123;</div><div class="line">        fnc = printGoodBye;</div><div class="line">    &#125;</div><div class="line">    fnc();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸‹ï¼Œå°±å¿…é¡»è¦ä½¿ç”¨åŠ¨æ€ç»‘å®šäº†ï¼Œå› ä¸ºéœ€è¦è°ƒç”¨çš„å‡½æ•°ï¼Œåœ¨è¿è¡ŒæœŸé—´æ‰èƒ½å¤ŸçŸ¥é“ã€‚åœ¨objcä¸­ï¼Œè¦å‘å¯¹è±¡ä¼ é€’æ¶ˆæ¯ï¼Œå°±å¿…é¡»è¦ä½¿ç”¨åˆ°åŠ¨æ€ç»‘å®šçš„æœºåˆ¶æ¥å†³å®šéœ€è¦è°ƒç”¨çš„æ–¹æ³•ã€‚</p>
<p>ç»™å¯¹è±¡ä¼ é€’æ¶ˆæ¯ï¼Œå¯ä»¥è¿™æ ·å†™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id returnValue = [someObject messageName:parameter];</div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼ŒsomeObjectå«åšæ¥æ”¶è€…ï¼ŒmessageNameå«åšé€‰æ‹©å­ï¼Œé€‰æ‹©å­å’Œå‚æ•°åˆèµ·æ¥å«åšæ¶ˆæ¯ã€‚ç¼–è¯‘å™¨åœ¨çœ‹åˆ°è¯¥æ¶ˆæ¯åï¼Œå°†å…¶è½¬åŒ–æˆä¸ºä¸€æ¡æ ‡å‡†çš„Cè¯­è¨€å‡½æ•°è°ƒç”¨ï¼Œæ‰€è°ƒç”¨çš„å‡½æ•°å«åšobjc_msgSendï¼Œå…¶åŸå‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">void objc_msgSend(id self,SEL cmd,...)</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ä¸ªå‚æ•°å¯å˜çš„å‡½æ•°ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨çš„æ˜¯æ¥æ”¶è€…ï¼Œç¬¬äºŒä¸ªä»£è¡¨çš„æ˜¯é€‰æ‹©å­ï¼Œç¬¬ä¸‰ä¸ªä»¥åŠåé¢çš„ä»£è¡¨çš„æ˜¯å‚æ•°ï¼Œç¼–è¯‘å™¨ä¼šæŠŠä¸Šé¢çš„ä¼ é€’æ¶ˆæ¯çš„ä¾‹å­æ”¹ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">id returnValue = objc_msgSend(someObject,@selector(messageName:),</div><div class="line">									parameter);</div></pre></td></tr></table></figure>
<p>objc_msgSendå‡½æ•°ä¼šæ ¹æ®æ¥æ”¶è€…å’Œé€‰æ‹©å­æ¥é€‰æ‹©è°ƒç”¨çš„æ–¹æ³•ï¼Œæ”¹å‡½æ•°ä¼šåœ¨æ¥æ”¶è€…çš„ç±»ä¸­å¯»æ‰¾æ–¹æ³•åˆ—è¡¨ï¼Œå¦‚æœèƒ½æ‰¾åˆ°ä¸é€‰æ‹©å­åç§°ç›¸ç¬¦çš„æ–¹æ³•ï¼Œå°±è·³è‡³å…¶ï¼Œå®ç°ä»£ç ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œé‚£å°±ç»§ç»­æ²¿ç€ç»§æ‰¿ä½“ç³»å¾€ä¸Šæ‰¾ï¼Œå¦‚æœæœ€ç»ˆè¿˜æ˜¯æ‰¾ä¸åˆ°æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œâ€æ¶ˆæ¯è½¬å‘â€œæ“ä½œ</p>
<p>è¿™æ ·çœ‹æ¥ï¼Œå¥½åƒæˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªæ–¹æ³•éœ€è¦å¾ˆå¤šæ­¥éª¤ï¼Œæ‰€å¹¸çš„æ˜¯ï¼Œobjc_msgSendä¼šå°†åŒ¹é…ç»“æœç¼“å­˜å­å•Šä¸€å¼ å¿«é€Ÿæ˜ å°„è¡¨ä¸­ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ¯ä¸ªç±»éƒ½ä¼šæœ‰ä¸€ä¸ªç¼“å­˜ï¼Œè¿™æ ·è™½ç„¶ç¬¬ä¸€æ¬¡æ‰§è¡Œèµ·æ¥ä¼šç¨æ…¢ï¼Œä½†æ˜¯åé¢å°±ä¼šå¾ˆè¿…é€Ÿäº†ã€‚</p>
<h3 id="ç†è§£æ¶ˆæ¯è½¬å‘æœºåˆ¶"><a href="#ç†è§£æ¶ˆæ¯è½¬å‘æœºåˆ¶" class="headerlink" title="ç†è§£æ¶ˆæ¯è½¬å‘æœºåˆ¶"></a>ç†è§£æ¶ˆæ¯è½¬å‘æœºåˆ¶</h3><p>ä¸Šé¢æˆ‘ä»¬è®²äº†æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­è®²å¦å¤–ä¸€ä¸ªé‡è¦çš„é—®é¢˜ï¼Œå°±æ˜¯å¯¹è±¡åœ¨æ¥æ”¶åˆ°æ— æ³•è§£è¯»çš„æ¶ˆæ¯æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³è®©ç±»ç†è§£æŸæ¡æ¶ˆæ¯ï¼Œæˆ‘ä»¬å¿…é¡»ä»¥ç¨‹åºä»£ç çš„å½¢å¼å®ç°å‡ºå¯¹åº”çš„æ–¹æ³•æ‰è¡Œï¼Œä½†æ˜¯åœ¨ç¼–è¯‘æœŸé—´ï¼Œå‘ç±»å‘é€äº†æ— æ³•è§£è¯»çš„æ–¹æ³•å¹¶ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºåœ¨è¿è¡ŒæœŸé—´å¯ä»¥ç»§ç»­å‘ç±»ä¸­æ·»åŠ æ–¹æ³•ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶è¿˜æ— æ³•ç¡®å®šç±»ä¸­æ˜¯å¦æœ‰æŸä¸ªæ–¹æ³•çš„å®ç°ã€‚å½“å¯¹è±¡æ¥æ”¶åˆ°æ— æ³•è§£è¯»çš„æ–¹æ³•æ—¶ï¼Œå°±ä¼šå¯åŠ¨æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»æ­¤å‘Šè¯‰å¯¹è±¡åº”è¯¥å¦‚ä½•å¤„ç½®è¿™æ¡æ¶ˆæ¯ã€‚</p>
<p>æˆ‘ä»¬ä¹‹å‰åœ¨ç¼–ç è¿‡ç¨‹ä¸­è‚¯å®šæœ‰é‡åˆ°è¿‡ä¸‹é¢è¿™ç§é”™è¯¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-[__NSCFNumber lowercaseString] : unrecognized selector sen to instance 0x87</div><div class="line">...</div><div class="line">...</div></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™ä¸€æ®µæ¶ˆæ¯æ˜¯ç”±NSObjectçš„ â€œdoesNotRecognizeSelector:â€ æ–¹æ³•è·‘å‡ºçš„ï¼Œæ­¤å¼‚å¸¸è¡¨æ˜ï¼šæ¶ˆæ¯æ¥æ”¶è€…çš„ç±»å‹æ˜¯ __NSCFNumberï¼Œè€Œè¯¥æ¥æ”¶è€…æ— æ³•ç†è§£åä¸ºlowercaseStringçš„é€‰æ‹©å­ã€‚å› ä¸ºNSNumverä¸­æœ¬å°±æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>æ¶ˆæ¯è½¬å‘åˆ†ä¸ºä¸¤å¤§é˜¶æ®µï¼š</p>
<ul>
<li>ç¬¬ä¸€é˜¶æ®µ å…ˆå¾è¯¢æ¥æ”¶è€…ï¼Œæ‰€å±çš„ç±»ï¼Œçœ‹å…¶æ˜¯å¦èƒ½åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼Œç”¨ä»¥å¤„ç†å½“å‰è¿™ä¸ªâ€œæœªçŸ¥çš„é€‰æ‹©å­â€ï¼Œè¿™å«åšâ€œåŠ¨æ€æ–¹æ³•è§£æâ€ã€‚</li>
<li>ç¬¬äºŒé˜¶æ®µ æ¶‰åŠåˆ°äº†å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼Œå¦‚æœè¿è¡ŒæœŸç³»ç»Ÿå·²ç»æŠŠç¬¬ä¸€é˜¶æ®µæ‰§è¡Œå®Œäº†ï¼Œé‚£ä¹ˆæ¥æ”¶è€…è‡ªå·±å°±æ— æ³•å†ä»¥åŠ¨æ€æ–°å¢æ–¹æ³•æ¥å“åº”åŒ…å«é€‰æ‹©å­çš„æ¶ˆæ¯äº†ã€‚æ­¤æ—¶ï¼Œè¿è¡ŒæœŸç³»ç»Ÿä¼šè¯·æ±‚æ¥æ”¶è€…ä»¥å…¶ä»–æ‰‹æ®µæ¥å¤„ç†ä¸æ¶ˆæ¯ç›¸å…³çš„æ–¹æ³•è°ƒç”¨ã€‚è¿™é‡Œåˆå¯åˆ†ä¸ºä¸¤æ­¥ï¼š<br>  é¦–å…ˆï¼Œè¯·æ¥æ”¶è€…çœ‹çœ‹æœ‰æ²¡æœ‰å…¶ä»–çš„å¯¹è±¡èƒ½å¤Ÿå¤„ç†è¿™æ¡æ¶ˆæ¯ï¼Œè‹¥æœ‰ï¼Œè¿è¡ŒæœŸç³»ç»Ÿä¼šæŠŠæ¶ˆæ¯è½¬ç»™é‚£ä¸ªå¯¹è±¡ï¼Œäºæ˜¯æ¶ˆæ¯è½¬å‘è¿‡ç¨‹ç»“æŸï¼Œä¸€åˆ‡å¦‚å¸¸ã€‚è‹¥æ²¡æœ‰ï¼Œå¤‡æ´çš„æ¥æ”¶è€…åˆ™ä¼šå¯åŠ¨å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼Œè¿è¡ŒæœŸç³»ç»Ÿä¼šæŠŠä¸æ¶ˆæ¯ç›¸å…³çš„æ‰€æœ‰ç»†èŠ‚å…¨éƒ¨å°è£…åˆ°NSInvocationå¯¹è±¡ä¸­ï¼Œå†ç»™æ¥æ”¶è€…ä¸€æ¬¡æœºä¼šï¼Œä»¤å…¶å¤„ç†ã€‚</li>
</ul>
<h5 id="åŠ¨æ€æ–¹æ³•è§£æ"><a href="#åŠ¨æ€æ–¹æ³•è§£æ" class="headerlink" title="åŠ¨æ€æ–¹æ³•è§£æ"></a>åŠ¨æ€æ–¹æ³•è§£æ</h5><p>åœ¨å¯¹è±¡æ”¶åˆ°æ— æ³•è§£æçš„æ¶ˆæ¯åï¼Œé¦–å…ˆä¼šè°ƒç”¨å…¶æ‰€å±ç±»çš„ä¸‹åˆ—æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+ (Bool)resolveInstanceMethod:(SEL)selector</div></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•çš„å‚æ•°å°±æ˜¯é‚£ä¸ªæœªçŸ¥çš„é€‰æ‹©å­ï¼Œè¿”å›çš„å€¼è¡¨ç¤ºè¯¥ç±»æ˜¯å¦èƒ½å¤Ÿæ–°å¢ä¸€ä¸ªæ–¹æ³•æ¥å¤„ç†å½“å‰çš„é€‰æ‹©å­</p>
<p>å‡è®¾æœªå®ç°çš„æ–¹æ³•ä¸æ˜¯å®ä¾‹æ–¹æ³•ï¼Œè€Œæ˜¯ç±»æ–¹æ³•ï¼Œé‚£ä¹ˆè¿è¡ŒæœŸç³»ç»Ÿä¼šè°ƒç”¨å¦å¤–ä¸€ä¸ªæ–¹æ³• å«åš resolveClassMethod:</p>
<p>ä½¿ç”¨åŠ¨æ€æ–¹æ³•è§£æçš„å‰ææ˜¯ï¼šç›¸å…³çš„ä»£ç å·²ç»å†™å¥½äº†ï¼Œåªç­‰è¿è¡Œçš„æ—¶å€™åŠ¨æ€æ’å…¥åˆ°ç±»ä¸­å³å¯ã€‚<br>è¿™ç§æ–¹æ¡ˆå¸¸ç”¨æ¥å®ç°@dynamicå±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¹‹å‰æˆ‘ä»¬å·²ç»è®²è¿‡ï¼Œæœ‰ç–‘é—®çš„åŒå­¦ç¿»çœ‹ä¸€ä¸‹æˆ‘å‰é¢çš„åšå®¢ã€‚</p>
<p>æ¯”å¦‚è¯´æˆ‘ä»¬è¦è®¿é—®CoreDataæ¡†æ¶ä¸­çš„NSManagerObjectså¯¹è±¡çš„å±æ€§æ—¶ï¼Œå°±å¯ä»¥è¿™æ ·åšï¼Œå› ä¸ºè¿™äº›å±æ€§æ‰€éœ€è¦çš„å­˜å–æ–¹æ³•åœ¨ç¼–è¯‘å™¨å°±å¯ä»¥ç¡®å®šã€‚</p>
<p>æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸‹ï¼Œä½¿ç”¨resolveInstanceMethodæ–¹æ³•ï¼Œæ¥å®ç°@dynamicå±æ€§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">id autoDictionaryGetter(id self, SEL _cmd);</div><div class="line">void autoDictionarySetter(id self, SEL _cmd, id value);</div><div class="line"></div><div class="line">+ (Bool)resolveInstanceMethod:(SEL)selector&#123;</div><div class="line">	NSString *selectorString = NSStringFromSelector(selector);</div><div class="line">	if(/* selector is from a @dynamic property */)&#123;//è¿™é‡Œçš„æ„æ€æ˜¯åˆ¤æ–­å±æ€§æ˜¯å£°æ˜æˆäº†@dynamic</div><div class="line">	if([selectorString hasPrefix:@&quot;set&quot;])&#123;</div><div class="line">		class_addMethod(self, </div><div class="line">						   selector, </div><div class="line">						   (IMP)autoDictionarySetter),</div><div class="line">						   &quot;v@:@&quot;);</div><div class="line">	&#125;else&#123;</div><div class="line">		class_addMethod(self, </div><div class="line">						   selector, </div><div class="line">						   (IMP) autoDictionaryGetter),</div><div class="line">						   &quot;@:@&quot;);</div><div class="line">	&#125;</div><div class="line">	return YES;</div><div class="line">	&#125;</div><div class="line">	return [super resolveInstanceMethod:selector];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å·²ç»åœ¨ä»£ç ä¸­å¤„ç†äº† setæ–¹æ³•å’Œgetæ–¹æ³•</p>
<h5 id="å¤‡æ´æ¥æ”¶è€…"><a href="#å¤‡æ´æ¥æ”¶è€…" class="headerlink" title="å¤‡æ´æ¥æ”¶è€…"></a>å¤‡æ´æ¥æ”¶è€…</h5><p>å½“å‰çš„æ¥æ”¶è€…é™¤äº†resolveInstanceMethodï¼Œè¿˜æœ‰ç¬¬äºŒæ¬¡æœºä¼šå¤„ç†æœªçŸ¥çš„é€‰æ‹©å­ã€‚åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œè¿è¡Œç³»ç»Ÿä¼šè¯¢é—®ï¼Œèƒ½å¦å°†è¿™ä¸€æ¶ˆæ¯è½¬å‘ç»™å…¶ä»–çš„æ¥æ”¶è€…æ¥å¤„ç†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (id)forwardingTargetSelector:(SEL)selector;</div></pre></td></tr></table></figure>
<p>å¦‚æœæ‰¾åˆ°å½“å‰çš„å¤‡æ´è€…ï¼Œåˆ™å°†å…¶ç›´æ¥è¿”å›ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™è¿”å›Nil</p>
<p>ä¸ºä»€ä¹ˆä¼šå­˜åœ¨å¤‡æ´è€…å‘¢ï¼Ÿåœ¨ä¸€ä¸ªå¯¹è±¡å†…éƒ¨ï¼Œå¯èƒ½è¿˜æœ‰å…¶ä»–ä¸€ç³»åˆ—å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ç»ç”±æ­¤æ–¹æ³•å°†èƒ½å¤Ÿå¤„ç†æŸé€‰æ‹©å­çš„ç›¸å…³å†…éƒ¨å¯¹è±¡è¿”å›ï¼Œè¿™æ ·çš„è¯ï¼Œåœ¨å¤–ç•Œçœ‹æ¥ï¼Œå°±åƒæ˜¯è‡ªå·±å¤„ç†çš„ä¸€æ ·ã€‚</p>
<h5 id="å®Œæ•´çš„æ¶ˆæ¯è½¬å‘"><a href="#å®Œæ•´çš„æ¶ˆæ¯è½¬å‘" class="headerlink" title="å®Œæ•´çš„æ¶ˆæ¯è½¬å‘"></a>å®Œæ•´çš„æ¶ˆæ¯è½¬å‘</h5><p>å¦‚æœå¤‡æ´è€…è¿˜æ‰¾ä¸åˆ°ï¼Œé‚£ä¹ˆå°±éœ€è¦æ‰§è¡Œå®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ã€‚é¦–å…ˆåˆ›å»ºNSInvocationå¯¹è±¡ï¼Œå°†å°šæœªå¤„ç†çš„æ¶ˆæ¯ç›¸å…³çš„æ‰€æœ‰ç»†èŠ‚ï¼Œå…¨éƒ¨å°è£…ã€‚åœ¨è§¦å‘NSInvocationå¯¹è±¡æ—¶ï¼Œâ€æ¶ˆæ¯æ´¾å‘ç³»ç»Ÿâ€å°†äº²è‡ªå°†æ¶ˆæ¯æŒ‡æ´¾ç»™ç›®æ ‡å¯¹è±¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (void)forwardInvocation:(NSInvocation *)invocation;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€è¦æ”¹å˜è°ƒç”¨ç›®æ ‡ï¼Œæ˜¯æ¶ˆæ¯åœ¨æ–°ç›®æ ‡ä¸Šè°ƒç”¨ï¼Œä½†æ˜¯è¿™æ ·å°±å’Œå¤‡æ´è€…å·®ä¸å¤šäº†ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¿™æ ·å¤„ç†ï¼š<br>åœ¨è§¦å‘æ¶ˆæ¯ä¹‹å‰ï¼Œå…ˆä»¥æŸç§æ–¹å¼æ”¹å˜æ¶ˆæ¯çš„å†…å®¹ï¼Œæ¯”å¦‚æ”¹å‚æ•°æˆ–è€…æ”¹é€‰æ‹©å­</p>
<p>å®ç°æ­¤æ–¹æ³•æ—¶ï¼Œè‹¥å‘ç°æŸè°ƒç”¨æ“ä½œä¸åº”è¯¥ç”±æœ¬ç±»å®ç°ï¼Œé‚£ä¹ˆå°±ç”±å…¶è¶…ç±»åŒåæ–¹æ³•å®ç°ï¼Œç›´è‡³NSObject</p>
<h5 id="æ¶ˆæ¯è½¬å‘å…¨è¿‡ç¨‹"><a href="#æ¶ˆæ¯è½¬å‘å…¨è¿‡ç¨‹" class="headerlink" title="æ¶ˆæ¯è½¬å‘å…¨è¿‡ç¨‹"></a>æ¶ˆæ¯è½¬å‘å…¨è¿‡ç¨‹</h5><p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-12-29-032256.jpg" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;çœ‹åˆ°ä¸Šä¸€æ¬¡å‘è¿™ä¸ªç³»åˆ—çš„æ–‡ç« ï¼Œå·²ç»æ˜¯ä¸€ä¸ªæœˆä¹‹å‰äº†ï¼Œæˆ‘çš„å¦ˆå‘€ï¼Œè¿™ä¸ªæ—¶é—´è¿‡å¾—æŒºå¿«çš„ï¼Œä¸€ä¸‹ä¸€ä¸ªæ¥æœˆè¿‡å»äº†ï¼Œåˆ°ç°åœ¨æ‰æ¥æ›´ï¼ŒçœŸæ˜¯å¯¹ä¸èµ·å¤§å®¶äº†ï¼Œå½“æ—¶æˆ‘è®°å¾—æ˜¯è¯´é‡æ–°æ¥è¯»ä¸€éEffective Objective-C ç¡®å®å‘¢ï¼Œä¹¦æœ‰åœ¨è¯»ï¼Œå°±å®Œæˆäº†ç¬¬äºŒç« èŠ‚ï¼Œç°åœ¨å‘¢ï¼Œæˆ‘ä»¬ç»§ç»­ã€‚ã€‚ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="iOS ç¼–å†™é«˜è´¨é‡ä»£ç çš„æ–¹æ³•" scheme="http://ppsheep.com/all-categories/iOS-%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81%E7%9A%84%E6%96%B9%E6%B3%95/"/>
    
    
      <category term="iOS ç¼–å†™é«˜è´¨é‡ä»£ç " scheme="http://ppsheep.com/all-tags/iOS-%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>Swiftè°ˆä¸€è°ˆ</title>
    <link href="http://ppsheep.com/2016/12/28/swift%E8%B0%88%E4%B8%80%E8%B0%88/"/>
    <id>http://ppsheep.com/2016/12/28/swiftè°ˆä¸€è°ˆ/</id>
    <published>2016-12-28T03:48:07.000Z</published>
    <updated>2016-12-28T07:31:54.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Swiftä½ çˆ±ä¸çˆ±"><a href="#Swiftä½ çˆ±ä¸çˆ±" class="headerlink" title="Swiftä½ çˆ±ä¸çˆ±"></a>Swiftä½ çˆ±ä¸çˆ±</h3><p>Swift 3å‘å¸ƒå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå¦‚æœå·²ç»æœ‰åŒå­¦åœ¨ä½¿ç”¨Swiftï¼Œé‚£ä¹ˆä»2.3è¿ç§»åˆ°3.0ï¼Œæˆ‘æƒ³è‚¯å®šæ˜¯æå…¶ç—›è‹¦çš„ï¼Œåœ¨ABIç¨³å®šæ€§æ–¹é¢ï¼Œ2.xå’Œ3.0ç›¸æ¯”ï¼Œæœ‰è¾ƒå¤§çš„æ”¹åŠ¨ã€‚ä¸è¿‡ï¼Œè‹¹æœå®˜æ–¹å®£å¸ƒï¼Œåœ¨å°†æ¥çš„Swift 3åˆ°Swift 4ï¼Œä¼šä¿æŒABIç¨³å®šï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯æ„å‘³ç€ï¼ŒSwiftçš„ABIç›¸å¯¹ç¨³å®šäº†ï¼Œé‚£æ­¤æ—¶æ˜¯å¦å°±æ˜¯æ­£å¼æŠ•å…¥Swiftçš„æ—¶é—´äº†ï¼Œå…¶å®å‘¢ï¼Œè¿™ä¸ªè¿˜æ˜¯çœ‹è‡ªå·±ã€‚ åœ¨æˆ‘è‡ªå·±çš„å¹³æ—¶å·¥ä½œä¸­ï¼Œä¸»è¦è¿˜æ˜¯ä½¿ç”¨çš„OCï¼Œå› ä¸ºæ¯•ç«Ÿéœ€è¦åˆä½œï¼Œä¸èƒ½è¯´ä½ ç”¨ï¼Œå¤§å®¶éƒ½è¦è·Ÿç€ä½ ç”¨ï¼Œä¸è¿‡è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¤§çš„è¶‹åŠ¿ï¼Œä½¿ç”¨Swiftçš„å¼€å‘è€…è¶Šæ¥è¶Šå¤šï¼Œç§°èµSwiftçš„å¼€å‘è€…ä¹Ÿæ˜¯è¶Šæ¥è¶Šå¤šï¼Œé‚£æˆ‘è‡ªå·±å†…å¿ƒä¹Ÿæ˜¯æƒ³å¼€æçš„ï¼Œè™½è¯´ä¸ä¼šåŠæ—¶ä½¿ç”¨åˆ°å·¥ä½œä¸­ï¼Œè‡ªå·±ç©ç©ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å…¶å®ç°åœ¨å¼€å§‹å·²ç»ç›¸å¯¹è¾ƒæ™šäº†ã€‚</p>
<a id="more"></a>
<h3 id="æˆ‘å¯¹Swiftçš„çˆ±"><a href="#æˆ‘å¯¹Swiftçš„çˆ±" class="headerlink" title="æˆ‘å¯¹Swiftçš„çˆ±"></a>æˆ‘å¯¹Swiftçš„çˆ±</h3><p>Swift æˆ‘ä¸€ç›´åœ¨å°è¯•ï¼Œä½†æ˜¯å´å› ä¸ºå·¥ä½œä¸Šï¼Œæ²¡æœ‰å°†å®ƒè€ƒè™‘åœ¨å†…ï¼Œæ‰€ä»¥ä¸€ç›´éƒ½åœæ­¢åœ¨å°è¯•ã€‚ç»“åˆåˆ°æˆ‘ç°åœ¨çš„å·¥ä½œç¯å¢ƒï¼Œæˆ‘è§‰å¾—åœ¨å°†æ¥å¾ˆé•¿çš„ä¸€æ®µæ—¶é—´å†…ï¼Œå®ƒè¿˜æ˜¯ä¸ä¼šåŠ å…¥åˆ°æˆ‘çš„å·¥ä½œä¸­æ¥ï¼Œä½†æ˜¯æˆ‘åœ¨æƒ³ï¼Œæˆ‘éœ€è¦æ”¹å˜æˆ‘å¯¹ä»–çš„æ€åº¦çš„ã€‚å¦‚æœä¸ä½œå‡ºæ”¹å˜çš„è¯ï¼Œæˆ‘å°†ä¸€ç›´åœç•™åœ¨  åªçŸ¥é“ä»–çš„æ‹¼å†™è€Œå·²ï¼Œå…¶ä»–çš„ä¸€æ— æ‰€çŸ¥ã€‚</p>
<p>åœ¨Swift 3å‘å¸ƒä¹‹æ—¶ï¼Œè‹¹æœå®£å¸ƒï¼Œå°†åœ¨2017å¹´æ˜¥èŠ‚ä¹‹æ—¶å‘å¸ƒ3.x , 4.0ä¹Ÿå°†åœ¨2017å¹´ç§‹å­£å‘å¸ƒï¼Œæˆ‘ä»¬çœ‹åˆ°äº†è‹¹æœå¯¹äºSwiftæ‰€ä½œå‡ºçš„åŠªåŠ›ï¼Œé‚£æˆ‘ä»¬ä½œä¸ºå¼€å‘è€…ï¼Œæ˜¯å¦ä¹Ÿåº”è¯¥ä½œå‡ºä¸€äº›åŠªåŠ›ã€‚</p>
<h3 id="æˆ‘å¯¹Swiftçš„å­¦ä¹ è§„åˆ’"><a href="#æˆ‘å¯¹Swiftçš„å­¦ä¹ è§„åˆ’" class="headerlink" title="æˆ‘å¯¹Swiftçš„å­¦ä¹ è§„åˆ’"></a>æˆ‘å¯¹Swiftçš„å­¦ä¹ è§„åˆ’</h3><p>ä¹‹å‰æˆ‘å¤§è‡´æµè§ˆè¿‡swift2.0 å®˜æ–¹æ•™ç¨‹çš„  ä¸­è¯‘ç‰ˆ<br><a href="http://www.swiftguide.cn" target="_blank" rel="external">http://www.swiftguide.cn</a></p>
<p>è‡³äºæˆ‘è¿˜è®°å¾—å¤šå°‘ï¼Œå˜¿å˜¿å˜¿ã€‚ã€‚ã€‚ä½ çŒœã€‚ã€‚ã€‚</p>
<p>æ‰€ä»¥æˆ‘æ‰“ç®—å‘¢ï¼Œè¿˜æ˜¯å†è¿‡ä¸€éå®˜æ–¹çš„æ•™ç¨‹ï¼Œè¿™æ¬¡å‘¢ï¼Œæˆ‘ä¸æ‰“ç®—çœ‹ä¸­è¯‘ç‰ˆäº†ï¼Œæˆ‘è¿˜æ˜¯å»iBookä¸Šçœ‹åŸç‰ˆå§ã€‚é¡ºä¾¿æä¸€å¥ï¼Œç°åœ¨å›½å†…iBookå·²ç»ä¸å¯ç”¨äº†ï¼Œä½ éœ€è¦ä¸Šç¾å›½çš„å•†åº—ï¼Œæ‰èƒ½æ‰¾åˆ°å®˜æ–¹çš„æ•™ç¨‹ï¼Œè¿™ä¸ªå˜›ï¼Œå¯ä»¥ç”³è¯·ä¸€ä¸ªç¾å›½çš„è´¦å·å’¯ï¼Œè‡³äºæ–¹æ³•ï¼ŒGoogleä¸€ä¸‹ï¼Œæˆ–è€… å›½å†…æŸå¤§å‹æœç´¢å¼•æ“ç½‘ç«™ï¼Œæœç´¢ä¸€ä¸‹ã€‚ä¸è¿‡å¥½åƒä¹‹å‰æˆ‘æœ‰åŒäº‹å»æœè¿‡ï¼Œå¥½åƒç°åœ¨ä¸è¡Œäº†ï¼Œä¸€å®šè¦æ±‚ç»‘å®šæ”¯ä»˜æ–¹å¼ï¼Œæœ€åä»–ä¸€æ€’ä¹‹ä¸‹ï¼ŒæŸå®äº†ä¸€ä¸ªï¼Œå“ˆå“ˆå“ˆå“ˆï¼Œç¬‘æ­»æˆ‘äº†ã€‚ã€‚ã€‚</p>
<p>å¦‚æœä½ ä»¬åˆéœ€è¦ï¼Œå¯ä»¥è”ç³»æˆ‘ï¼Œæˆ‘ç›´æ¥å‘ä½ ä»¬ä¸€ä»½ï¼Œæˆ‘å°±ä¸ç›´æ¥æ”¾ä¸Šæ¥äº†ã€‚ã€‚ã€‚æˆ‘çš„è”ç³»æ–¹å¼ï¼Œæˆ‘æ”¾äº†å¾®ä¿¡ä¸Šæ¥çš„ï¼Œæˆ‘è®°å¾—ï¼Œåœ¨å…³äºæˆ‘é‡Œé¢ã€‚</p>
<h3 id="Swift-ä½ æ¥å—ï¼Ÿ"><a href="#Swift-ä½ æ¥å—ï¼Ÿ" class="headerlink" title="Swift ä½ æ¥å—ï¼Ÿ"></a>Swift ä½ æ¥å—ï¼Ÿ</h3><p>åé¢æˆ‘ä¹Ÿå°†ä¼šæŠŠæˆ‘çš„å­¦ä¹ è¿‡ç¨‹æ”¾åˆ°åšå®¢ä¸Šæ¥ï¼Œä½ è¦ä¸€èµ·æ¥å—? å¯¹äº†ï¼Œæˆ‘è¿˜åœ¨Objcä¸­å›½ä¸Šé¢ä¹°äº†å‡ æœ¬Swiftçš„ä¹¦ï¼Œé‚£äº›ä¹¦å¯çœŸæ˜¯ä¸é”™ï¼Œä¸ºä»€ä¹ˆè¯´ä¸é”™ï¼Œå› ä¸ºæˆ‘ç°åœ¨çœ‹ä¸æ‡‚ï¼Œçœ‹ä¸æ‡‚ï¼Œæˆ‘å°±è§‰å¾—ä»–ä»¬å†™çš„å¾ˆå¥½ï¼Œè¦æ˜¯æˆ‘ç°åœ¨å°±çœ‹å¾—æ‡‚ï¼Œé‚£è¿˜å­¦ä¸ªå±ï¼ï¼ï¼å»ºè®®å‘¢ï¼Œè¿™äº›ä¹¦ï¼Œå¯ä»¥åœ¨çœ‹å®Œå®˜æ–¹æ•™ç¨‹åï¼Œå†æ¥é˜…è¯»ï¼Œå–µç¥ç»´æŠ¤çš„ç½‘ç«™ï¼Œè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œä¸Šé¢è¿˜æœ‰å¾ˆå¤šä¹‹å‰ä»objc.ioç¿»è¯‘è¿‡æ¥çš„åšå®¢ï¼Œè´¨é‡éƒ½å¾ˆé«˜çš„ï¼Œæœ‰æ—¶é—´ä¹Ÿå¯ä»¥é˜…è¯»ã€‚</p>
<h3 id="å…³äºä¹‹å‰åšå®¢åœæ›´çš„è¯´æ˜"><a href="#å…³äºä¹‹å‰åšå®¢åœæ›´çš„è¯´æ˜" class="headerlink" title="å…³äºä¹‹å‰åšå®¢åœæ›´çš„è¯´æ˜"></a>å…³äºä¹‹å‰åšå®¢åœæ›´çš„è¯´æ˜</h3><p>æœ€è¿‘å‡ å‘¨ï¼Œåšå®¢æ›´æ–°éƒ½å¾ˆæ…¢ï¼Œä¸»è¦åŸå› å‘¢ï¼Œæ˜¯è¦èµ¶ä¸¤ä¸ªSDKï¼Œè¯´æ¥è¯é•¿ï¼ŒæŸä¸€å¤©ï¼Œæˆ‘çš„é¢†å¯¼ä¸æƒ³è·Ÿæˆ‘è®²è¯ï¼Œå¹¶å‘æˆ‘æ‰”å‡ºäº†2ä¸ªSDKï¼Œç„¶åæˆ‘å°±å‚»é€¼äº†ï¼Œå¹¶ä¸”è¿˜ç”©å‡ºäº†å¤šå°‘å¤©æ‹¿å‡ºæ¥ï¼Œè¿™æ ·çš„è¯ï¼ŒæœŸé—´å‘¢ï¼Œè¿˜åˆ°å¹¿å·å‡ºå·®äº†ä¸€å‘¨ï¼Œæ˜¯çš„ï¼Œä½ æ²¡å¬é”™ï¼Œæˆ‘ï¼Œä¸€ä¸ªç¨‹åºå‘˜ï¼Œä¹Ÿå‡ºå·®äº†ï¼ï¼ï¼æˆ‘æ˜¯æ˜¨å¤©åˆšå›åˆ°æ­å·ï¼Œåœ¨å‡ºå·®æœŸé—´å‘¢ï¼Œä¹Ÿæ˜¯èƒ½æŒ¤å‡ºä¸€ç‚¹æ—¶é—´æ¥æ›´æ–°ä¸€ä¸‹ï¼Œä½†æ˜¯å‘¢ï¼Œä½ çŸ¥é“å—ï¼Ÿå¹¿å·çš„èŒ¶ç‚¹å¿ƒï¼ŒçœŸæ˜¯ä¸é”™ï¼Œå‰©ä½™æ—¶é—´ï¼Œå…¨éƒ¨æ‹¿å‡ºæ¥ï¼Œå»åƒäº†ï¼ŒçœŸæ˜¯ä¸å¥½æ„æ€ï¼Œå¯æƒœæ²¡æœ‰æ€ä¹ˆæ‹ç…§ç‰‡ï¼Œä¸‹æ¬¡å»äº†ï¼Œä¸€å®šæ‹å‡ å¼ ç…§ç‰‡å‘ä¸Šæ¥ã€‚</p>
<p>åºŸè¯è®²å®Œäº†ï¼Œä¸€ä¸å°å¿ƒï¼Œæ‰“äº†è¿™ä¹ˆå¤šå­—ï¼ï¼ï¼ï¼å°´å°¬</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Swiftä½ çˆ±ä¸çˆ±&quot;&gt;&lt;a href=&quot;#Swiftä½ çˆ±ä¸çˆ±&quot; class=&quot;headerlink&quot; title=&quot;Swiftä½ çˆ±ä¸çˆ±&quot;&gt;&lt;/a&gt;Swiftä½ çˆ±ä¸çˆ±&lt;/h3&gt;&lt;p&gt;Swift 3å‘å¸ƒå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå¦‚æœå·²ç»æœ‰åŒå­¦åœ¨ä½¿ç”¨Swiftï¼Œé‚£ä¹ˆä»2.3è¿ç§»åˆ°3.0ï¼Œæˆ‘æƒ³è‚¯å®šæ˜¯æå…¶ç—›è‹¦çš„ï¼Œåœ¨ABIç¨³å®šæ€§æ–¹é¢ï¼Œ2.xå’Œ3.0ç›¸æ¯”ï¼Œæœ‰è¾ƒå¤§çš„æ”¹åŠ¨ã€‚ä¸è¿‡ï¼Œè‹¹æœå®˜æ–¹å®£å¸ƒï¼Œåœ¨å°†æ¥çš„Swift 3åˆ°Swift 4ï¼Œä¼šä¿æŒABIç¨³å®šï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯æ„å‘³ç€ï¼ŒSwiftçš„ABIç›¸å¯¹ç¨³å®šäº†ï¼Œé‚£æ­¤æ—¶æ˜¯å¦å°±æ˜¯æ­£å¼æŠ•å…¥Swiftçš„æ—¶é—´äº†ï¼Œå…¶å®å‘¢ï¼Œè¿™ä¸ªè¿˜æ˜¯çœ‹è‡ªå·±ã€‚ åœ¨æˆ‘è‡ªå·±çš„å¹³æ—¶å·¥ä½œä¸­ï¼Œä¸»è¦è¿˜æ˜¯ä½¿ç”¨çš„OCï¼Œå› ä¸ºæ¯•ç«Ÿéœ€è¦åˆä½œï¼Œä¸èƒ½è¯´ä½ ç”¨ï¼Œå¤§å®¶éƒ½è¦è·Ÿç€ä½ ç”¨ï¼Œä¸è¿‡è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¤§çš„è¶‹åŠ¿ï¼Œä½¿ç”¨Swiftçš„å¼€å‘è€…è¶Šæ¥è¶Šå¤šï¼Œç§°èµSwiftçš„å¼€å‘è€…ä¹Ÿæ˜¯è¶Šæ¥è¶Šå¤šï¼Œé‚£æˆ‘è‡ªå·±å†…å¿ƒä¹Ÿæ˜¯æƒ³å¼€æçš„ï¼Œè™½è¯´ä¸ä¼šåŠæ—¶ä½¿ç”¨åˆ°å·¥ä½œä¸­ï¼Œè‡ªå·±ç©ç©ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å…¶å®ç°åœ¨å¼€å§‹å·²ç»ç›¸å¯¹è¾ƒæ™šäº†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Swift" scheme="http://ppsheep.com/all-categories/Swift/"/>
    
    
      <category term="Swift" scheme="http://ppsheep.com/all-tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>iOSè·å–å½“å‰è®¾å¤‡çš„ä¿¡æ¯-ç½‘ç»œç›¸å…³</title>
    <link href="http://ppsheep.com/2016/12/16/iOS%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E8%AE%BE%E5%A4%87%E7%9A%84%E4%BF%A1%E6%81%AF-%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3/"/>
    <id>http://ppsheep.com/2016/12/16/iOSè·å–å½“å‰è®¾å¤‡çš„ä¿¡æ¯-ç½‘ç»œç›¸å…³/</id>
    <published>2016-12-16T06:57:18.000Z</published>
    <updated>2017-01-20T09:32:47.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨æç½‘ç»œç›¸å…³çš„SDKï¼Œå°†è‡ªå·±åœ¨é¡¹ç›®ä¸­èƒ½å¤Ÿå¼€æ”¾å‡ºæ¥çš„ï¼Œè®°å½•ä¸‹æ¥ï¼Œå…¶ä¸­å¾ˆå¤šç”¨åˆ°äº†Cï¼Œç›¸å½“äºä¸€ä¸ªå·¥å…·ã€‚åæœŸè¿˜ä¼šé€‰æ‹©å¼€æ”¾ä¸€äº›pingç½‘ç»œçš„å·¥å…·ï¼Œæ‰¾é“¾è·¯èŠ‚ç‚¹çš„å·¥å…·ï¼Œæœ€è¿‘å°±åœ¨æè¿™ä¸ªã€‚</p>
<a id="more"></a>
<h3 id="è·å–å½“å‰è®¾å¤‡çš„IPåœ°å€"><a href="#è·å–å½“å‰è®¾å¤‡çš„IPåœ°å€" class="headerlink" title="è·å–å½“å‰è®¾å¤‡çš„IPåœ°å€"></a>è·å–å½“å‰è®¾å¤‡çš„IPåœ°å€</h3><p>å¯¹äºå…¬ç½‘çš„IPå½“ç„¶ï¼Œåœ¨æˆ‘ä»¬æœ¬åœ°è®¾å¤‡ä¸Šæ˜¯ä¸èƒ½å¤Ÿè·å–åˆ°çš„ï¼Œè‡³å°‘æˆ‘æ²¡æœ‰æ‰¾åˆ°æ–¹æ³•è·å–åˆ°å‡ºå£IPåœ°å€ï¼Œä½†æ˜¯å±€åŸŸç½‘çš„IPè¿˜æ˜¯èƒ½å¤Ÿè·å–åˆ°çš„ï¼Œè¿™é‡Œipv4å’Œipv6 éƒ½èƒ½å¤Ÿè·å–å‡ºæ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">+ (NSString *)deviceIPAdress</div><div class="line">&#123;</div><div class="line">    NSString *address = @&quot;&quot;;</div><div class="line">    struct ifaddrs *interfaces = NULL;</div><div class="line">    struct ifaddrs *temp_addr = NULL;</div><div class="line">    int success = 0;</div><div class="line">    </div><div class="line">    success = getifaddrs(&amp;interfaces);</div><div class="line">    </div><div class="line">    if (success == 0) &#123;  // 0 è¡¨ç¤ºè·å–æˆåŠŸ</div><div class="line">        </div><div class="line">        temp_addr = interfaces;</div><div class="line">        while (temp_addr != NULL) &#123;</div><div class="line">            </div><div class="line">            if ([[NSString stringWithUTF8String:temp_addr-&gt;ifa_name] isEqualToString:@&quot;en0&quot;] || [[NSString stringWithUTF8String:temp_addr-&gt;ifa_name] isEqualToString:@&quot;pdp_ip0&quot;])</div><div class="line">                &#123;</div><div class="line">                //å¦‚æœæ˜¯IPV4åœ°å€ï¼Œç›´æ¥è½¬åŒ–</div><div class="line">                if (temp_addr-&gt;ifa_addr-&gt;sa_family == AF_INET)&#123;</div><div class="line">                    </div><div class="line">                    // Get NSString from C String</div><div class="line">                    address = [self formatIPV4Address:((struct sockaddr_in *)temp_addr-&gt;ifa_addr)-&gt;sin_addr];</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                //å¦‚æœæ˜¯IPV6åœ°å€</div><div class="line">                else if (temp_addr-&gt;ifa_addr-&gt;sa_family == AF_INET6)&#123;</div><div class="line">                    address = [self formatIPV6Address:((struct sockaddr_in6 *)temp_addr-&gt;ifa_addr)-&gt;sin6_addr];</div><div class="line">                    if (address &amp;&amp; ![address isEqualToString:@&quot;&quot;] &amp;&amp; ![address.uppercaseString hasPrefix:@&quot;FE80&quot;]) break;</div><div class="line">                &#125;</div><div class="line">                &#125;</div><div class="line">            </div><div class="line">            temp_addr = temp_addr-&gt;ifa_next;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    freeifaddrs(interfaces);</div><div class="line">    </div><div class="line">    //ä»¥FE80å¼€å§‹çš„åœ°å€æ˜¯å•æ’­åœ°å€</div><div class="line">    if (address &amp;&amp; ![address isEqualToString:@&quot;&quot;] &amp;&amp; ![address.uppercaseString hasPrefix:@&quot;FE80&quot;]) &#123;</div><div class="line">        return address;</div><div class="line">    &#125; else &#123;</div><div class="line">        return @&quot;127.0.0.1&quot;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è·å–å½“å‰è®¾å¤‡ç½‘å…³åœ°å€"><a href="#è·å–å½“å‰è®¾å¤‡ç½‘å…³åœ°å€" class="headerlink" title="è·å–å½“å‰è®¾å¤‡ç½‘å…³åœ°å€"></a>è·å–å½“å‰è®¾å¤‡ç½‘å…³åœ°å€</h3><p>ç½‘å…³åœ°å€ï¼Œé€šä¿—ç‚¹  å°±æ˜¯è·¯ç”±å™¨çš„åœ°å€ï¼Œä¹Ÿæ˜¯ç›¸å¯¹äºå±€åŸŸç½‘ è¿™é‡Œéœ€è¦åŒºåˆ†ä¸€ä¸‹ipv4å’Œipv6ï¼Œä¸¤ç§è·å–ç½‘å…³åœ°å€çš„æ–¹æ³•æ˜¯ä¸ä¸€æ ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line">//ipv4ç½‘å…³åœ°å€</div><div class="line">+ (NSString *)getGatewayIPV4Address</div><div class="line">&#123;</div><div class="line">    </div><div class="line">    NSString *address = nil;</div><div class="line">    </div><div class="line">    /* net.route.0.inet.flags.gateway */</div><div class="line">    int mib[] = &#123;CTL_NET, PF_ROUTE, 0, AF_INET, NET_RT_FLAGS, RTF_GATEWAY&#125;;</div><div class="line">    </div><div class="line">    size_t l;</div><div class="line">    char *buf, *p;</div><div class="line">    struct rt_msghdr *rt;</div><div class="line">    struct sockaddr *sa;</div><div class="line">    struct sockaddr *sa_tab[RTAX_MAX];</div><div class="line">    int i;</div><div class="line">    </div><div class="line">    if (sysctl(mib, sizeof(mib) / sizeof(int), 0, &amp;l, 0, 0) &lt; 0) &#123;</div><div class="line">        address = @&quot;192.168.0.1&quot;;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    if (l &gt; 0) &#123;</div><div class="line">        buf = malloc(l);</div><div class="line">        if (sysctl(mib, sizeof(mib) / sizeof(int), buf, &amp;l, 0, 0) &lt; 0) &#123;</div><div class="line">            address = @&quot;192.168.0.1&quot;;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        for (p = buf; p &lt; buf + l; p += rt-&gt;rtm_msglen) &#123;</div><div class="line">            rt = (struct rt_msghdr *)p;</div><div class="line">            sa = (struct sockaddr *)(rt + 1);</div><div class="line">            for (i = 0; i &lt; RTAX_MAX; i++) &#123;</div><div class="line">                if (rt-&gt;rtm_addrs &amp; (1 &lt;&lt; i)) &#123;</div><div class="line">                    sa_tab[i] = sa;</div><div class="line">                    sa = (struct sockaddr *)((char *)sa + ROUNDUP(sa-&gt;sa_len));</div><div class="line">                &#125; else &#123;</div><div class="line">                    sa_tab[i] = NULL;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            if (((rt-&gt;rtm_addrs &amp; (RTA_DST | RTA_GATEWAY)) == (RTA_DST | RTA_GATEWAY)) &amp;&amp;</div><div class="line">                sa_tab[RTAX_DST]-&gt;sa_family == AF_INET &amp;&amp;</div><div class="line">                sa_tab[RTAX_GATEWAY]-&gt;sa_family == AF_INET) &#123;</div><div class="line">                unsigned char octet[4] = &#123;0, 0, 0, 0&#125;;</div><div class="line">                int i;</div><div class="line">                for (i = 0; i &lt; 4; i++) &#123;</div><div class="line">                    octet[i] = (((struct sockaddr_in *)(sa_tab[RTAX_GATEWAY]))-&gt;sin_addr.s_addr &gt;&gt;</div><div class="line">                                (i * 8)) &amp;</div><div class="line">                    0xFF;</div><div class="line">                &#125;</div><div class="line">                if (((struct sockaddr_in *)sa_tab[RTAX_DST])-&gt;sin_addr.s_addr == 0) &#123;</div><div class="line">                    in_addr_t addr =</div><div class="line">                    ((struct sockaddr_in *)(sa_tab[RTAX_GATEWAY]))-&gt;sin_addr.s_addr;</div><div class="line">                    address = [self formatIPV4Address:*((struct in_addr *)&amp;addr)];</div><div class="line">                    //                    NSLog(@&quot;IPV4address%@&quot;, address);</div><div class="line">                    break;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        free(buf);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return address;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">//ipv6ç½‘å…³åœ°å€</div><div class="line">+ (NSString *)getGatewayIPV6Address</div><div class="line">&#123;</div><div class="line">    </div><div class="line">    NSString *address = nil;</div><div class="line">    </div><div class="line">    /* net.route.0.inet.flags.gateway */</div><div class="line">    int mib[] = &#123;CTL_NET, PF_ROUTE, 0, AF_INET6, NET_RT_FLAGS, RTF_GATEWAY&#125;;</div><div class="line">    </div><div class="line">    size_t l;</div><div class="line">    char *buf, *p;</div><div class="line">    struct rt_msghdr *rt;</div><div class="line">    struct sockaddr_in6 *sa;</div><div class="line">    struct sockaddr_in6 *sa_tab[RTAX_MAX];</div><div class="line">    int i;</div><div class="line">    </div><div class="line">    if (sysctl(mib, sizeof(mib) / sizeof(int), 0, &amp;l, 0, 0) &lt; 0) &#123;</div><div class="line">        address = @&quot;192.168.0.1&quot;;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    if (l &gt; 0) &#123;</div><div class="line">        buf = malloc(l);</div><div class="line">        if (sysctl(mib, sizeof(mib) / sizeof(int), buf, &amp;l, 0, 0) &lt; 0) &#123;</div><div class="line">            address = @&quot;192.168.0.1&quot;;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        for (p = buf; p &lt; buf + l; p += rt-&gt;rtm_msglen) &#123;</div><div class="line">            rt = (struct rt_msghdr *)p;</div><div class="line">            sa = (struct sockaddr_in6 *)(rt + 1);</div><div class="line">            for (i = 0; i &lt; RTAX_MAX; i++) &#123;</div><div class="line">                if (rt-&gt;rtm_addrs &amp; (1 &lt;&lt; i)) &#123;</div><div class="line">                    sa_tab[i] = sa;</div><div class="line">                    sa = (struct sockaddr_in6 *)((char *)sa + sa-&gt;sin6_len);</div><div class="line">                &#125; else &#123;</div><div class="line">                    sa_tab[i] = NULL;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            if( ((rt-&gt;rtm_addrs &amp; (RTA_DST|RTA_GATEWAY)) == (RTA_DST|RTA_GATEWAY))</div><div class="line">               &amp;&amp; sa_tab[RTAX_DST]-&gt;sin6_family == AF_INET6</div><div class="line">               &amp;&amp; sa_tab[RTAX_GATEWAY]-&gt;sin6_family == AF_INET6)</div><div class="line">                &#123;</div><div class="line">                address = [self formatIPV6Address:((struct sockaddr_in6 *)(sa_tab[RTAX_GATEWAY]))-&gt;sin6_addr];</div><div class="line">                //                NSLog(@&quot;IPV6address%@&quot;, address);</div><div class="line">                break;</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">        free(buf);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return address;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨è·å–çš„æ—¶å€™åˆ¤æ–­ä¸€ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">/*!</div><div class="line"> * è·å–å½“å‰è®¾å¤‡ç½‘å…³åœ°å€</div><div class="line"> */</div><div class="line">+ (NSString *)getGatewayIPAddress&#123;</div><div class="line">    NSString *address = nil;</div><div class="line">    </div><div class="line">    NSString *gatewayIPV4 = [self getGatewayIPV4Address];</div><div class="line">    NSString *gatewayIPV6 = [self getGatewayIPV6Address];</div><div class="line">    </div><div class="line">    if (gatewayIPV6 != nil) &#123;</div><div class="line">        address = gatewayIPV6;</div><div class="line">    &#125; else &#123;</div><div class="line">        address = gatewayIPV4;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return address;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="é€šè¿‡åŸŸåæ‹¿åˆ°åŸŸåå¯¹åº”çš„IPåœ°å€-CDN"><a href="#é€šè¿‡åŸŸåæ‹¿åˆ°åŸŸåå¯¹åº”çš„IPåœ°å€-CDN" class="headerlink" title="é€šè¿‡åŸŸåæ‹¿åˆ°åŸŸåå¯¹åº”çš„IPåœ°å€(CDN)"></a>é€šè¿‡åŸŸåæ‹¿åˆ°åŸŸåå¯¹åº”çš„IPåœ°å€(CDN)</h3><p>é€šè¿‡åŸŸåæ‹¿åˆ°çš„IPåœ°å€ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä¹°äº†CDNçš„è¯ï¼Œæ‹¿åˆ°çš„Ipéƒ½ä¼šæ˜¯å¤šä¸ªIP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">/*!</div><div class="line"> * é€šè¿‡hostnameè·å–ipåˆ—è¡¨ DNSè§£æåœ°å€</div><div class="line"> */</div><div class="line">+ (NSArray *)getDNSsWithDormain:(NSString *)hostName&#123;</div><div class="line">    NSMutableArray *result = [[NSMutableArray alloc] init];</div><div class="line">    NSArray *IPDNSs = [self getDNSWithHostName:hostName];</div><div class="line">    if (IPDNSs &amp;&amp; IPDNSs.count &gt; 0) &#123;</div><div class="line">        [result addObjectsFromArray:IPDNSs];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return [NSArray arrayWithArray:result];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">+ (NSArray *)getDNSWithHostName:(NSString *)hostName</div><div class="line">&#123;</div><div class="line">    const char *hostN = [hostName UTF8String];</div><div class="line">    Boolean result = false;</div><div class="line">    Boolean bResolved = false;</div><div class="line">    CFHostRef hostRef;</div><div class="line">    CFArrayRef addresses = NULL;</div><div class="line">    </div><div class="line">    CFStringRef hostNameRef = CFStringCreateWithCString(kCFAllocatorDefault, hostN, kCFStringEncodingASCII);</div><div class="line">    </div><div class="line">    hostRef = CFHostCreateWithName(kCFAllocatorDefault, hostNameRef);</div><div class="line">    if (hostRef) &#123;</div><div class="line">        result = CFHostStartInfoResolution(hostRef, kCFHostAddresses, NULL);</div><div class="line">        if (result == true) &#123;</div><div class="line">            addresses = CFHostGetAddressing(hostRef, &amp;result);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    bResolved = result;</div><div class="line">    NSMutableArray *ipAddresses = [NSMutableArray array];</div><div class="line">    if(bResolved)</div><div class="line">        &#123;</div><div class="line">        struct sockaddr_in* remoteAddr;</div><div class="line">        </div><div class="line">        for(int i = 0; i &lt; CFArrayGetCount(addresses); i++)</div><div class="line">            &#123;</div><div class="line">            CFDataRef saData = (CFDataRef)CFArrayGetValueAtIndex(addresses, i);</div><div class="line">            remoteAddr = (struct sockaddr_in*)CFDataGetBytePtr(saData);</div><div class="line">            </div><div class="line">            if(remoteAddr != NULL)</div><div class="line">                &#123;</div><div class="line">                //è·å–IPåœ°å€</div><div class="line">                const char *strIP41 = inet_ntoa(remoteAddr-&gt;sin_addr);</div><div class="line">                NSString *strDNS =[NSString stringWithCString:strIP41 encoding:NSASCIIStringEncoding];</div><div class="line">                [ipAddresses addObject:strDNS];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    CFRelease(hostNameRef);</div><div class="line">    if (hostRef) &#123;</div><div class="line">        CFRelease(hostRef);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return [NSArray arrayWithArray:ipAddresses];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è·å–å½“å‰çš„ç½‘ç»œçŠ¶å†µ"><a href="#è·å–å½“å‰çš„ç½‘ç»œçŠ¶å†µ" class="headerlink" title="è·å–å½“å‰çš„ç½‘ç»œçŠ¶å†µ"></a>è·å–å½“å‰çš„ç½‘ç»œçŠ¶å†µ</h3><p>å¦‚æœæ˜¯WIFIç¯å¢ƒï¼Œç›´æ¥è¿”å›wifi  å¦‚æœæ˜¯èœ‚çªç½‘ç»œç¯å¢ƒï¼Œé‚£ä¹ˆè¿˜å¯ä»¥åŒºåˆ†åˆ°åº•æ˜¯é‚£ä¸ªè¿è¥å•†ï¼Œè¿˜å¯ä»¥åŒºåˆ†æ˜¯ä½¿ç”¨çš„ä»€ä¹ˆç½‘ç»œï¼Œ4G 3G 2Gç­‰  è¿è¥å•†æš‚æ—¶åŒºåˆ†äº†å›½å†…çš„ä¸‰å¤§è¿è¥å•†ï¼Œå¦‚æœè¿˜éœ€è¦åŒºåˆ†å›½å¤–çš„ï¼Œå¯ä»¥ç»´åŸºç™¾ç§‘ä¸ŠæŸ¥å¯¹åº”çš„code</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">+(NSString *)currentNetInfo&#123;</div><div class="line">    </div><div class="line">    NSString *returnName = nil;</div><div class="line">    </div><div class="line">    PPSNetWorkType type = [PPSGetAppEnvironment getNetworkTypeFromStatusBar];</div><div class="line">    if (type == PPSNetWorkTypeWiFi) &#123;</div><div class="line">        returnName = @&quot;WIFI&quot;;</div><div class="line">        return returnName;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    NSString *carrierName = nil;</div><div class="line">    CTTelephonyNetworkInfo *netInfo = [[CTTelephonyNetworkInfo alloc] init];</div><div class="line">    CTCarrier *carrier = [netInfo subscriberCellularProvider];</div><div class="line">    if (carrier != NULL) &#123;</div><div class="line">        NSArray *chinaMobileMics = @[@&quot;0&quot;,@&quot;2&quot;,@&quot;7&quot;];//ç§»åŠ¨code</div><div class="line">        NSArray *chinaTelecomMics = @[@&quot;3&quot;,@&quot;5&quot;,@&quot;11&quot;];//ç”µä¿¡code</div><div class="line">        NSArray *chinaUnicomMics = @[@&quot;1&quot;,@&quot;6&quot;];//è”é€šcode</div><div class="line">        NSString *mobileNetworkCode = [carrier mobileNetworkCode];</div><div class="line">        if ([chinaMobileMics containsObject:mobileNetworkCode]) &#123;</div><div class="line">            carrierName = @&quot;chinamobile&quot;;</div><div class="line">        &#125;else if ([chinaTelecomMics containsObject:mobileNetworkCode])&#123;</div><div class="line">            carrierName = @&quot;chinatelecom&quot;;</div><div class="line">        &#125;else if ([chinaUnicomMics containsObject:mobileNetworkCode])&#123;</div><div class="line">            carrierName = @&quot;chinaunicom&quot;;</div><div class="line">        &#125;else&#123;</div><div class="line">            carrierName = @&quot;unknown&quot;;</div><div class="line">        &#125;</div><div class="line">    &#125; else &#123;</div><div class="line">        carrierName = @&quot;unknown&quot;;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    switch (type) &#123;</div><div class="line">        case PPSNetWorkType2G:</div><div class="line">            returnName = [NSString stringWithFormat:@&quot;%@_%@&quot;,carrierName,@&quot;2G&quot;];</div><div class="line">            break;</div><div class="line">        case PPSNetWorkType3G:</div><div class="line">            returnName = [NSString stringWithFormat:@&quot;%@_%@&quot;,carrierName,@&quot;3G&quot;];</div><div class="line">            break;</div><div class="line">        case PPSNetWorkType4G:</div><div class="line">            returnName = [NSString stringWithFormat:@&quot;%@_%@&quot;,carrierName,@&quot;4G&quot;];</div><div class="line">            break;</div><div class="line">        case PPSNetWorkType5G:</div><div class="line">            returnName = [NSString stringWithFormat:@&quot;%@_%@&quot;,carrierName,@&quot;5G&quot;];</div><div class="line">            break;</div><div class="line">        case PPSNetWorkTypeNone:</div><div class="line">            returnName = [NSString stringWithFormat:@&quot;%@_%@&quot;,carrierName,@&quot;unknown&quot;];</div><div class="line">            break;</div><div class="line">        default:</div><div class="line">            returnName = [NSString stringWithFormat:@&quot;%@_%@&quot;,carrierName,@&quot;unknown&quot;];</div><div class="line">            break;</div><div class="line">    &#125;</div><div class="line">    return returnName;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è·å–å½“å‰çš„è®¾å¤‡ä¿¡æ¯"><a href="#è·å–å½“å‰çš„è®¾å¤‡ä¿¡æ¯" class="headerlink" title="è·å–å½“å‰çš„è®¾å¤‡ä¿¡æ¯"></a>è·å–å½“å‰çš„è®¾å¤‡ä¿¡æ¯</h3><p>è·å–å½“å‰è®¾å¤‡çš„ä¿¡æ¯ï¼Œæ˜¯iPhone 4 5 6 7è¿˜æ˜¯ ç­‰ç­‰  è¿˜æœ‰ç³»ç»Ÿçš„ç‰ˆæœ¬å·  æ‰‹æœºã€å¹³æ¿<br>ä¹‹ç±»çš„éƒ½èƒ½å¤Ÿå»åŒºåˆ†å‡ºæ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">/**</div><div class="line"> è·å–è®¾å¤‡çš„ç±»å‹</div><div class="line"> </div><div class="line"> @return è®¾å¤‡ç±»å‹</div><div class="line"> */</div><div class="line">+ (NSString *)deviceInfo &#123;</div><div class="line">    struct utsname systemInfo;</div><div class="line">    </div><div class="line">    uname(&amp;systemInfo);</div><div class="line">    </div><div class="line">    NSString* code = [NSString stringWithCString:systemInfo.machine</div><div class="line">                                        encoding:NSUTF8StringEncoding];</div><div class="line">    </div><div class="line">    static NSDictionary* deviceNamesByCode = nil;</div><div class="line">    </div><div class="line">    if (!deviceNamesByCode) &#123;</div><div class="line">        </div><div class="line">        deviceNamesByCode = @&#123;@&quot;i386&quot;      :@&quot;Simulator&quot;,</div><div class="line">                              @&quot;x86_64&quot;    :@&quot;Simulator&quot;,</div><div class="line">                              @&quot;iPod1,1&quot;   :@&quot;iPod Touch&quot;,        // (Original)</div><div class="line">                              @&quot;iPod2,1&quot;   :@&quot;iPod Touch&quot;,        // (Second Generation)</div><div class="line">                              @&quot;iPod3,1&quot;   :@&quot;iPod Touch&quot;,        // (Third Generation)</div><div class="line">                              @&quot;iPod4,1&quot;   :@&quot;iPod Touch&quot;,        // (Fourth Generation)</div><div class="line">                              @&quot;iPod7,1&quot;   :@&quot;iPod Touch&quot;,        // (6th Generation)</div><div class="line">                              @&quot;iPhone1,1&quot; :@&quot;iPhone&quot;,            // (Original)</div><div class="line">                              @&quot;iPhone1,2&quot; :@&quot;iPhone&quot;,            // (3G)</div><div class="line">                              @&quot;iPhone2,1&quot; :@&quot;iPhone&quot;,            // (3GS)</div><div class="line">                              @&quot;iPad1,1&quot;   :@&quot;iPad&quot;,              // (Original)</div><div class="line">                              @&quot;iPad2,1&quot;   :@&quot;iPad 2&quot;,            //</div><div class="line">                              @&quot;iPad3,1&quot;   :@&quot;iPad&quot;,              // (3rd Generation)</div><div class="line">                              @&quot;iPhone3,1&quot; :@&quot;iPhone 4&quot;,          // (GSM)</div><div class="line">                              @&quot;iPhone3,3&quot; :@&quot;iPhone 4&quot;,          // (CDMA/Verizon/Sprint)</div><div class="line">                              @&quot;iPhone4,1&quot; :@&quot;iPhone 4S&quot;,         //</div><div class="line">                              @&quot;iPhone5,1&quot; :@&quot;iPhone 5&quot;,          // (model A1428, AT&amp;T/Canada)</div><div class="line">                              @&quot;iPhone5,2&quot; :@&quot;iPhone 5&quot;,          // (model A1429, everything else)</div><div class="line">                              @&quot;iPad3,4&quot;   :@&quot;iPad&quot;,              // (4th Generation)</div><div class="line">                              @&quot;iPad2,5&quot;   :@&quot;iPad Mini&quot;,         // (Original)</div><div class="line">                              @&quot;iPhone5,3&quot; :@&quot;iPhone 5c&quot;,         // (model A1456, A1532 | GSM)</div><div class="line">                              @&quot;iPhone5,4&quot; :@&quot;iPhone 5c&quot;,         // (model A1507, A1516, A1526 (China), A1529 | Global)</div><div class="line">                              @&quot;iPhone6,1&quot; :@&quot;iPhone 5s&quot;,         // (model A1433, A1533 | GSM)</div><div class="line">                              @&quot;iPhone6,2&quot; :@&quot;iPhone 5s&quot;,         // (model A1457, A1518, A1528 (China), A1530 | Global)</div><div class="line">                              @&quot;iPhone7,1&quot; :@&quot;iPhone 6 Plus&quot;,     //</div><div class="line">                              @&quot;iPhone7,2&quot; :@&quot;iPhone 6&quot;,          //</div><div class="line">                              @&quot;iPhone8,1&quot; :@&quot;iPhone 6S&quot;,         //</div><div class="line">                              @&quot;iPhone8,2&quot; :@&quot;iPhone 6S Plus&quot;,    //</div><div class="line">                              @&quot;iPhone8,4&quot; :@&quot;iPhone SE&quot;,         //</div><div class="line">                              @&quot;iPhone9,1&quot; :@&quot;iPhone 7&quot;,          //</div><div class="line">                              @&quot;iPhone9,3&quot; :@&quot;iPhone 7&quot;,          //</div><div class="line">                              @&quot;iPhone9,2&quot; :@&quot;iPhone 7 Plus&quot;,     //</div><div class="line">                              @&quot;iPhone9,4&quot; :@&quot;iPhone 7 Plus&quot;,     //</div><div class="line">                              </div><div class="line">                              @&quot;iPad4,1&quot;   :@&quot;iPad Air&quot;,          // 5th Generation iPad (iPad Air) - Wifi</div><div class="line">                              @&quot;iPad4,2&quot;   :@&quot;iPad Air&quot;,          // 5th Generation iPad (iPad Air) - Cellular</div><div class="line">                              @&quot;iPad4,4&quot;   :@&quot;iPad Mini&quot;,         // (2nd Generation iPad Mini - Wifi)</div><div class="line">                              @&quot;iPad4,5&quot;   :@&quot;iPad Mini&quot;,         // (2nd Generation iPad Mini - Cellular)</div><div class="line">                              @&quot;iPad4,7&quot;   :@&quot;iPad Mini&quot;,         // (3rd Generation iPad Mini - Wifi (model A1599))</div><div class="line">                              @&quot;iPad6,7&quot;   :@&quot;iPad Pro (12.9\&quot;)&quot;, // iPad Pro 12.9 inches - (model A1584)</div><div class="line">                              @&quot;iPad6,8&quot;   :@&quot;iPad Pro (12.9\&quot;)&quot;, // iPad Pro 12.9 inches - (model A1652)</div><div class="line">                              @&quot;iPad6,3&quot;   :@&quot;iPad Pro (9.7\&quot;)&quot;,  // iPad Pro 9.7 inches - (model A1673)</div><div class="line">                              @&quot;iPad6,4&quot;   :@&quot;iPad Pro (9.7\&quot;)&quot;   // iPad Pro 9.7 inches - (models A1674 and A1675)</div><div class="line">                              &#125;;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    NSString* deviceName = [deviceNamesByCode objectForKey:code];</div><div class="line">    </div><div class="line">    if (!deviceName) &#123;</div><div class="line">        // Not found on database. At least guess main device type from string contents:</div><div class="line">        </div><div class="line">        if ([code rangeOfString:@&quot;iPod&quot;].location != NSNotFound) &#123;</div><div class="line">            deviceName = @&quot;iPod Touch&quot;;</div><div class="line">        &#125;</div><div class="line">        else if([code rangeOfString:@&quot;iPad&quot;].location != NSNotFound) &#123;</div><div class="line">            deviceName = @&quot;iPad&quot;;</div><div class="line">        &#125;</div><div class="line">        else if([code rangeOfString:@&quot;iPhone&quot;].location != NSNotFound)&#123;</div><div class="line">            deviceName = @&quot;iPhone&quot;;</div><div class="line">        &#125;</div><div class="line">        else &#123;</div><div class="line">            deviceName = @&quot;Unknown&quot;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    UIDevice *device = [UIDevice currentDevice];</div><div class="line">    NSString *systemVersion = [device systemVersion];</div><div class="line">    </div><div class="line">    return [NSString stringWithFormat:@&quot;iOS#%@#%@&quot;,deviceName,systemVersion];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è·å–çš„ä¿¡æ¯ï¼š</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-12-16-081639.jpg" alt=""></p>
<p>åŸé¡¹ç›®åœ°å€ï¼š</p>
<p><a href="https://github.com/yangqian111/blog/tree/master/iOSè·å–å½“å‰è®¾å¤‡çš„ä¿¡æ¯-ç½‘ç»œç›¸å…³" target="_blank" rel="external">https://github.com/yangqian111/blog/tree/master/iOSè·å–å½“å‰è®¾å¤‡çš„ä¿¡æ¯-ç½‘ç»œç›¸å…³</a></p>
<p><strong>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œæˆ‘ä¼šå®šæœŸåˆ†äº«ä¸€äº›æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•å’Œä¸€äº›iOSå®ç”¨çš„æŠ€å·§ï¼Œç°é˜¶æ®µä¸»è¦æ˜¯æ•´ç†å‡ºä¸€äº›åŸºç¡€çš„çŸ¥è¯†è®°å½•ä¸‹æ¥</strong></p>
<div align="middle"><br>    <image src="http://ac-mhke0kuv.clouddn.com/830a4ead8294ceff5160.jpg"></image><br></div>

<p>æ–‡ç« ä¹Ÿä¼šåŒæ­¥æ›´æ–°åˆ°æˆ‘çš„åšå®¢ï¼š<br><a href="http://ppsheep.com">http://ppsheep.com</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨æç½‘ç»œç›¸å…³çš„SDKï¼Œå°†è‡ªå·±åœ¨é¡¹ç›®ä¸­èƒ½å¤Ÿå¼€æ”¾å‡ºæ¥çš„ï¼Œè®°å½•ä¸‹æ¥ï¼Œå…¶ä¸­å¾ˆå¤šç”¨åˆ°äº†Cï¼Œç›¸å½“äºä¸€ä¸ªå·¥å…·ã€‚åæœŸè¿˜ä¼šé€‰æ‹©å¼€æ”¾ä¸€äº›pingç½‘ç»œçš„å·¥å…·ï¼Œæ‰¾é“¾è·¯èŠ‚ç‚¹çš„å·¥å…·ï¼Œæœ€è¿‘å°±åœ¨æè¿™ä¸ªã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="iOSåŸºç¡€ ç½‘ç»œç»„ä»¶" scheme="http://ppsheep.com/all-categories/iOS%E5%9F%BA%E7%A1%80-%E7%BD%91%E7%BB%9C%E7%BB%84%E4%BB%B6/"/>
    
    
      <category term="åŸŸåè§£æ ç½‘ç»œåˆ¤æ–­" scheme="http://ppsheep.com/all-tags/%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90-%E7%BD%91%E7%BB%9C%E5%88%A4%E6%96%AD/"/>
    
  </entry>
  
  <entry>
    <title>iOSä¸­çš„å¹¶å‘ç¼–ç¨‹</title>
    <link href="http://ppsheep.com/2016/12/14/iOS%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E4%B8%80/"/>
    <id>http://ppsheep.com/2016/12/14/iOSä¸­çš„å¹¶å‘ç¼–ç¨‹-ä¸€/</id>
    <published>2016-12-14T07:09:03.000Z</published>
    <updated>2016-12-29T09:33:45.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œæˆ‘ä¼šå®šæœŸåˆ†äº«ä¸€äº›æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•å’Œä¸€äº›iOSå®ç”¨çš„æŠ€å·§ï¼Œç°é˜¶æ®µä¸»è¦æ˜¯æ•´ç†å‡ºä¸€äº›åŸºç¡€çš„çŸ¥è¯†è®°å½•ä¸‹æ¥</strong></p>
<div align="middle"><br>    <image src="http://ac-mhke0kuv.clouddn.com/830a4ead8294ceff5160.jpg"></image><br></div>

<p>æ–‡ç« ä¹Ÿä¼šåŒæ­¥æ›´æ–°åˆ°æˆ‘çš„åšå®¢ï¼š<br><a href="http://ppsheep.com">http://ppsheep.com</a></p>
<h3 id="OS-Xå’ŒiOSä¸­çš„å¹¶å‘ç¼–ç¨‹"><a href="#OS-Xå’ŒiOSä¸­çš„å¹¶å‘ç¼–ç¨‹" class="headerlink" title="OS Xå’ŒiOSä¸­çš„å¹¶å‘ç¼–ç¨‹"></a>OS Xå’ŒiOSä¸­çš„å¹¶å‘ç¼–ç¨‹</h3><p>åœ¨OS Xå’ŒiOSä¸­ï¼ŒAppleéƒ½ä¸ºæˆ‘ä»¬æä¾›äº†ç›¸åŒçš„å¹¶å‘ç¼–ç¨‹APIã€‚pthread ã€ NSThread ã€GCD ã€NSOperationQueueã€‚</p>
<h4 id="pthread"><a href="#pthread" class="headerlink" title="pthread"></a>pthread</h4><p>pthreadæ˜¯æ¯”è¾ƒåº•å±‚çš„å¹¶å‘APIï¼Œè¿™ä¸ªç”¨èµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ï¼Œè€Œä¸”åœ¨æˆ‘ä»¬æ—¥å¸¸çš„ç¼–ç è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿåº”è¯¥æŠ›å¼ƒæ‰è¿™ç§æ•ˆç‡æä½çš„å¹¶å‘ç¼–ç¨‹æ–¹å¼ã€‚è¿™é‡Œå°±ä¸å¯¹è¿™ç§å¹¶å‘åšè¿‡å¤šè¯¦ç»†çš„ä»‹ç»ã€‚</p>
<h4 id="NSThread"><a href="#NSThread" class="headerlink" title="NSThread"></a>NSThread</h4><p>NSThreadè¿™ä¸ªæˆ‘ä»¬å¬èµ·æ¥å°±å¾ˆç†Ÿæ‚‰äº†ï¼Œå®é™…ä¸Šï¼Œè¿™æ˜¯Appleå¯¹pthreadçš„ä¸€ä¸ªå°è£…ï¼Œå°è£…æˆäº†Objectivc-Cçš„æ¥å£APIï¼Œåœ¨cocoaç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè½»æ˜“ä½¿ç”¨NSThreadæ¥è¿›è¡Œå¹¶å‘ç¼–ç¨‹ã€‚</p>
<p>ä¾‹å¦‚æˆ‘ä»¬ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œéœ€è¦è®¡ç®—100ä¸‡ä¸ªæ•°å­—ä¸­çš„æœ€å¤§æ•°å’Œæœ€å°æ•°ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªNSThreadçš„å­ç±»ï¼Œä¸“é—¨æ¥è¿›è¡Œè¿™ä¸ªè¿ç®—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">@interface FindMinMaxThread : NSThread</div><div class="line">@property (nonatomic) NSUInteger min;</div><div class="line">@property (nonatomic) NSUInteger max;</div><div class="line">- (instancetype)initWithNumbers:(NSArray *)numbers;</div><div class="line">@end</div><div class="line"></div><div class="line">@implementation FindMinMaxThread &#123;</div><div class="line">    NSArray *_numbers;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (instancetype)initWithNumbers:(NSArray *)numbers</div><div class="line">&#123;</div><div class="line">    self = [super init];</div><div class="line">    if (self) &#123;</div><div class="line">        _numbers = numbers;</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)main</div><div class="line">&#123;</div><div class="line">    NSUInteger min;</div><div class="line">    NSUInteger max;</div><div class="line">    // è¿›è¡Œç›¸å…³æ•°æ®çš„å¤„ç†</div><div class="line">    self.min = min;</div><div class="line">    self.max = max;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>è¦æƒ³å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œç„¶åè°ƒç”¨å®ƒçš„ start æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">NSMutableSet *threads = [NSMutableSet set];</div><div class="line">NSUInteger numberCount = self.numbers.count;</div><div class="line">NSUInteger threadCount = 4;</div><div class="line">for (NSUInteger i = 0; i &lt; threadCount; i++) &#123;</div><div class="line">    NSUInteger offset = (count / threadCount) * i;</div><div class="line">    NSUInteger count = MIN(numberCount - offset, numberCount / threadCount);</div><div class="line">    NSRange range = NSMakeRange(offset, count);</div><div class="line">    NSArray *subset = [self.numbers subarrayWithRange:range];</div><div class="line">    FindMinMaxThread *thread = [[FindMinMaxThread alloc] initWithNumbers:subset];</div><div class="line">    [threads addObject:thread];</div><div class="line">    [thread start];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è™½ç„¶ï¼Œçœ‹èµ·æ¥è¿™ä¸ªå¤šçº¿ç¨‹å®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å‘¢ï¼Œåœ¨å®é™…çš„ç¼–ç ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šé‡‡ç”¨è¿™ç§æ–¹å¼æ¥è¿›è¡Œï¼Œå¹¶å‘ç¼–ç¨‹ã€‚</p>
<p>è¿™ç§æ–¹å¼ï¼Œå…¶å®æ˜¯æˆ‘ä»¬è‡ªå·±æ¥æ“ä½œçº¿ç¨‹ï¼Œè¿›è¡Œå¹¶å‘ç¼–ç¨‹ï¼Œè¿™æ ·å°±æ¶‰åŠåˆ°ä¸€ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨åˆ°AFNetworking è¿›è¡Œç½‘ç»œè®¿é—®çš„æ—¶å€™ï¼Œæœ¬èº«AFä¸­å·²ç»å¯¹ç½‘ç»œè®¿é—®è¿›è¡Œäº†å¼‚æ­¥çš„çº¿ç¨‹å¤„ç†ï¼Œå¦‚æœæˆ‘ä»¬åœ¨è°ƒç”¨AFçš„æ—¶å€™ï¼Œå†æ¬¡è¿›è¡Œå¹¶å‘çº¿ç¨‹å¤„ç†ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨NSThreadè¿™ç§æ–¹å¼è¿›è¡Œå¹¶å‘ç¼–ç¨‹çš„æ—¶å€™ï¼Œå°±å›é€ æˆçº¿ç¨‹çš„æŒ‡æ•°çº§å¢é•¿ï¼Œå› ä¸ºæˆ‘ä»¬æ“ä½œçš„éƒ½æ˜¯å•ä¸ªçš„çº¿ç¨‹ã€‚å¼€äº†è¿™ä¹ˆå¤šçš„çº¿ç¨‹ï¼Œå½“ç„¶ä¼šé€ æˆå†…å­˜å’ŒCPUçš„é«˜åº¦æµªè´¹ï¼Œè€Œä¸”ä¼šé€ æˆå…¶ä»–çš„ä¸€äº›ä¸å¿…è¦çš„bugã€‚</p>
<p>é‚£æ­£ç¡®çš„å¹¶å‘ç¼–ç¨‹ çš„å§¿åŠ¿ æ˜¯ä»€ä¹ˆï¼Œå½“ç„¶æ˜¯  GCD å’Œ operation queue â€”â€”åŸºäºé˜Ÿåˆ—çš„å¹¶å‘ç¼–ç¨‹ã€‚è¿™ä¸¤ç§æ–¹å¼ï¼Œé€šè¿‡ç®¡ç†ä¸€ä¸ªè¢«å¤§å®¶ååŒä½¿ç”¨çš„çº¿ç¨‹æ± ï¼Œæ¥è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚</p>
<h4 id="Grand-Central-Dispatch-GCD"><a href="#Grand-Central-Dispatch-GCD" class="headerlink" title="Grand Central Dispatch(GCD)"></a>Grand Central Dispatch(GCD)</h4><p>é€šè¿‡ GCDï¼Œå¼€å‘è€…ä¸ç”¨å†ç›´æ¥è·Ÿçº¿ç¨‹æ‰“äº¤é“äº†ï¼Œåªéœ€è¦å‘é˜Ÿåˆ—ä¸­æ·»åŠ ä»£ç å—å³å¯ï¼ŒGCD åœ¨åç«¯ç®¡ç†ç€ä¸€ä¸ªçº¿ç¨‹æ± ã€‚GCD ä¸ä»…å†³å®šç€ä½ çš„ä»£ç å—å°†åœ¨å“ªä¸ªçº¿ç¨‹è¢«æ‰§è¡Œï¼Œå®ƒè¿˜æ ¹æ®å¯ç”¨çš„ç³»ç»Ÿèµ„æºå¯¹è¿™äº›çº¿ç¨‹è¿›è¡Œç®¡ç†ã€‚è¿™æ ·å¯ä»¥å°†å¼€å‘è€…ä»çº¿ç¨‹ç®¡ç†çš„å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ï¼Œé€šè¿‡é›†ä¸­çš„ç®¡ç†çº¿ç¨‹ï¼Œæ¥ç¼“è§£å¤§é‡çº¿ç¨‹è¢«åˆ›å»ºçš„é—®é¢˜ã€‚</p>
<p>GCD å¸¦æ¥çš„å¦ä¸€ä¸ªé‡è¦æ”¹å˜æ˜¯ï¼Œä½œä¸ºå¼€å‘è€…å¯ä»¥å°†å·¥ä½œè€ƒè™‘ä¸ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯ä¸€å †çº¿ç¨‹ï¼Œè¿™ç§å¹¶è¡Œçš„æŠ½è±¡æ¨¡å‹æ›´å®¹æ˜“æŒæ¡å’Œä½¿ç”¨ã€‚</p>
<p>GCD å…¬å¼€æœ‰ 5 ä¸ªä¸åŒçš„é˜Ÿåˆ—ï¼šè¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸­çš„ main queueï¼Œ3 ä¸ªä¸åŒä¼˜å…ˆçº§çš„åå°é˜Ÿåˆ—ï¼Œä»¥åŠä¸€ä¸ªä¼˜å…ˆçº§æ›´ä½çš„åå°é˜Ÿåˆ—ï¼ˆç”¨äº I/Oï¼‰ã€‚ å¦å¤–ï¼Œå¼€å‘è€…å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰é˜Ÿåˆ—ï¼šä¸²è¡Œæˆ–è€…å¹¶è¡Œé˜Ÿåˆ—ã€‚è‡ªå®šä¹‰é˜Ÿåˆ—éå¸¸å¼ºå¤§ï¼Œåœ¨è‡ªå®šä¹‰é˜Ÿåˆ—ä¸­è¢«è°ƒåº¦çš„æ‰€æœ‰ block æœ€ç»ˆéƒ½å°†è¢«æ”¾å…¥åˆ°ç³»ç»Ÿçš„å…¨å±€é˜Ÿåˆ—ä¸­å’Œçº¿ç¨‹æ± ä¸­ã€‚</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-12-14-gcd-queues.png" alt=""></p>
<p>ä½¿ç”¨ä¸åŒä¼˜å…ˆçº§çš„è‹¥å¹²ä¸ªé˜Ÿåˆ—ä¹å¬èµ·æ¥éå¸¸ç›´æ¥ï¼Œä¸è¿‡ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ï¼Œåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨é»˜è®¤çš„ä¼˜å…ˆçº§é˜Ÿåˆ—å°±å¯ä»¥äº†ã€‚å¦‚æœæ‰§è¡Œçš„ä»»åŠ¡éœ€è¦è®¿é—®ä¸€äº›å…±äº«çš„èµ„æºï¼Œé‚£ä¹ˆåœ¨ä¸åŒä¼˜å…ˆçº§çš„é˜Ÿåˆ—ä¸­è°ƒåº¦è¿™äº›ä»»åŠ¡å¾ˆå¿«å°±ä¼šé€ æˆä¸å¯é¢„æœŸçš„è¡Œä¸ºã€‚è¿™æ ·å¯èƒ½ä¼šå¼•èµ·ç¨‹åºçš„å®Œå…¨æŒ‚èµ·ï¼Œå› ä¸ºä½ä¼˜å…ˆçº§çš„ä»»åŠ¡é˜»å¡äº†é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œä½¿å®ƒä¸èƒ½è¢«æ‰§è¡Œã€‚</p>
<p><strong>ç¨åæˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»GCDçš„ä½¿ç”¨</strong></p>
<h4 id="Operation-Queues"><a href="#Operation-Queues" class="headerlink" title="Operation Queues"></a>Operation Queues</h4><p>æ“ä½œé˜Ÿåˆ—æ˜¯Appleåœ¨GCDä¹‹ä¸Šï¼Œå®ç°äº†ä¸€äº›æ›´æ–¹ä¾¿çš„åŠŸèƒ½ï¼Œæ›´é«˜çº§çš„APï¼Œè¿™äº›åŠŸèƒ½å¯¹äºå¼€å‘è€…æ¥è®²é€šå¸¸æ¥è¯´ï¼Œæ˜¯æœ€å®‰å…¨çš„æœ€å¥½çš„é€‰æ‹©ã€‚</p>
<p>NSOperationQueue æœ‰ä¸¤ç§ä¸åŒç±»å‹çš„é˜Ÿåˆ—ï¼šä¸»é˜Ÿåˆ—å’Œè‡ªå®šä¹‰é˜Ÿåˆ—ã€‚ä¸»é˜Ÿåˆ—è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¹‹ä¸Šï¼Œè€Œè‡ªå®šä¹‰é˜Ÿåˆ—åœ¨åå°æ‰§è¡Œã€‚åœ¨ä¸¤ç§ç±»å‹ä¸­ï¼Œè¿™äº›é˜Ÿåˆ—æ‰€å¤„ç†çš„ä»»åŠ¡éƒ½ä½¿ç”¨ NSOperation çš„å­ç±»æ¥è¡¨è¿°ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡é‡å†™ main æˆ–è€… start æ–¹æ³• æ¥å®šä¹‰è‡ªå·±çš„ operations ã€‚å‰ä¸€ç§æ–¹æ³•éå¸¸ç®€å•ï¼Œå¼€å‘è€…ä¸éœ€è¦ç®¡ç†ä¸€äº›çŠ¶æ€å±æ€§ï¼ˆä¾‹å¦‚ isExecuting å’Œ isFinishedï¼‰ï¼Œå½“ main æ–¹æ³•è¿”å›çš„æ—¶å€™ï¼Œè¿™ä¸ª operation å°±ç»“æŸäº†ã€‚è¿™ç§æ–¹å¼ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œä½†æ˜¯çµæ´»æ€§ç›¸å¯¹é‡å†™ start æ¥è¯´è¦å°‘ä¸€äº›ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@implementation YourOperation</div><div class="line">    - (void)main</div><div class="line">    &#123;</div><div class="line">        // è¿›è¡Œå¤„ç† ...</div><div class="line">    &#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ å¸Œæœ›æ‹¥æœ‰æ›´å¤šçš„æ§åˆ¶æƒï¼Œä»¥åŠåœ¨ä¸€ä¸ªæ“ä½œä¸­å¯ä»¥æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆå°±é‡å†™ start æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">@implementation YourOperation</div><div class="line">    - (void)start</div><div class="line">    &#123;</div><div class="line">        self.isExecuting = YES;</div><div class="line">        self.isFinished = NO;</div><div class="line">        // å¼€å§‹å¤„ç†ï¼Œåœ¨ç»“æŸæ—¶åº”è¯¥è°ƒç”¨ finished ...</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    - (void)finished</div><div class="line">    &#123;</div><div class="line">        self.isExecuting = NO;</div><div class="line">        self.isFinished = YES;</div><div class="line">    &#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šè¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¿…é¡»æ‰‹åŠ¨ç®¡ç†æ“ä½œçš„çŠ¶æ€ã€‚ ä¸ºäº†è®©æ“ä½œé˜Ÿåˆ—èƒ½å¤Ÿæ•è·åˆ°æ“ä½œçš„æ”¹å˜ï¼Œéœ€è¦å°†çŠ¶æ€çš„å±æ€§ä»¥é…åˆ KVO çš„æ–¹å¼è¿›è¡Œå®ç°ã€‚å¦‚æœä½ ä¸ä½¿ç”¨å®ƒä»¬é»˜è®¤çš„ setter æ¥è¿›è¡Œè®¾ç½®çš„è¯ï¼Œä½ å°±éœ€è¦åœ¨åˆé€‚çš„æ—¶å€™å‘é€åˆé€‚çš„ KVO æ¶ˆæ¯ã€‚</p>
<p>ä¸ºäº†èƒ½ä½¿ç”¨æ“ä½œé˜Ÿåˆ—æ‰€æä¾›çš„å–æ¶ˆåŠŸèƒ½ï¼Œä½ éœ€è¦åœ¨é•¿æ—¶é—´æ“ä½œä¸­æ—¶ä¸æ—¶åœ°æ£€æŸ¥ isCancelled å±æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (void)main</div><div class="line">&#123;</div><div class="line">    while (notDone &amp;&amp; !self.isCancelled) &#123;</div><div class="line">        // è¿›è¡Œå¤„ç†</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“ä½ å®šä¹‰å¥½ operation ç±»ä¹‹åï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“çš„å°†ä¸€ä¸ª operation æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSOperationQueue *queue = [[NSOperationQueue alloc] init];</div><div class="line">YourOperation *operation = [[YourOperation alloc] init];</div><div class="line">[queue  addOperation:operation];</div></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥å°† block æ·»åŠ åˆ°æ“ä½œé˜Ÿåˆ—ä¸­ã€‚è¿™æœ‰æ—¶å€™ä¼šéå¸¸çš„æ–¹ä¾¿ï¼Œæ¯”å¦‚ä½ å¸Œæœ›åœ¨ä¸»é˜Ÿåˆ—ä¸­è°ƒåº¦ä¸€ä¸ªä¸€æ¬¡æ€§ä»»åŠ¡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[[NSOperationQueue mainQueue] addOperationWithBlock:^&#123;</div><div class="line">    // ä»£ç ...</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>è™½ç„¶é€šè¿‡è¿™ç§çš„æ–¹å¼åœ¨é˜Ÿåˆ—ä¸­æ·»åŠ æ“ä½œä¼šéå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯å®šä¹‰ä½ è‡ªå·±çš„ NSOperation å­ç±»ä¼šåœ¨è°ƒè¯•æ—¶å¾ˆæœ‰å¸®åŠ©ã€‚å¦‚æœä½ é‡å†™ operation çš„description æ–¹æ³•ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“çš„æ ‡ç¤ºå‡ºåœ¨æŸä¸ªé˜Ÿåˆ—ä¸­å½“å‰è¢«è°ƒåº¦çš„æ‰€æœ‰æ“ä½œ ã€‚</p>
<p>é™¤äº†æä¾›åŸºæœ¬çš„è°ƒåº¦æ“ä½œæˆ– block å¤–ï¼Œæ“ä½œé˜Ÿåˆ—è¿˜æä¾›äº†åœ¨ GCD ä¸­ä¸å¤ªå®¹æ˜“å¤„ç†å¥½çš„ç‰¹æ€§çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥é€šè¿‡ maxConcurrentOperationCount å±æ€§æ¥æ§åˆ¶ä¸€ä¸ªç‰¹å®šé˜Ÿåˆ—ä¸­å¯ä»¥æœ‰å¤šå°‘ä¸ªæ“ä½œå‚ä¸å¹¶å‘æ‰§è¡Œã€‚å°†å…¶è®¾ç½®ä¸º 1 çš„è¯ï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼Œè¿™åœ¨ä»¥éš”ç¦»ä¸ºç›®çš„çš„æ—¶å€™ä¼šå¾ˆæœ‰ç”¨ã€‚</p>
<p>å¦å¤–è¿˜æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„åŠŸèƒ½å°±æ˜¯æ ¹æ®é˜Ÿåˆ—ä¸­ operation çš„ä¼˜å…ˆçº§å¯¹å…¶è¿›è¡Œæ’åºï¼Œè¿™ä¸åŒäº GCD çš„é˜Ÿåˆ—ä¼˜å…ˆçº§ï¼Œå®ƒåªå½±å“å½“å‰é˜Ÿåˆ—ä¸­æ‰€æœ‰è¢«è°ƒåº¦çš„ operation çš„æ‰§è¡Œå…ˆåã€‚å¦‚æœä½ éœ€è¦è¿›ä¸€æ­¥åœ¨é™¤äº† 5 ä¸ªæ ‡å‡†çš„ä¼˜å…ˆçº§ä»¥å¤–å¯¹ operation çš„æ‰§è¡Œé¡ºåºè¿›è¡Œæ§åˆ¶çš„è¯ï¼Œè¿˜å¯ä»¥åœ¨ operation ä¹‹é—´æŒ‡å®šä¾èµ–å…³ç³»ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[intermediateOperation addDependency:operation1];</div><div class="line">[intermediateOperation addDependency:operation2];</div><div class="line">[finishedOperation addDependency:intermediateOperation];</div></pre></td></tr></table></figure>
<p>è¿™äº›ç®€å•çš„ä»£ç å¯ä»¥ç¡®ä¿ operation1 å’Œ operation2 åœ¨ intermediateOperation ä¹‹å‰æ‰§è¡Œï¼Œå½“ç„¶ï¼Œä¹Ÿä¼šåœ¨ finishOperation ä¹‹å‰è¢«æ‰§è¡Œã€‚å¯¹äºéœ€è¦æ˜ç¡®çš„æ‰§è¡Œé¡ºåºæ—¶ï¼Œæ“ä½œä¾èµ–æ˜¯éå¸¸å¼ºå¤§çš„ä¸€ä¸ªæœºåˆ¶ã€‚å®ƒå¯ä»¥è®©ä½ åˆ›å»ºä¸€äº›æ“ä½œç»„ï¼Œå¹¶ç¡®ä¿è¿™äº›æ“ä½œç»„åœ¨ä¾èµ–å®ƒä»¬çš„æ“ä½œè¢«æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œæˆ–è€…åœ¨å¹¶å‘é˜Ÿåˆ—ä¸­ä»¥ä¸²è¡Œçš„æ–¹å¼æ‰§è¡Œæ“ä½œã€‚</p>
<p>ä»æœ¬è´¨ä¸Šæ¥çœ‹ï¼Œæ“ä½œé˜Ÿåˆ—çš„æ€§èƒ½æ¯” GCD è¦ä½é‚£ä¹ˆä¸€ç‚¹ï¼Œä¸è¿‡ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹è¿™ç‚¹è´Ÿé¢å½±å“å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œæ“ä½œé˜Ÿåˆ—æ˜¯å¹¶å‘ç¼–ç¨‹çš„é¦–é€‰å·¥å…·ã€‚</p>
<p>å‚è€ƒï¼š</p>
<p><a href="https://www.objccn.io/issue-2-1/" target="_blank" rel="external">https://www.objccn.io/issue-2-1/</a></p>
]]></content>
    
    <summary type="html">
    
      å¹¶å‘ç¼–ç¨‹ï¼Œè¿™ä¸ªæˆ‘ä»¬å¬èµ·æ¥å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œæˆ‘ä»¬åœ¨ä»£ç ç¼–å†™è¿‡ç¨‹ä¸­ä¹Ÿç»å¸¸ä¼šåšè¿™æ ·ä¸€äº›æ“ä½œï¼Œä½†æ˜¯æˆ‘å‘ç°ï¼Œåœ¨å®é™…çš„ç¼–å†™è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šå®ç”¨å¹¶å‘ç¼–ç¨‹çš„æ–¹å¼ï¼Œå…¶å®æ˜¯é”™è¯¯ä½¿ç”¨çš„ï¼Œå½“ç„¶è¿™ä¹ŸåŒ…æ‹¬æˆ‘è‡ªå·±ï¼Œå¯¹ä¸€äº›å¹¶å‘ç¼–ç¨‹ä¹Ÿæ˜¯ç³Šé‡Œç³Šæ¶‚ï¼Œä»Šå¤©çš„å·¥ä½œä¸­æ¶‰åŠåˆ°äº†è®¸å¤šçš„å¹¶å‘æ–¹é¢çš„é—®é¢˜ï¼Œä¸“é—¨æŠ½æ—¶é—´å»å­¦ä¹ äº†ä¸€ä¸‹ï¼Œç°åœ¨è®°å½•ä¸‹æ¥ã€‚
    
    </summary>
    
      <category term="iOSä¸­çš„å¹¶å‘ç¼–ç¨‹" scheme="http://ppsheep.com/all-categories/iOS%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="iOSä¸­çš„å¹¶å‘ç¼–ç¨‹" scheme="http://ppsheep.com/all-tags/iOS%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>ViewControllersç˜¦èº«è®¡åˆ’(äºŒ)</title>
    <link href="http://ppsheep.com/2016/12/14/ViewControllers%E7%98%A6%E8%BA%AB%E8%AE%A1%E5%88%92-%E4%BA%8C/"/>
    <id>http://ppsheep.com/2016/12/14/ViewControllersç˜¦èº«è®¡åˆ’-äºŒ/</id>
    <published>2016-12-14T02:24:25.000Z</published>
    <updated>2016-12-14T03:58:34.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œæˆ‘ä¼šå®šæœŸåˆ†äº«ä¸€äº›æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•å’Œä¸€äº›iOSå®ç”¨çš„æŠ€å·§ï¼Œç°é˜¶æ®µä¸»è¦æ˜¯æ•´ç†å‡ºä¸€äº›åŸºç¡€çš„çŸ¥è¯†è®°å½•ä¸‹æ¥</strong></p>
<div align="middle"><br>    <image src="http://ac-mhke0kuv.clouddn.com/830a4ead8294ceff5160.jpg"></image><br></div>

<p>æ–‡ç« ä¹Ÿä¼šåŒæ­¥æ›´æ–°åˆ°æˆ‘çš„åšå®¢ï¼š<br><a href="http://ppsheep.com">http://ppsheep.com</a></p>
<h3 id="UITableViewControllerçš„ä½¿ç”¨"><a href="#UITableViewControllerçš„ä½¿ç”¨" class="headerlink" title="UITableViewControllerçš„ä½¿ç”¨"></a>UITableViewControllerçš„ä½¿ç”¨</h3><p>TableViewåœ¨iOSåº”ç”¨ç¨‹åºä¸­æ˜¯éå¸¸é€šç”¨çš„ç»„ä»¶ï¼ŒAppleä¸ºæˆ‘ä»¬æä¾›äº†tableviewä¸“å±çš„view controllerç±»UITableViewControllerã€‚Table view controllerå®ç°äº†ä¸€äº›éå¸¸æœ‰ç”¨çš„ç‰¹æ€§ï¼Œæ¥é¿å…ä¸€éåˆä¸€éçš„å†™é‚£äº›æ­»æ¿çš„ä»£ç ï¼</p>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œtable view controller åªé™äºç®¡ç†ä¸€ä¸ªå…¨å±å±•ç¤ºçš„table viewã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æƒ³è¾¾åˆ°çš„æ•ˆæœå°±æ˜¯è¿™æ ·ï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯å‘¢ï¼Œæˆ‘ä»¬å°±åªèƒ½ä½¿ç”¨é€šå¸¸çš„æ§åˆ¶å™¨ï¼Œå…¶å®è¿˜æœ‰å…¶ä»–çš„æ–¹æ³•æ¥è¾¾åˆ°ä½¿ç”¨table view controller çš„ç›®çš„ã€‚</p>
<h4 id="UITableViewControllerçš„ç‰¹æ€§"><a href="#UITableViewControllerçš„ç‰¹æ€§" class="headerlink" title="UITableViewControllerçš„ç‰¹æ€§"></a>UITableViewControllerçš„ç‰¹æ€§</h4><p>Table view controllers ä¼šåœ¨ç¬¬ä¸€æ¬¡æ˜¾ç¤º table view çš„æ—¶å€™å¸®ä½ åŠ è½½å…¶æ•°æ®ã€‚å¦å¤–ï¼Œå®ƒè¿˜ä¼šå¸®ä½ åˆ‡æ¢ table view çš„ç¼–è¾‘æ¨¡å¼ã€å“åº”é”®ç›˜é€šçŸ¥ã€ä»¥åŠä¸€äº›å°ä»»åŠ¡ï¼Œæ¯”å¦‚é—ªç°ä¾§è¾¹çš„æ»‘åŠ¨æç¤ºæ¡å’Œæ¸…é™¤é€‰ä¸­æ—¶çš„èƒŒæ™¯è‰²ã€‚ä¸ºäº†è®©è¿™äº›ç‰¹æ€§ç”Ÿæ•ˆï¼Œå½“ä½ åœ¨å­ç±»ä¸­è¦†å†™ç±»ä¼¼ viewWillAppear: æˆ–è€… viewDidAppear: ç­‰äº‹ä»¶æ–¹æ³•æ—¶ï¼Œéœ€è¦è°ƒç”¨ super ç‰ˆæœ¬ã€‚</p>
<p>Table view controllers ç›¸å¯¹äºæ ‡å‡† view controllers çš„ä¸€ä¸ªç‰¹åˆ«çš„å¥½å¤„æ˜¯å®ƒæ”¯æŒ Apple å®ç°çš„â€œä¸‹æ‹‰åˆ·æ–°â€ã€‚ç›®å‰ï¼Œæ–‡æ¡£ä¸­å”¯ä¸€çš„ä½¿ç”¨ UIRefreshControl çš„æ–¹å¼å°±æ˜¯é€šè¿‡ table view controller ï¼Œè™½ç„¶é€šè¿‡åŠªåŠ›åœ¨å…¶ä»–åœ°æ–¹ä¹Ÿèƒ½è®©å®ƒå·¥ä½œï¼ˆä¾‹å¦‚ç›´æ¥å°†UIRefreshControlç›´æ¥addSubViewåˆ°tableviewï¼‰ï¼Œä½†å¾ˆå¯èƒ½åœ¨ä¸‹ä¸€æ¬¡ iOS æ›´æ–°çš„æ—¶å€™å°±ä¸è¡Œäº†ã€‚</p>
<p>è¿™äº›è¦ç´ åŠ ä¸€èµ·ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¤§éƒ¨åˆ† Apple æ‰€å®šä¹‰çš„æ ‡å‡† table view äº¤äº’è¡Œä¸ºï¼Œå¦‚æœä½ çš„åº”ç”¨æ°å¥½ç¬¦åˆè¿™äº›æ ‡å‡†ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨ table view controllers æ¥é¿å…å†™é‚£äº›æ­»æ¿çš„ä»£ç æ˜¯ä¸ªå¾ˆå¥½çš„æ–¹æ³•ã€‚</p>
<h4 id="UITableViewControllerçš„é™åˆ¶"><a href="#UITableViewControllerçš„é™åˆ¶" class="headerlink" title="UITableViewControllerçš„é™åˆ¶"></a>UITableViewControllerçš„é™åˆ¶</h4><p>Table view controllers çš„ view å±æ€§æ°¸è¿œéƒ½æ˜¯ä¸€ä¸ª table viewã€‚å¦‚æœä½ ç¨åå†³å®šåœ¨ table view æ—è¾¹æ˜¾ç¤ºä¸€äº›ä¸œè¥¿ï¼ˆæ¯”å¦‚ä¸€ä¸ªåœ°å›¾ï¼Œä¸€ä¸ªå°çš„æŒ‰é’®ï¼‰ï¼Œå¦‚æœä¸ä¾èµ–äºé‚£äº›å¥‡æ€ªçš„ hacksï¼Œä¼°è®¡å°±æ²¡ä»€ä¹ˆåŠæ³•äº†ã€‚</p>
<p>å¦‚æœä½ æ˜¯ç”¨ä»£ç æˆ– .xib æ–‡ä»¶æ¥å®šä¹‰çš„ç•Œé¢ï¼Œé‚£ä¹ˆè¿ç§»åˆ°ä¸€ä¸ªæ ‡å‡† view controller å°†ä¼šéå¸¸ç®€å•ã€‚ä½†æ˜¯å¦‚æœä½ ä½¿ç”¨äº† storyboardsï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹è¦å¤šåŒ…å«å‡ ä¸ªæ­¥éª¤ã€‚é™¤éé‡æ–°åˆ›å»ºï¼Œå¦åˆ™ä½ å¹¶ä¸èƒ½åœ¨ storyboards ä¸­å°† table view controller æ”¹æˆä¸€ä¸ªæ ‡å‡†çš„ view controllerã€‚è¿™æ„å‘³ç€ä½ å¿…é¡»å°†æ‰€æœ‰å†…å®¹æ‹·è´åˆ°æ–°çš„ view controllerï¼Œç„¶åå†é‡æ–°è¿æ¥ä¸€éã€‚</p>
<p>æœ€åï¼Œä½ éœ€è¦æŠŠè¿ç§»åä¸¢å¤±çš„ table view controller çš„ç‰¹æ€§ç»™è¡¥å›æ¥ã€‚å¤§å¤šæ•°éƒ½æ˜¯ viewWillAppear: æˆ– viewDidAppear: ä¸­ç®€å•çš„ä¸€æ¡è¯­å¥ã€‚åˆ‡æ¢ç¼–è¾‘æ¨¡å¼éœ€è¦å®ç°ä¸€ä¸ª action æ–¹æ³•ï¼Œç”¨æ¥åˆ‡æ¢ table view çš„ editing å±æ€§ã€‚å¤§å¤šæ•°å·¥ä½œæ¥è‡ªé‡æ–°åˆ›å»ºå¯¹é”®ç›˜çš„æ”¯æŒã€‚</p>
<p>åœ¨é€‰æ‹©è¿™æ¡è·¯ä¹‹å‰ï¼Œå…¶å®è¿˜æœ‰ä¸€ä¸ªæ›´è½»æ¾çš„é€‰æ‹©ï¼Œå®ƒå¯ä»¥é€šè¿‡åˆ†ç¦»æˆ‘ä»¬éœ€è¦å…³å¿ƒçš„åŠŸèƒ½ï¼ˆå…³æ³¨ç‚¹åˆ†ç¦»ï¼‰ï¼Œè®©ä½ è·å¾—é¢å¤–çš„å¥½å¤„ï¼š</p>
<h4 id="ä½¿ç”¨-Child-View-Controllers"><a href="#ä½¿ç”¨-Child-View-Controllers" class="headerlink" title="ä½¿ç”¨ Child View Controllers"></a>ä½¿ç”¨ Child View Controllers</h4><p>å’Œå®Œå…¨æŠ›å¼ƒ table view controller ä¸åŒï¼Œä½ è¿˜å¯ä»¥å°†å®ƒä½œä¸º child view controller æ·»åŠ åˆ°å…¶ä»– view controller ä¸­ã€‚è¿™æ ·ï¼Œparent view controller åœ¨ç®¡ç†å…¶ä»–çš„ä½ éœ€è¦çš„æ–°åŠ çš„ç•Œé¢å…ƒç´ çš„åŒæ—¶ï¼Œtable view controller è¿˜å¯ä»¥ç»§ç»­ç®¡ç†å®ƒçš„ table viewã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä»£ç ï¼š</p>
<p>æˆ‘æœ‰ä¸€ä¸ªUITableViewController</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">@interface MyTableViewController ()</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implementation MyTableViewController</div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@&quot;cell&quot;];</div><div class="line">    self.refreshControl = [[UIRefreshControl alloc] initWithFrame:CGRectMake(0, 0, 20, 20)];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)didReceiveMemoryWarning &#123;</div><div class="line">    [super didReceiveMemoryWarning];</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">#pragma mark - Table view data source</div><div class="line"></div><div class="line">- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView &#123;</div><div class="line"></div><div class="line">    return 1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section &#123;</div><div class="line"></div><div class="line">    return 10;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath &#123;</div><div class="line">    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@&quot;cell&quot; forIndexPath:indexPath];</div><div class="line">    </div><div class="line">    cell.textLabel.text = [NSString stringWithFormat:@&quot;%ld&quot;,(long)indexPath.row];</div><div class="line">    </div><div class="line">    return cell;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘æƒ³è¦ä½¿ç”¨è¿™ä¸ªUITableViewControlleræ¥ç®¡ç†æˆ‘çš„tableview</p>
<p>ç„¶å  æˆ‘è¿˜æœ‰ä¸€ä¸ªview controllerï¼Œåœ¨è¿™ä¸ªview controllerä¸­  æˆ‘æ—¢è¦åŒ…å«è¿™ä¸ªtable view  è¿˜è¦æœ‰å…¶ä»–çš„view  ç”¨ä¸Šé¢çš„åŠ è‡ªcontrolleræ¥å®ç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">@implementation ViewController</div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    [self addMyTableViewController];</div><div class="line">    [self addOtherView];</div><div class="line">&#125;</div><div class="line"></div><div class="line">//æ·»åŠ zicontroller</div><div class="line">- (void)addMyTableViewController&#123;</div><div class="line">    MyTableViewController *vc = [[MyTableViewController alloc] init];</div><div class="line">    [self addChildViewController:vc];</div><div class="line">    CGRect frame = self.view.bounds;</div><div class="line">    frame.size.height = 300;</div><div class="line">    vc.view.frame = frame;</div><div class="line">    [self.view addSubview:vc.view];</div><div class="line">    [vc didMoveToParentViewController:self];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)addOtherView&#123;</div><div class="line">    UIButton *btn = [[UIButton alloc] initWithFrame:CGRectMake(20, 400, 100, 30)];</div><div class="line">    btn.backgroundColor = [UIColor redColor];</div><div class="line">    [self.view addSubview:btn];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (void)didReceiveMemoryWarning &#123;</div><div class="line">    [super didReceiveMemoryWarning];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-12-14-032856.jpg" alt=""></p>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†è¿™ç§æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦åœ¨å­controller å’Œ çˆ¶ controllerä¹‹é—´å»ºç«‹èµ·é€šä¿¡æ¸ é“ï¼Œå› ä¸ºï¼Œå¦‚æœç‚¹å‡»äº†cellï¼Œåœ¨çˆ¶ç±»ä¸­æˆ‘éœ€è¦çŸ¥é“ï¼Œè™½ç„¶è¿™æ ·çœ‹èµ·æ¥æ˜¯é¢å¤–çš„å¼€é”€ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ä»£ç å˜å¾—éå¸¸æ¸…æ™°ï¼Œå¤ç”¨æ€§ä¹Ÿæ›´é«˜</p>
<p>æˆ‘ä»¬æ€æ ·å»ºç«‹èµ·é€šä¿¡å‘¢ï¼Œå½“ç„¶æœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨delegateï¼Œè¿™ä¸ªå°±æ¯”è¾ƒç®€å•çš„äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#import &lt;UIKit/UIKit.h&gt;</div><div class="line"></div><div class="line">@protocol MyTableViewControllerDelegate &lt;NSObject&gt;</div><div class="line"></div><div class="line">- (void)didSelectCell;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line"></div><div class="line">@interface MyTableViewController : UITableViewController</div><div class="line"></div><div class="line">@property (nonatomic, weak) id&lt;MyTableViewControllerDelegate&gt; delegate;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ä¼ é€’ç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath&#123;</div><div class="line">    [tableView deselectRowAtIndexPath:indexPath animated:YES];</div><div class="line">    if ([self.delegate respondsToSelector:@selector(didSelectCell)]) &#123;</div><div class="line">        [self.delegate didSelectCell];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨çˆ¶controllerä¸­æ•è·ç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MyTableViewController *vc = [[MyTableViewController alloc] init];</div><div class="line">vc.delegate = self;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(void)didSelectCell&#123;</div><div class="line">    NSLog(@&quot;ç‚¹å‡»&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="åœ¨cellå†…éƒ¨æ§åˆ¶cellçš„çŠ¶æ€"><a href="#åœ¨cellå†…éƒ¨æ§åˆ¶cellçš„çŠ¶æ€" class="headerlink" title="åœ¨cellå†…éƒ¨æ§åˆ¶cellçš„çŠ¶æ€"></a>åœ¨cellå†…éƒ¨æ§åˆ¶cellçš„çŠ¶æ€</h3><p>å¦‚æœæˆ‘ä»¬æƒ³è‡ªå®šä¹‰cellå†…éƒ¨çš„çŠ¶æ€ï¼Œåœ¨ç‚¹å‡»cellçš„æ—¶å€™  è‡ªå®šä¹‰é«˜äº®æ ·å¼ æˆ‘ä»¬çŸ¥é“æœ‰è¿™æ ·çš„delegateæ–¹æ³•ï¼Œè®©æˆ‘ä»¬åœ¨view controllerä¸­æ“ä½œï¼Œä½†æ˜¯æˆ‘ä»¬è¦è®²çš„å°±æ˜¯å‡å°‘view controllerçš„ä»£ç </p>
<p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨view controller ä¸­ æ€æ ·æ¥æ”¹å˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (void)tableView:(UITableView *)tableView</div><div class="line">        didHighlightRowAtIndexPath:(NSIndexPath *)indexPath</div><div class="line">&#123;</div><div class="line">   //é«˜äº®æ—¶</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)tableView:(UITableView *)tableView</div><div class="line">        didUnhighlightRowAtIndexPath:(NSIndexPath *)indexPath</div><div class="line">&#123;</div><div class="line">    //éé«˜äº®</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>View çš„å®ç°ç»†èŠ‚å’Œ delegate çš„å®ç°äº¤ç»‡åœ¨ä¸€èµ·äº†ã€‚æˆ‘ä»¬åº”è¯¥æŠŠè¿™äº›ç»†èŠ‚ç§»åˆ° cell è‡ªèº«ä¸­å»ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">-(void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated&#123;</div><div class="line">    [super setHighlighted:highlighted animated:animated];</div><div class="line">    if (highlighted) &#123;</div><div class="line">        //é«˜äº®æ—¶æ”¹å˜cellçš„çŠ¶æ€</div><div class="line">    &#125;else&#123;</div><div class="line">        //éé«˜äº®æ—¶æ”¹å˜</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>Table view controllersï¼ˆä»¥åŠå…¶ä»–çš„ controller å¯¹è±¡ï¼ï¼‰åº”è¯¥åœ¨ model å’Œ view å¯¹è±¡ä¹‹é—´æ‰®æ¼”åè°ƒè€…å’Œè°ƒè§£è€…çš„è§’è‰²ã€‚å®ƒä¸åº”è¯¥å…³å¿ƒæ˜æ˜¾å±äº view å±‚æˆ– model å±‚çš„ä»»åŠ¡ã€‚ä½ åº”è¯¥å§‹ç»ˆè®°ä½è¿™ç‚¹ï¼Œè¿™æ · delegate å’Œ data source æ–¹æ³•ä¼šå˜å¾—æ›´å°å·§ï¼Œæœ€å¤šåŒ…å«ä¸€äº›ç®€å•çš„æ ·æ¿ä»£ç ã€‚</p>
<p>è¿™ä¸ä»…å‡å°‘äº† table view controllers é‚£æ ·çš„å¤§å°å’Œå¤æ‚æ€§ï¼Œè€Œä¸”è¿˜æŠŠä¸šåŠ¡é€»è¾‘å’Œ view çš„é€»è¾‘æ”¾åˆ°äº†æ›´åˆé€‚çš„åœ°æ–¹ã€‚Controller å±‚çš„é‡Œé‡Œå¤–å¤–çš„å®ç°ç»†èŠ‚éƒ½è¢«å°è£…æˆäº†ç®€å•çš„ APIï¼Œæœ€ç»ˆï¼Œå®ƒå˜å¾—æ›´åŠ å®¹æ˜“ç†è§£ï¼Œä¹Ÿæ›´åˆ©äºå›¢é˜Ÿåä½œã€‚</p>
<p>å‚è€ƒ:</p>
<p><a href="https://www.objccn.io/issue-1-2/" target="_blank" rel="external">https://www.objccn.io/issue-1-2/</a></p>
]]></content>
    
    <summary type="html">
    
      åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­  æˆ‘ä»¬è®²äº†é€šè¿‡æ•´åˆtableviewçš„ä»£ç†ï¼Œæ¥è¾¾åˆ°ä»£ç å¤ç”¨ï¼Œå‡å°‘æ§åˆ¶å™¨ä»£ç é‡çš„æ•ˆæœï¼Œä»Šå¤©æˆ‘ä»¬æ¥ç€æ¥è®²å¦å¤–çš„ä¸€äº›æ–¹æ³•æ¥å‡è½»æ§åˆ¶å™¨ä»£ç é‡ï¼Œæ•´åˆå°è£…ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§ã€‚
    
    </summary>
    
      <category term="iOSè¿›é˜¶" scheme="http://ppsheep.com/all-categories/iOS%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="æ›´è½»é‡çº§çš„ViewController" scheme="http://ppsheep.com/all-tags/%E6%9B%B4%E8%BD%BB%E9%87%8F%E7%BA%A7%E7%9A%84ViewController/"/>
    
  </entry>
  
  <entry>
    <title>ViewControllersç˜¦èº«è®¡åˆ’(ä¸€)</title>
    <link href="http://ppsheep.com/2016/12/05/ViewControllers%E7%98%A6%E8%BA%AB%E8%AE%A1%E5%88%92-%E4%B8%80/"/>
    <id>http://ppsheep.com/2016/12/05/ViewControllersç˜¦èº«è®¡åˆ’-ä¸€/</id>
    <published>2016-12-05T14:29:37.000Z</published>
    <updated>2016-12-06T01:58:42.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œæˆ‘ä¼šå®šæœŸåˆ†äº«ä¸€äº›æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•å’Œä¸€äº›iOSå®ç”¨çš„æŠ€å·§ï¼Œç°é˜¶æ®µä¸»è¦æ˜¯æ•´ç†å‡ºä¸€äº›åŸºç¡€çš„çŸ¥è¯†è®°å½•ä¸‹æ¥</strong></p>
<div align="middle"><br>    <image src="http://ac-mhke0kuv.clouddn.com/830a4ead8294ceff5160.jpg"></image><br></div>

<p>æ–‡ç« ä¹Ÿä¼šåŒæ­¥æ›´æ–°åˆ°æˆ‘çš„åšå®¢ï¼š<br><a href="http://ppsheep.com">http://ppsheep.com</a></p>
<h3 id="æŠŠ-Data-Source-å’Œå…¶ä»–-Protocols-åˆ†ç¦»å‡ºæ¥"><a href="#æŠŠ-Data-Source-å’Œå…¶ä»–-Protocols-åˆ†ç¦»å‡ºæ¥" class="headerlink" title="æŠŠ Data Source å’Œå…¶ä»– Protocols åˆ†ç¦»å‡ºæ¥"></a>æŠŠ Data Source å’Œå…¶ä»– Protocols åˆ†ç¦»å‡ºæ¥</h3><p>æˆ‘ä»¬åœ¨å¹³æ—¶çš„ç¼–ç ä¸­ï¼Œæœ€ç»å¸¸ä½¿ç”¨åˆ°çš„ä¸€ä¸ªæ§ä»¶å°±æ˜¯UITableViewäº†ï¼Œé‚£æˆ‘ä»¬æ¯æ¬¡éœ€è¦ä½¿ç”¨åˆ°tableviewçš„æ—¶å€™ï¼Œéƒ½éœ€è¦å†™ä¸€äº›é‡å¤çš„ä»£ç ï¼Œæ¯”å¦‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">#pragma mark - tableview datasource</div><div class="line"></div><div class="line">#pragma mark - tableview datasource</div><div class="line"></div><div class="line">- (PPSFriend *)friendAtIndexPath:(NSIndexPath *)indexPath&#123;</div><div class="line">    return self.friends[indexPath.row];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123;</div><div class="line">    return self.friends.count;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123;</div><div class="line">    PPSFriendCell *cell = [tableView dequeueReusableCellWithIdentifier:@&quot;friendCell&quot; forIndexPath:indexPath];</div><div class="line">    PPSFriend *friend = [self friendAtIndexPath:indexPath];</div><div class="line">    cell.textLabel.text = friend.name;</div><div class="line">    return cell;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åƒä¸Šé¢ä¸€äº›ä»£ç ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨å†™ï¼Œæ¯æ¬¡ç”¨åˆ°UITableViewéƒ½éœ€è¦é‡å†™è¿™äº›æ¯«æ— æŠ€æœ¯å¯è¨€çš„ä»£ç ï¼Œé‚£æˆ‘ä»¬è¯•æƒ³ä¸€ä¸‹èƒ½å¦å†™ä¸€ä¸ªå°è£…ç±»ï¼Œå°†è¿™äº›é‡å¤çš„æ–¹æ³•å…¨éƒ¨å°èµ·æ¥ï¼Œå¤šæ¬¡ä½¿ç”¨å‘¢ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯ï¼Œå¯ä»¥çš„ã€‚</p>
<p>ä¸Šé¢çš„ä»£ç ï¼Œå…¶å®éƒ½æ˜¯åœ¨å›´ç»•ç€friendsè¿™ä¸ªæ•°ç»„åšä¸€ç³»åˆ—çš„äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥ç‹¬ç«‹å‡ºæ¥ä¸€ä¸ªç±»ï¼Œä½¿ç”¨ä¸€ä¸ªblockæˆ–è€…delegateæ¥è®¾ç½®cellï¼Œå½“ç„¶è¿™å–å†³äºä½ çš„ä¹ æƒ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#pragma mark - tableview config cell</div><div class="line">- (void)configCell&#123;</div><div class="line">    void (^configCell)(PPSFriendCell *, PPSFriend *) = ^(PPSFriendCell *cell, PPSFriend *friend)&#123;</div><div class="line">        cell.textLabel.text = friend.name;</div><div class="line">    &#125;;</div><div class="line">    PPSArrayDatasource *datasources = [[PPSArrayDatasource alloc] initWithItems:self.friends cellIdentifier:@&quot;friendCell&quot; configureCellBlock:configCell];</div><div class="line">    self.tableView.dataSource = datasources;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œä½ å¯ä»¥æŠŠ view controller ä¸­çš„è¿™ 3 ä¸ªæ–¹æ³•å»æ‰äº†ï¼Œå–è€Œä»£ä¹‹ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª PPSArrayDatasource ç±»çš„å®ä¾‹ä½œä¸º table view çš„ data sourceã€‚</p>
<p>ç°åœ¨ä½ ä¸ç”¨æ‹…å¿ƒæŠŠä¸€ä¸ª index path æ˜ å°„åˆ°æ•°ç»„ä¸­çš„ä½ç½®äº†ï¼Œæ¯æ¬¡ä½ æƒ³æŠŠè¿™ä¸ªæ•°ç»„æ˜¾ç¤ºåˆ°ä¸€ä¸ª table view ä¸­æ—¶ï¼Œä½ éƒ½å¯ä»¥å¤ç”¨è¿™äº›ä»£ç ã€‚ä½ ä¹Ÿå¯ä»¥å®ç°ä¸€äº›é¢å¤–çš„æ–¹æ³•ï¼Œæ¯”å¦‚ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tableView:commitEditingStyle:forRowAtIndexPath:</div></pre></td></tr></table></figure>
<h4 id="å¤šä¸ªsection"><a href="#å¤šä¸ªsection" class="headerlink" title="å¤šä¸ªsection"></a>å¤šä¸ªsection</h4><p>è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå¦‚æœæ˜¯å¤šä¸ªsectionçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†æ‰©å±•ä¸€ä¸‹ï¼Œå°†blockå®šä¹‰ä¸º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">typedef void(^TableViewCellConfigureBlock)(id cell, id item, NSIndexPath *indexPath);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#pragma mark - tableview config cell</div><div class="line">- (void)configCell&#123;</div><div class="line">    void (^configCell)(PPSFriendCell *, PPSFriend *, NSIndexPath *) = ^(PPSFriendCell *cell, PPSFriend *friend, NSIndexPath *indexPath)&#123;</div><div class="line">        cell.textLabel.text = friend.name;</div><div class="line">    &#125;;</div><div class="line">    PPSArrayDatasource *datasources = [[PPSArrayDatasource alloc] initWithItems:self.friends cellIdentifier:@&quot;friendCell&quot; configureCellBlock:configCell];</div><div class="line">    self.tableView.dataSource = datasources;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆåœ¨PPSArrayDatasourceçš„itemsä¸­è£…çš„åº”è¯¥å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„æ•°ç»„äº†ï¼Œåˆ†åˆ«å¯¹åº”çš„æ¯ä¸ªsectionï¼Œè¿™é‡Œæˆ‘åªæ˜¯é’ˆå¯¹è¿™ç§æƒ…å†µè¯´æ˜ä¸€ä¸‹ï¼Œä¸ç®¡æ˜¯å¤šä¸ªsectionè¿˜æ˜¯å•ä¸ªsectionéƒ½å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæ¥ç˜¦èº«</p>
<p>åœ¨ table view controllers ä¹‹é—´å…±äº«ã€‚</p>
<p>è¿™æ ·çš„å¥½å¤„åœ¨äºï¼Œä½ å¯ä»¥å•ç‹¬æµ‹è¯•è¿™ä¸ªç±»ï¼Œå†ä¹Ÿä¸ç”¨å†™ç¬¬äºŒéã€‚è¯¥åŸåˆ™åŒæ ·é€‚ç”¨äºæ•°ç»„ä¹‹å¤–çš„å…¶ä»–å¯¹è±¡ã€‚</p>
<h3 id="å°†ä¸šåŠ¡é€»è¾‘ç§»åˆ°modelä¸­"><a href="#å°†ä¸šåŠ¡é€»è¾‘ç§»åˆ°modelä¸­" class="headerlink" title="å°†ä¸šåŠ¡é€»è¾‘ç§»åˆ°modelä¸­"></a>å°†ä¸šåŠ¡é€»è¾‘ç§»åˆ°modelä¸­</h3><p>ä¸‹é¢æ˜¯åœ¨viewcontrollerä¸­å†™çš„ç”¨æ¥æŸ¥æ‰¾ä¸€ä¸ªç”¨æˆ·çš„ç›®å‰çš„ä¼˜å…ˆäº‹é¡¹çš„åˆ—è¡¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (void)loadPriorities &#123;</div><div class="line">    NSDate* now = [NSDate date];</div><div class="line">    NSString* formatString = @&quot;startDate = %@&quot;;</div><div class="line">    NSPredicate* predicate = [NSPredicate predicateWithFormat:formatString, now, now];</div><div class="line">    NSSet* priorities = [self.user.priorities filteredSetUsingPredicate:predicate];</div><div class="line">    self.priorities = [priorities allObjects];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æŠŠè¿™äº›ä»£ç ç§»åŠ¨åˆ° User ç±»çš„ category ä¸­ä¼šå˜å¾—æ›´åŠ æ¸…æ™°ï¼Œå¤„ç†ä¹‹åï¼Œåœ¨ View Controller.m ä¸­çœ‹èµ·æ¥å°±æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (void)loadPriorities &#123;</div><div class="line">    self.priorities = [user currentPriorities];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨ User+Extensions.m ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (NSArray*)currentPriorities &#123;</div><div class="line">    NSDate* now = [NSDate date];</div><div class="line">    NSString* formatString = @&quot;startDate = %@&quot;;</div><div class="line">    NSPredicate* predicate = [NSPredicate predicateWithFormat:formatString, now, now];</div><div class="line">    return [[self.priorities filteredSetUsingPredicate:predicate] allObjects];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ‰äº›ä»£ç ä¸èƒ½è¢«è½»æ¾åœ°ç§»åŠ¨åˆ° model å¯¹è±¡ä¸­ï¼Œä½†æ˜æ˜¾å’Œ model ä»£ç ç´§å¯†è”ç³»ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª Storeï¼š</p>
<h3 id="åˆ›å»ºstoreç±»"><a href="#åˆ›å»ºstoreç±»" class="headerlink" title="åˆ›å»ºstoreç±»"></a>åˆ›å»ºstoreç±»</h3><p>åœ¨ä¸€äº›æƒ…å†µä¸‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åŠ è½½æ–‡ä»¶å¹¶è§£æå®ƒã€‚ä¸‹é¢å°±æ˜¯ view controller ä¸­çš„ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">- (void)readArchive &#123;</div><div class="line">    NSBundle* bundle = [NSBundle bundleForClass:[self class]];</div><div class="line">    NSURL *archiveURL = [bundle URLForResource:@&quot;photodata&quot;</div><div class="line">                                 withExtension:@&quot;bin&quot;];</div><div class="line">    NSAssert(archiveURL != nil, @&quot;Unable to find archive in bundle.&quot;);</div><div class="line">    NSData *data = [NSData dataWithContentsOfURL:archiveURL</div><div class="line">                                         options:0</div><div class="line">                                           error:NULL];</div><div class="line">    NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];</div><div class="line">    _users = [unarchiver decodeObjectOfClass:[NSArray class] forKey:@&quot;users&quot;];</div><div class="line">    _photos = [unarchiver decodeObjectOfClass:[NSArray class] forKey:@&quot;photos&quot;];</div><div class="line">    [unarchiver finishDecoding];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯ view controller æ²¡å¿…è¦çŸ¥é“è¿™äº›ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ›å»ºäº†ä¸€ä¸ª Store å¯¹è±¡æ¥åšè¿™äº›äº‹ã€‚é€šè¿‡åˆ†ç¦»ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤ç”¨è¿™äº›ä»£ç ï¼Œå•ç‹¬æµ‹è¯•ä»–ä»¬ï¼Œå¹¶ä¸”è®© view controller ä¿æŒå°å·§ã€‚Store å¯¹è±¡ä¼šå…³å¿ƒæ•°æ®åŠ è½½ã€ç¼“å­˜å’Œè®¾ç½®æ•°æ®æ ˆã€‚å®ƒä¹Ÿç»å¸¸è¢«ç§°ä¸ºæœåŠ¡å±‚æˆ–è€…ä»“åº“ã€‚</p>
<h3 id="æŠŠç½‘ç»œå±‚è¯·æ±‚é€»è¾‘ç§»åˆ°modelå±‚"><a href="#æŠŠç½‘ç»œå±‚è¯·æ±‚é€»è¾‘ç§»åˆ°modelå±‚" class="headerlink" title="æŠŠç½‘ç»œå±‚è¯·æ±‚é€»è¾‘ç§»åˆ°modelå±‚"></a>æŠŠç½‘ç»œå±‚è¯·æ±‚é€»è¾‘ç§»åˆ°modelå±‚</h3><p>å’Œä¸Šé¢çš„ä¸»é¢˜ç›¸ä¼¼ï¼šä¸è¦åœ¨ view controller ä¸­åšç½‘ç»œè¯·æ±‚çš„é€»è¾‘ã€‚å–è€Œä»£ä¹‹ï¼Œä½ åº”è¯¥å°†å®ƒä»¬å°è£…åˆ°å¦ä¸€ä¸ªç±»ä¸­ã€‚è¿™æ ·ï¼Œä½ çš„ view controller å°±å¯ä»¥åœ¨ä¹‹åé€šè¿‡ä½¿ç”¨å›è°ƒï¼ˆæ¯”å¦‚ä¸€ä¸ª completion çš„ blockï¼‰æ¥è¯·æ±‚ç½‘ç»œäº†ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œç¼“å­˜å’Œé”™è¯¯æ§åˆ¶ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªç±»é‡Œé¢å®Œæˆã€‚</p>
<h3 id="æŠŠViewç§»åˆ°Viewå±‚"><a href="#æŠŠViewç§»åˆ°Viewå±‚" class="headerlink" title="æŠŠViewç§»åˆ°Viewå±‚"></a>æŠŠViewç§»åˆ°Viewå±‚</h3><p>ä¸åº”è¯¥åœ¨ view controller ä¸­æ„å»ºå¤æ‚çš„ view å±‚æ¬¡ç»“æ„ã€‚ä½ å¯ä»¥ä½¿ç”¨ Interface Builder æˆ–è€…æŠŠ views å°è£…åˆ°ä¸€ä¸ª UIView å­ç±»å½“ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªé€‰æ‹©æ—¥æœŸçš„æ§ä»¶ï¼ŒæŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªåä¸º DatePickerView çš„ç±»ä¸­ä¼šæ¯”æŠŠæ‰€æœ‰çš„äº‹æƒ…éƒ½åœ¨ view controller ä¸­åšå¥½å¥½å¾—å¤šã€‚å†ä¸€æ¬¡ï¼Œè¿™æ ·å¢åŠ äº†å¯å¤ç”¨æ€§å¹¶ä¿æŒäº†ç®€å•ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†ä¸€ä¸ªviewcontrollerä¸­å¤æ‚çš„viewæ„é€ ï¼Œæ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„viewç±»ä¸­ï¼Œç„¶åœ¨viewcontrollerä¸­ï¼Œåªéœ€è¦æ„å»ºä¸€ä¸ªè¿™ä¸ªç±»å°±è¡Œã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°ä¸€äº›ç”¨æ¥åˆ›å»ºæ›´å°å·§çš„ view controllers çš„æŠ€æœ¯ã€‚æˆ‘ä»¬å¹¶ä¸æ˜¯æƒ³æŠŠè¿™äº›æŠ€æœ¯åº”ç”¨åˆ°æ¯ä¸€ä¸ªå¯èƒ½çš„è§’è½ï¼Œåªæ˜¯æˆ‘ä»¬æœ‰ä¸€ä¸ªç›®æ ‡ï¼šå†™å¯ç»´æŠ¤çš„ä»£ç ã€‚çŸ¥é“è¿™äº›æ¨¡å¼åï¼Œæˆ‘ä»¬å°±æ›´æœ‰å¯èƒ½æŠŠé‚£äº›ç¬¨é‡çš„ view controllers å˜å¾—æ›´æ•´æ´ã€‚</p>
]]></content>
    
    <summary type="html">
    
      View controllers é€šå¸¸æ˜¯ iOS é¡¹ç›®ä¸­æœ€å¤§çš„æ–‡ä»¶ï¼Œå¹¶ä¸”å®ƒä»¬åŒ…å«äº†è®¸å¤šä¸å¿…è¦çš„ä»£ç ã€‚æ‰€ä»¥ View controllers ä¸­çš„ä»£ç å‡ ä¹æ€»æ˜¯å¤ç”¨ç‡æœ€ä½çš„ã€‚æ¥ä¸‹æ¥æˆ‘å°†ç»“åˆä¸€äº›æˆ‘è‡ªå·±çœ‹åˆ°çš„ä¸œè¥¿å’Œå¹³æ—¶åœ¨ä½¿ç”¨çš„æ–¹æ³•ï¼Œæ¥èŠ‚çœViewControllerä¸­çš„ä»£ç é‡ã€‚
    
    </summary>
    
      <category term="iOSè¿›é˜¶" scheme="http://ppsheep.com/all-categories/iOS%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="æ›´è½»é‡çº§çš„ViewController" scheme="http://ppsheep.com/all-tags/%E6%9B%B4%E8%BD%BB%E9%87%8F%E7%BA%A7%E7%9A%84ViewController/"/>
    
  </entry>
  
  <entry>
    <title>KVCå’ŒKVO(ä¸‰)</title>
    <link href="http://ppsheep.com/2016/12/05/KVC%E5%92%8CKVO-%E4%B8%89/"/>
    <id>http://ppsheep.com/2016/12/05/KVCå’ŒKVO-ä¸‰/</id>
    <published>2016-12-05T02:04:32.000Z</published>
    <updated>2016-12-05T02:27:58.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œæˆ‘ä¼šå®šæœŸåˆ†äº«ä¸€äº›æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•å’Œä¸€äº›iOSå®ç”¨çš„æŠ€å·§ï¼Œç°é˜¶æ®µä¸»è¦æ˜¯æ•´ç†å‡ºä¸€äº›åŸºç¡€çš„çŸ¥è¯†è®°å½•ä¸‹æ¥</strong></p>
<div align="middle"><br>    <image src="http://ac-mhke0kuv.clouddn.com/830a4ead8294ceff5160.jpg"></image><br></div>

<p>æ–‡ç« ä¹Ÿä¼šåŒæ­¥æ›´æ–°åˆ°æˆ‘çš„åšå®¢ï¼š<br><a href="http://ppsheep.com">http://ppsheep.com</a></p>
<h3 id="KVOå’Œçº¿ç¨‹"><a href="#KVOå’Œçº¿ç¨‹" class="headerlink" title="KVOå’Œçº¿ç¨‹"></a>KVOå’Œçº¿ç¨‹</h3><p>KVO è¡Œä¸ºæ˜¯åŒæ­¥çš„ å¹¶ä¸”å‘ç”Ÿä¸æ‰€è§‚å¯Ÿçš„å€¼å‘ç”Ÿå˜åŒ–çš„åŒæ ·çš„çº¿ç¨‹ä¸Šã€‚è¿™å¬èµ·æ¥æœ‰ç‚¹æ‹—å£ï¼Œç®€å•ç‚¹è¯´ï¼Œå°±æ˜¯ç›‘å¬è¡Œä¸ºå‘ç”Ÿçš„çº¿ç¨‹å’Œæ‰€è§‚å¯Ÿçš„å€¼å‘ç”Ÿå˜åŒ–çš„çº¿ç¨‹ï¼Œè‚¯å®šæ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™æ ·æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™å°±éœ€è¦æ³¨æ„äº†ï¼š</p>
<p>å½“æˆ‘ä»¬è¯•å›¾ä»å…¶ä»–çº¿ç¨‹æ”¹å˜å±æ€§å€¼çš„æ—¶å€™æˆ‘ä»¬åº”å½“ååˆ†å°å¿ƒï¼Œé™¤éèƒ½ç¡®å®šæ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½ç”¨çº¿ç¨‹å®‰å…¨çš„æ–¹æ³•å¤„ç† KVO é€šçŸ¥</p>
<p>é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬ä¸æ¨èæŠŠ KVO å’Œå¤šçº¿ç¨‹æ··èµ·æ¥ã€‚å¦‚æœæˆ‘ä»¬è¦ç”¨å¤šä¸ªé˜Ÿåˆ—å’Œçº¿ç¨‹ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åœ¨å®ƒä»¬äº’ç›¸ä¹‹é—´ç”¨ KVOã€‚</p>
<h3 id="KVC"><a href="#KVC" class="headerlink" title="KVC"></a>KVC</h3><p>æœ€ç®€å•çš„ KVC èƒ½è®©æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹çš„å½¢å¼è®¿é—®å±æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@property (nonatomic, copy) NSString *name;</div></pre></td></tr></table></figure>
<p>å–å€¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSString *n = [object valueForKey:@&quot;name&quot;]</div></pre></td></tr></table></figure>
<p>è®¾å®šï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[object setValue:@&quot;Daniel&quot; forKey:@&quot;name&quot;]</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¸ä»…å¯ä»¥è®¿é—®ä½œä¸ºå¯¹è±¡å±æ€§ï¼Œè€Œä¸”ä¹Ÿèƒ½è®¿é—®ä¸€äº›æ ‡é‡ï¼ˆä¾‹å¦‚ int å’Œ CGFloatï¼‰å’Œ structï¼ˆä¾‹å¦‚ CGRectï¼‰ã€‚Foundation æ¡†æ¶ä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨å°è£…å®ƒä»¬ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœæœ‰ä»¥ä¸‹å±æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@property (nonatomic) CGFloat height;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·è®¾ç½®:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[object setValue:@(20) forKey:@&quot;height&quot;]</div></pre></td></tr></table></figure>
<h3 id="é”®è·¯å¾„-key-path"><a href="#é”®è·¯å¾„-key-path" class="headerlink" title="é”®è·¯å¾„ (key path)"></a>é”®è·¯å¾„ (key path)</h3><p>KVC åŒæ ·å…è®¸æˆ‘ä»¬é€šè¿‡å…³ç³»æ¥è®¿é—®å¯¹è±¡ã€‚å‡è®¾ person å¯¹è±¡æœ‰å±æ€§ addressï¼Œaddress æœ‰å±æ€§ cityï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·é€šè¿‡ person æ¥è®¿é—® cityï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[person valueForKeyPath:@&quot;address.city&quot;]</div></pre></td></tr></table></figure>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯è¿™é‡Œæˆ‘ä»¬è°ƒç”¨ -valueForKeyPath: è€Œä¸æ˜¯ -valueForKey:</p>
<h3 id="Key-Value-Coding-Without-property"><a href="#Key-Value-Coding-Without-property" class="headerlink" title="Key-Value Coding Without @property"></a>Key-Value Coding Without @property</h3><p>ä¸éœ€è¦ @property çš„ KVC</p>
<p>æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªæ”¯æŒ KVC è€Œä¸ç”¨ @property å’Œ @synthesize æˆ–æ˜¯è‡ªåŠ¨ synthesize çš„å±æ€§ã€‚æœ€ç›´æ¥çš„æ–¹å¼æ˜¯æ·»åŠ  -<key> å’Œ -set<key>: æ–¹æ³•ã€‚ä¾‹å¦‚æˆ‘ä»¬æƒ³è¦ name ï¼Œæˆ‘ä»¬è¿™æ ·åšï¼š</key></key></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- (NSString *)name;</div><div class="line">- (void)setName:(NSString *)name;</div></pre></td></tr></table></figure>
<p>è¿™å®Œå…¨ç­‰äº @property çš„å®ç°æ–¹å¼ã€‚</p>
<p>ä½†æ˜¯å½“æ ‡é‡å’Œ struct çš„å€¼è¢«ä¼ å…¥ nil çš„æ—¶å€™å°¤å…¶éœ€è¦æ³¨æ„ã€‚å‡è®¾æˆ‘ä»¬è¦ height å±æ€§æ”¯æŒ KVC æˆ‘ä»¬å†™äº†ä»¥ä¸‹çš„æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- (CGFloat)height;</div><div class="line">- (void)setHeight:(CGFloat)height;</div></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬è¿™æ ·è°ƒç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[object setValue:nil forKey:@&quot;height&quot;]</div></pre></td></tr></table></figure>
<p>è¿™ä¼šæŠ›å‡ºä¸€ä¸ª exceptionã€‚è¦æ­£ç¡®çš„å¤„ç† nilï¼Œæˆ‘ä»¬è¦åƒè¿™æ · override -setNilValueForKey:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (void)setNilValueForKey:(NSString *)key</div><div class="line">&#123;</div><div class="line">    if ([key isEqualToString:@&quot;height&quot;]) &#123;</div><div class="line">        [self setValue:@0 forKey:key];</div><div class="line">    &#125; else</div><div class="line">        [super setNilValueForKey:key];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="é›†åˆçš„æ“ä½œ"><a href="#é›†åˆçš„æ“ä½œ" class="headerlink" title="é›†åˆçš„æ“ä½œ"></a>é›†åˆçš„æ“ä½œ</h3><p>ä¸€ä¸ªå¸¸å¸¸è¢«å¿½è§†çš„ KVC ç‰¹æ€§æ˜¯å®ƒå¯¹é›†åˆæ“ä½œçš„æ”¯æŒã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥è·å¾—ä¸€ä¸ªæ•°ç»„ä¸­æœ€å¤§çš„å€¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NSArray *a = @[@4, @84, @2];</div><div class="line">NSLog(@&quot;max = %@&quot;, [a valueForKeyPath:@&quot;@max.self&quot;]);</div></pre></td></tr></table></figure>
<p>æˆ–è€…è¯´ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª Transaction å¯¹è±¡çš„æ•°ç»„ï¼Œå¯¹è±¡æœ‰å±æ€§ amount çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è·å¾—æœ€å¤§çš„ amountï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NSArray *a = @[transaction1, transaction2, transaction3];</div><div class="line">NSLog(@&quot;max = %@&quot;, [a valueForKeyPath:@&quot;@max.amount&quot;]);</div></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬è°ƒç”¨ [a valueForKeyPath:@â€@max.amountâ€] çš„æ—¶å€™ï¼Œå®ƒä¼šåœ¨æ•°ç»„ a çš„æ¯ä¸ªå…ƒç´ ä¸­è°ƒç”¨ -valueForKey:@â€amountâ€ ç„¶åè¿”å›æœ€å¤§çš„é‚£ä¸ªã€‚</p>
<h3 id="å¸¸è§çš„-KVO-é”™è¯¯"><a href="#å¸¸è§çš„-KVO-é”™è¯¯" class="headerlink" title="å¸¸è§çš„ KVO é”™è¯¯"></a>å¸¸è§çš„ KVO é”™è¯¯</h3><p>é¦–å…ˆï¼ŒKVO å…¼å®¹æ˜¯ API çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœç±»çš„æ‰€æœ‰è€…ä¸ä¿è¯æŸä¸ªå±æ€§å…¼å®¹ KVOï¼Œæˆ‘ä»¬å°±ä¸èƒ½ä¿è¯ KVO æ­£å¸¸å·¥ä½œã€‚è‹¹æœæ–‡æ¡£é‡Œæœ‰ KVO å…¼å®¹å±æ€§çš„æ–‡æ¡£ã€‚ä¾‹å¦‚ï¼ŒNSProgress ç±»çš„å¤§å¤šæ•°å±æ€§éƒ½æ˜¯å…¼å®¹ KVO çš„ã€‚</p>
<p>å½“åšå‡ºæ”¹å˜ä»¥åï¼Œæœ‰äº›äººè¯•ç€æ”¾ç©ºçš„ -willChange å’Œ -didChange æ–¹æ³•æ¥å¼ºåˆ¶ KVO çš„è§¦å‘ã€‚KVO é€šçŸ¥è™½ç„¶ä¼šç”Ÿæ•ˆï¼Œä½†æ˜¯è¿™æ ·åšç ´åäº†æœ‰ä¾èµ–äº NSKeyValueObservingOld é€‰é¡¹çš„è§‚å¯Ÿè€…ã€‚è¯¦ç»†æ¥è¯´ï¼Œè¿™å½±å“äº† KVO å¯¹è§‚å¯Ÿé”®è·¯å¾„ (key path) çš„åŸç”Ÿæ”¯æŒã€‚KVO åœ¨è§‚å¯Ÿé”®è·¯å¾„ (key path) æ—¶ä¾èµ–äº NSKeyValueObservingOld å±æ€§ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿè¦æŒ‡å‡ºæœ‰äº›é›†åˆæ˜¯ä¸èƒ½è¢«è§‚å¯Ÿçš„ã€‚KVO æ—¨åœ¨è§‚å¯Ÿå…³ç³» (relationship) è€Œä¸æ˜¯é›†åˆã€‚æˆ‘ä»¬ä¸èƒ½è§‚å¯Ÿ NSArrayï¼Œæˆ‘ä»¬åªèƒ½è§‚å¯Ÿä¸€ä¸ªå¯¹è±¡çš„å±æ€§â€”â€”è€Œè¿™ä¸ªå±æ€§æœ‰å¯èƒ½æ˜¯ NSArrayã€‚ä¸¾ä¾‹è¯´ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ª ContactList å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿå®ƒçš„ contacts å±æ€§ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½å‘è¦è§‚å¯Ÿå¯¹è±¡çš„ -addObserver:forKeyPath:â€¦ ä¼ å…¥ä¸€ä¸ª NSArrayã€‚</p>
<p>ç›¸ä¼¼åœ°ï¼Œè§‚å¯Ÿ self ä¸æ˜¯æ°¸è¿œéƒ½ç”Ÿæ•ˆçš„ã€‚è€Œä¸”è¿™ä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ã€‚</p>
<h3 id="è°ƒè¯•-KVO"><a href="#è°ƒè¯•-KVO" class="headerlink" title="è°ƒè¯• KVO"></a>è°ƒè¯• KVO</h3><p>ä½ å¯ä»¥åœ¨ lldb é‡ŒæŸ¥çœ‹ä¸€ä¸ªè¢«è§‚å¯Ÿå¯¹è±¡çš„æ‰€æœ‰è§‚å¯Ÿä¿¡æ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(lldb) po [observedObject observationInfo]</div></pre></td></tr></table></figure>
<p>è¿™ä¼šæ‰“å°å‡ºæœ‰å…³è°è§‚å¯Ÿè°ä¹‹ç±»çš„å¾ˆå¤šä¿¡æ¯ã€‚</p>
<p>è¿™ä¸ªä¿¡æ¯çš„æ ¼å¼ä¸æ˜¯å…¬å¼€çš„ï¼Œæˆ‘ä»¬ä¸èƒ½è®©ä»»ä½•ä¸œè¥¿ä¾èµ–å®ƒï¼Œå› ä¸ºè‹¹æœéšæ—¶éƒ½å¯ä»¥æ”¹å˜å®ƒã€‚ä¸è¿‡è¿™æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„æ’é”™å·¥å…·ã€‚</p>
<p>å‚è€ƒï¼š</p>
<p><a href="https://www.objccn.io/issue-7-3/" target="_blank" rel="external">https://www.objccn.io/issue-7-3/</a></p>
]]></content>
    
    <summary type="html">
    
      ç»§ç»­æˆ‘ä»¬ä¹‹å‰çš„KVCå’ŒKVOç³»åˆ—ï¼Œè¿™æ˜¯è¿™ä¸ªç³»åˆ—çš„æœ€åä¸€ç¯‡ï¼Œè¿™ä¸¤å‘¨éƒ½æ²¡æ€ä¹ˆå†™ä¸œè¥¿ï¼Œä¼°è®¡è¿™ä¸€å‘¨è¿‡åï¼Œæ–‡ç« æ›´æ–°ä¼šæ­£å¸¸äº†ï¼Œæ‰‹å¤´ä¸Šçš„äº‹æƒ…å¤šäº†ï¼Œå°±ä¸æƒ³å†™äº†ï¼Œå†™å‡ºæ¥çš„ä¸œè¥¿ä¹Ÿæ˜¯ç²—åˆ¶æ»¥é€ 
    
    </summary>
    
      <category term="KVCå’ŒKVO" scheme="http://ppsheep.com/all-categories/KVC%E5%92%8CKVO/"/>
    
    
      <category term="KVCå’ŒKVO" scheme="http://ppsheep.com/all-tags/KVC%E5%92%8CKVO/"/>
    
  </entry>
  
  <entry>
    <title>KVCå’ŒKVO(äºŒ)</title>
    <link href="http://ppsheep.com/2016/11/28/KVC%E5%92%8CKVO-%E4%BA%8C/"/>
    <id>http://ppsheep.com/2016/11/28/KVCå’ŒKVO-äºŒ/</id>
    <published>2016-11-28T01:30:54.000Z</published>
    <updated>2016-11-28T02:47:05.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œæˆ‘ä¼šå®šæœŸåˆ†äº«ä¸€äº›æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•å’Œä¸€äº›iOSå®ç”¨çš„æŠ€å·§ï¼Œç°é˜¶æ®µä¸»è¦æ˜¯æ•´ç†å‡ºä¸€äº›åŸºç¡€çš„çŸ¥è¯†è®°å½•ä¸‹æ¥</strong></p>
<div align="middle"><br>    <image src="http://ac-mhke0kuv.clouddn.com/830a4ead8294ceff5160.jpg"></image><br></div>

<p>æ–‡ç« ä¹Ÿä¼šåŒæ­¥æ›´æ–°åˆ°æˆ‘çš„åšå®¢ï¼š<br><a href="http://ppsheep.com">http://ppsheep.com</a></p>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°ï¼Œé€šè¿‡é”®å€¼è§‚å¯Ÿï¼Œå±æ€§ä¾èµ–ï¼Œæ¥è®²è§£KVCï¼Œå¦‚æœæ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„ï¼Œè¯·ç§»æ­¥<br><a href="http://ppsheep.com/2016/11/19/KVCå’ŒKVO(ä¸€)/">http://ppsheep.com/2016/11/19/KVCå’ŒKVO(ä¸€)/</a></p>
<h3 id="æ‰‹åŠ¨é€šçŸ¥å’Œè‡ªåŠ¨é€šçŸ¥"><a href="#æ‰‹åŠ¨é€šçŸ¥å’Œè‡ªåŠ¨é€šçŸ¥" class="headerlink" title="æ‰‹åŠ¨é€šçŸ¥å’Œè‡ªåŠ¨é€šçŸ¥"></a>æ‰‹åŠ¨é€šçŸ¥å’Œè‡ªåŠ¨é€šçŸ¥</h3><p>åœ¨OCä¸­ï¼Œæ¶ˆæ¯é€šçŸ¥æ‰®æ¼”ç€å¾ˆé‡è¦çš„è§’è‰²ï¼Œåœ¨æˆ‘ä»¬åœ¨è°ƒç”¨ LabColor ç±»çš„ -setLComponent:æ–¹æ³•æ—¶ï¼Œä¼šè§¦å‘ä»¥ä¸‹æ–¹æ³•çš„è°ƒç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (void)willChangeValueForKey:(NSString *)key</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (void)didChangeValueForKey:(NSString *)key</div></pre></td></tr></table></figure>
<p>ä¼šåœ¨è¿è¡Œ -setLComponent: ä¸­çš„ä»£ç ä¹‹å‰ä»¥åŠä¹‹åè¢«è‡ªåŠ¨è°ƒç”¨ã€‚</p>
<p>æœ‰äº›æƒ…å†µä¸‹å½“æˆ‘ä»¬éœ€è¦ override -setLComponent: å¹¶ä¸”æˆ‘ä»¬è¦æ§åˆ¶æ˜¯å¦å‘é€é”®å€¼æ”¹å˜çš„é€šçŸ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦åšä»¥ä¸‹çš„äº‹æƒ…ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//æ˜¯å¦è‡ªåŠ¨å‘é€é€šçŸ¥</div><div class="line">+ (BOOL)automaticallyNotifiesObserversForLComponent;</div><div class="line">&#123;</div><div class="line">    return NO;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)setLComponent:(double)lComponent;</div><div class="line">&#123;</div><div class="line">    if (_lComponent == lComponent) &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    //æ‰‹åŠ¨è°ƒç”¨</div><div class="line">    [self willChangeValueForKey:@&quot;lComponent&quot;];</div><div class="line">    _lComponent = lComponent;</div><div class="line">    [self didChangeValueForKey:@&quot;lComponent&quot;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å…³é—­äº† -willChangeValueForKey: å’Œ -didChangeValueForKey: çš„è‡ªåŠ¨è°ƒç”¨ï¼Œç„¶åæˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨ä»–ä»¬ã€‚æˆ‘ä»¬åªåº”è¯¥åœ¨å…³é—­äº†è‡ªåŠ¨è°ƒç”¨çš„æ—¶å€™æˆ‘ä»¬æ‰éœ€è¦åœ¨ setter æ–¹æ³•é‡Œæ‰‹åŠ¨è°ƒç”¨ -willChangeValueForKey: å’Œ -didChangeValueForKey:ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¸ä¼šè¿™æ ·åšï¼Œè¿™æ ·åšï¼Œä¼šè®©ä»£ç å˜å¾—å¤æ‚ï¼Œä¸å®¹æ˜“ç†è§£</p>
<h3 id="KVOå’Œcontext"><a href="#KVOå’Œcontext" class="headerlink" title="KVOå’Œcontext"></a>KVOå’Œcontext</h3><p>æœ‰æ—¶æˆ‘ä»¬ä¼šæœ‰ç†ç”±ä¸æƒ³ç”¨ KeyValueObserver è¾…åŠ©ç±»ã€‚åˆ›å»ºå¦ä¸€ä¸ªå¯¹è±¡ä¼šæœ‰é¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚å¦‚æœæˆ‘ä»¬è§‚å¯Ÿå¾ˆå¤šä¸ªé”®çš„è¯ï¼Œè¿™ä¸ªå¼€é”€å¯èƒ½ä¼šå˜å¾—æ˜æ˜¾ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬åœ¨å®ç°ä¸€ä¸ªç±»çš„æ—¶å€™æŠŠå®ƒè‡ªå·±æ³¨å†Œä¸ºè§‚å¯Ÿè€…çš„è¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (void)addObserver:(NSObject *)anObserver</div><div class="line">         forKeyPath:(NSString *)keyPath</div><div class="line">            options:(NSKeyValueObservingOptions)options</div><div class="line">            context:(void *)context</div></pre></td></tr></table></figure>
<p>ä¸€ä¸ªéå¸¸é‡è¦çš„ç‚¹æ˜¯æˆ‘ä»¬è¦ä¼ å…¥ä¸€ä¸ªè¿™ä¸ªç±»å”¯ä¸€çš„ contextã€‚æ¨èæŠŠä»¥ä¸‹ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">static int const PrivateKVOContext;</div></pre></td></tr></table></figure>
<p>å†™åœ¨è¿™ä¸ªç±» .m æ–‡ä»¶çš„é¡¶ç«¯ï¼Œç„¶åæˆ‘ä»¬åƒè¿™æ ·è°ƒç”¨ API å¹¶ä¼ å…¥ PrivateKVOContext çš„æŒ‡é’ˆï¼š</p>
<p>æˆ‘ä»¬åœ¨LabColorç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//å°†è‡ªå·±è®¾ç½®ä¸ºè§‚å¯Ÿè€…</div><div class="line">- (void)setObserverWithSelf;</div></pre></td></tr></table></figure>
<p>åœ¨æœ¬ç±»ä¸­å®ç°æ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(void)setObserverWithSelf&#123;</div><div class="line">    [self addObserver:self forKeyPath:@&quot;lComponent&quot; options:NSKeyValueObservingOptionInitial context:(void *)&amp;PrivateKVOContext];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç„¶åæˆ‘ä»¬è¿™æ ·å†™ -observeValueForKeyPath:â€¦ çš„æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (void)observeValueForKeyPath:(NSString *)keyPath</div><div class="line">                      ofObject:(id)object</div><div class="line">                        change:(NSDictionary *)change</div><div class="line">                       context:(void *)context</div><div class="line">&#123;</div><div class="line">    if (context == &amp;PrivateKVOContext) &#123;</div><div class="line">        // è¿™é‡Œå†™ç›¸å…³çš„è§‚å¯Ÿä»£ç </div><div class="line">    &#125; else &#123;</div><div class="line">        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™å°†ç¡®ä¿æˆ‘ä»¬å†™çš„å­ç±»éƒ½æ˜¯æ­£ç¡®çš„ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå­ç±»å’Œçˆ¶ç±»éƒ½èƒ½å®‰å…¨çš„è§‚å¯ŸåŒæ ·çš„é”®å€¼è€Œä¸ä¼šå†²çªã€‚å¦åˆ™æˆ‘ä»¬å°†ä¼šç¢°åˆ°éš¾ä»¥ debug çš„å¥‡æ€ªè¡Œä¸ºã€‚</p>
<h3 id="è¿›é˜¶KVO"><a href="#è¿›é˜¶KVO" class="headerlink" title="è¿›é˜¶KVO"></a>è¿›é˜¶KVO</h3><p>æˆ‘ä»¬å¸¸å¸¸éœ€è¦å½“ä¸€ä¸ªå€¼æ”¹å˜çš„æ—¶å€™æ›´æ–° UIï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿè¦åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œä»£ç çš„æ—¶å€™æ›´æ–°ä¸€æ¬¡ UIã€‚æˆ‘ä»¬å¯ä»¥ç”¨ KVO å¹¶æ·»åŠ  NSKeyValueObservingOptionInitial çš„é€‰é¡¹ æ¥ä¸€ç®­åŒé›•åœ°åšå¥½è¿™æ ·çš„äº‹æƒ…ã€‚è¿™å°†ä¼šè®© KVO é€šçŸ¥åœ¨è°ƒç”¨ -addObserver:forKeyPath:â€¦ åˆ°æ—¶å€™ä¹Ÿè¢«è§¦å‘ã€‚</p>
<h4 id="ä¹‹å‰å’Œä¹‹å"><a href="#ä¹‹å‰å’Œä¹‹å" class="headerlink" title="ä¹‹å‰å’Œä¹‹å"></a>ä¹‹å‰å’Œä¹‹å</h4><p>å¦‚æœæˆ‘ä»¬æ³¨å†Œé€šçŸ¥çš„æ—¶å€™é™„åŠ äº† NSKeyValueObservingOptionPrior é€‰é¡¹ï¼Œæˆ‘ä»¬å°†ä¼šæ”¶åˆ°ä¸¤ä¸ªé€šçŸ¥ï¼šä¸€ä¸ªåœ¨å€¼å˜æ›´å‰ï¼Œå¦ä¸€ä¸ªåœ¨å˜æ›´ä¹‹åã€‚å˜æ›´å‰çš„é€šçŸ¥å°†ä¼šåœ¨ change å­—å…¸ä¸­æœ‰ä¸åŒçš„é”®ã€‚æˆ‘ä»¬å¯ä»¥åƒä»¥ä¸‹è¿™æ ·åŒºåˆ†é€šçŸ¥æ˜¯åœ¨æ”¹å˜ä¹‹å‰è¿˜æ˜¯ä¹‹åè¢«è§¦å‘çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">if ([change[NSKeyValueChangeNotificationIsPriorKey] boolValue]) &#123;</div><div class="line">    // æ”¹å˜ä¹‹å‰</div><div class="line">&#125; else &#123;</div><div class="line">    // æ”¹å˜ä¹‹å</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="å€¼"><a href="#å€¼" class="headerlink" title="å€¼"></a>å€¼</h4><p>å¦‚æœæˆ‘ä»¬éœ€è¦æ”¹å˜å‰åçš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ KVO é€‰é¡¹ä¸­åŠ å…¥ NSKeyValueObservingOptionNew å’Œ/æˆ– NSKeyValueObservingOptionOldã€‚</p>
<p>æ›´ç®€å•çš„åŠæ³•æ˜¯ç”¨ NSKeyValueObservingOptionPrior é€‰é¡¹ï¼Œéšåæˆ‘ä»¬å°±å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼æå–å‡ºæ”¹å˜å‰åçš„å€¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">id oldValue = change[NSKeyValueChangeOldKey];</div><div class="line">id newValue = change[NSKeyValueChangeNewKey];</div></pre></td></tr></table></figure>
<p>é€šå¸¸æ¥è¯´ KVO ä¼šåœ¨ -willChangeValueForKey: å’Œ -didChangeValueForKey: è¢«è°ƒç”¨çš„æ—¶å€™å­˜å‚¨ç›¸åº”é”®çš„å€¼ã€‚</p>
<h4 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h4><p>KVO å¯¹ä¸€äº›é›†åˆç±»ä¹Ÿæœ‰å¾ˆå¼ºçš„æ”¯æŒï¼Œä»¥ä¸‹æ–¹æ³•ä¼šè¿”å›é›†åˆå¯¹è±¡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-mutableArrayValueForKey:</div><div class="line">-mutableSetValueForKey:</div><div class="line">-mutableOrderedSetValueForKey:</div></pre></td></tr></table></figure>
<p>æˆ‘å°†ä¼šè¯¦ç»†è§£é‡Šè¿™æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚å¦‚æœä½ ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œchange å­—å…¸é‡Œä¼šåŒ…å«é”®å€¼å˜åŒ–çš„ç±»å‹ï¼ˆæ·»åŠ ã€åˆ é™¤å’Œæ›¿æ¢ï¼‰ã€‚å¯¹äºæœ‰åºçš„é›†åˆï¼Œchange å­—å…¸ä¼šåŒ…å«å—å½±å“çš„ indexã€‚</p>
<p>é›†åˆä»£ç†å¯¹è±¡å’Œå˜åŒ–çš„é€šçŸ¥åœ¨ç”¨äºæ›´æ–°UIçš„æ—¶å€™éå¸¸æœ‰æ•ˆï¼Œå°¤å…¶æ˜¯å¤„ç†å¤§é›†åˆçš„æ—¶å€™ã€‚ä½†æ˜¯å®ƒä»¬éœ€è¦èŠ±è´¹ä½ ä¸€äº›å¿ƒæ€ã€‚</p>
<p>åé¢å°†ä¼šç»“åˆUIå±‚é¢ï¼Œæ¥å¯¹KVCå’ŒKVOè¿›è¡Œè¿›ä¸€æ­¥è®²è§£</p>
<p>å‚è€ƒ:</p>
<p><a href="https://www.objccn.io" target="_blank" rel="external">https://www.objccn.io</a></p>
]]></content>
    
    <summary type="html">
    
      ä¸Šä¸€å‘¨å®åœ¨æ˜¯æ‰‹å¤´ä¸Šçš„äº‹æƒ…å¤ªå¤šï¼Œé¡¹ç›®å¿™ç€å‡ºç‰ˆæœ¬ï¼Œéƒ½æ²¡æ€ä¹ˆå†™ç‚¹ä¸œè¥¿ï¼Œä¼°è®¡è¿™ä¸€å‘¨ä¹Ÿä¸ä¼šè½»æ¾ï¼Œæ„Ÿè§‰å·²ç»å¥½ä¹…æ²¡åŠ¨äº†ï¼Œè¿˜æ˜¯éœ€è¦ç§¯ç´¯ç‚¹ä¸œè¥¿çš„ã€‚ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬è®²åˆ°äº†KVCå’ŒKVOï¼Œæˆ‘ä»¬æ¥ç€å®Œæˆè¿™ä¸ªç³»åˆ—ï¼Œè¿™ä¸ªç³»åˆ—æ˜¯æˆ‘åœ¨å–µç¥çš„Objcä¸Šçœ‹åˆ°çš„ï¼Œç»“åˆè‡ªå·±çš„ä¸€ç‚¹ç†è§£ï¼Œè®°å½•ä¸‹æ¥ã€‚
    
    </summary>
    
      <category term="KVCå’ŒKVO" scheme="http://ppsheep.com/all-categories/KVC%E5%92%8CKVO/"/>
    
    
      <category term="KVCå’ŒKVO" scheme="http://ppsheep.com/all-tags/KVC%E5%92%8CKVO/"/>
    
  </entry>
  
  <entry>
    <title>KVCå’ŒKVO(ä¸€)</title>
    <link href="http://ppsheep.com/2016/11/19/KVC%E5%92%8CKVO(%E4%B8%80)/"/>
    <id>http://ppsheep.com/2016/11/19/KVCå’ŒKVO(ä¸€)/</id>
    <published>2016-11-19T08:08:32.000Z</published>
    <updated>2016-11-21T03:19:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œæˆ‘ä¼šå®šæœŸåˆ†äº«ä¸€äº›æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•å’Œä¸€äº›iOSå®ç”¨çš„æŠ€å·§ï¼Œç°é˜¶æ®µä¸»è¦æ˜¯æ•´ç†å‡ºä¸€äº›åŸºç¡€çš„çŸ¥è¯†è®°å½•ä¸‹æ¥</strong></p>
<div align="middle"><br>    <image src="http://ac-mhke0kuv.clouddn.com/830a4ead8294ceff5160.jpg"></image><br></div>

<p>æ–‡ç« ä¹Ÿä¼šåŒæ­¥æ›´æ–°åˆ°æˆ‘çš„åšå®¢ï¼š<br><a href="http://ppsheep.com">http://ppsheep.com</a></p>
<h3 id="è§‚å¯Ÿmodelå¯¹è±¡çš„å˜åŒ–"><a href="#è§‚å¯Ÿmodelå¯¹è±¡çš„å˜åŒ–" class="headerlink" title="è§‚å¯Ÿmodelå¯¹è±¡çš„å˜åŒ–"></a>è§‚å¯Ÿmodelå¯¹è±¡çš„å˜åŒ–</h3><p>åœ¨ Cocoa çš„æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ (Model-view-controller)æ¶æ„é‡Œï¼Œæ§åˆ¶å™¨è´Ÿè´£è®©è§†å›¾å’Œæ¨¡å‹åŒæ­¥ã€‚è¿™ä¸€å…±æœ‰ä¸¤æ­¥ï¼šå½“ model å¯¹è±¡æ”¹å˜çš„æ—¶å€™ï¼Œè§†å›¾åº”è¯¥éšä¹‹æ”¹å˜ä»¥åæ˜ æ¨¡å‹çš„å˜åŒ–ï¼›å½“ç”¨æˆ·å’Œæ§åˆ¶å™¨äº¤äº’çš„æ—¶å€™ï¼Œæ¨¡å‹ä¹Ÿåº”è¯¥åšå‡ºç›¸åº”çš„æ”¹å˜ã€‚</p>
<p>KVO èƒ½å¸®åŠ©æˆ‘ä»¬è®©è§†å›¾å’Œæ¨¡å‹ä¿æŒåŒæ­¥ã€‚æ§åˆ¶å™¨å¯ä»¥è§‚å¯Ÿè§†å›¾ä¾èµ–çš„å±æ€§å˜åŒ–ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼šæˆ‘ä»¬çš„æ¨¡å‹ç±» LabColor ä»£è¡¨ä¸€ç§ Labè‰²å½©ç©ºé—´é‡Œçš„é¢œè‰²ã€‚å’Œ RGB ä¸åŒï¼Œè¿™ç§è‰²å½©ç©ºé—´æœ‰ä¸‰ä¸ªå…ƒç´  L, a, bã€‚æˆ‘ä»¬è¦åšä¸€ä¸ªç”¨æ¥æ”¹å˜è¿™äº›å€¼çš„æ»‘å—å’Œä¸€ä¸ªæ˜¾ç¤ºé¢œè‰²çš„æ–¹å—åŒºåŸŸã€‚</p>
<p>æˆ‘ä»¬çš„æ¨¡å‹ç±»æœ‰ä»¥ä¸‹ä¸‰ä¸ªç”¨æ¥ä»£è¡¨é¢œè‰²çš„å±æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@property (nonatomic) double lComponent;</div><div class="line">@property (nonatomic) double aComponent;</div><div class="line">@property (nonatomic) double bComponent;</div></pre></td></tr></table></figure>
<h3 id="ä¾èµ–çš„å±æ€§"><a href="#ä¾èµ–çš„å±æ€§" class="headerlink" title="ä¾èµ–çš„å±æ€§"></a>ä¾èµ–çš„å±æ€§</h3><p>æˆ‘ä»¬éœ€è¦ä»è¿™ä¸ªç±»åˆ›å»ºä¸€ä¸ª UIColor å¯¹è±¡æ¥æ˜¾ç¤ºå‡ºé¢œè‰²ã€‚æˆ‘ä»¬æ·»åŠ ä¸‰ä¸ªé¢å¤–çš„å±æ€§ï¼Œåˆ†åˆ«å¯¹åº” R, G, Bï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@property (nonatomic, readonly) double redComponent;</div><div class="line">@property (nonatomic, readonly) double greenComponent;</div><div class="line">@property (nonatomic, readonly) double blueComponent;</div><div class="line"></div><div class="line">@property (nonatomic, strong, readonly) UIColor *color;</div></pre></td></tr></table></figure>
<p>æœ‰äº†è¿™äº›ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºè¿™ä¸ªç±»çš„æ¥å£äº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">@interface LabColor : NSObject</div><div class="line"></div><div class="line">@property (nonatomic) double lComponent;</div><div class="line">@property (nonatomic) double aComponent;</div><div class="line">@property (nonatomic) double bComponent;</div><div class="line"></div><div class="line">@property (nonatomic, readonly) double redComponent;</div><div class="line">@property (nonatomic, readonly) double greenComponent;</div><div class="line">@property (nonatomic, readonly) double blueComponent;</div><div class="line"></div><div class="line">@property (nonatomic, strong, readonly) UIColor *color;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>ç»´åŸºç™¾ç§‘æä¾›äº†è½¬æ¢ RGB åˆ° Lab è‰²å½©ç©ºé—´çš„ç®—æ³•ã€‚å†™æˆæ–¹æ³•ä¹‹åå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (double)greenComponent;</div><div class="line">&#123;</div><div class="line">    return D65TristimulusValues[1] * inverseF(1./116. * (self.lComponent + 16) + 1./500. * self.aComponent);</div><div class="line">&#125;</div><div class="line"></div><div class="line">[...]</div><div class="line"></div><div class="line">- (UIColor *)color</div><div class="line">&#123;</div><div class="line">    return [UIColor colorWithRed:self.redComponent * 0.01 green:self.greenComponent * 0.01 blue:self.blueComponent * 0.01 alpha:1.];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™äº›ä»£ç æ²¡ä»€ä¹ˆä»¤äººæ¿€åŠ¨çš„åœ°æ–¹ã€‚æœ‰è¶£çš„æ˜¯ greenComponent å±æ€§ä¾èµ–äº lComponent å’Œ aComponentã€‚ä¸è®ºä½•æ—¶è®¾ç½® lComponent çš„å€¼ï¼Œæˆ‘ä»¬éœ€è¦è®© RGB ä¸‰ä¸ª component ä¸­ä¸å…¶ç›¸å…³çš„æˆå‘˜ä»¥åŠ color å±æ€§éƒ½è¦å¾—åˆ°é€šçŸ¥ä»¥ä¿æŒä¸€è‡´ã€‚è¿™ä¸€ç‚¹è¿™åœ¨ KVO ä¸­å¾ˆé‡è¦ã€‚</p>
<p>Foundation æ¡†æ¶æä¾›çš„è¡¨ç¤ºå±æ€§ä¾èµ–çš„æœºåˆ¶å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+ (NSSet *)keyPathsForValuesAffectingValueForKey:(NSString *)key</div></pre></td></tr></table></figure>
<p>æ›´è¯¦ç»†çš„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+ (NSSet *)keyPathsForValuesAffecting&lt;é”®å&gt;</div></pre></td></tr></table></figure>
<p>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">+ (NSSet *)keyPathsForValuesAffectingRedComponent</div><div class="line">&#123;</div><div class="line">    return [NSSet setWithObject:@&quot;lComponent&quot;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (NSSet *)keyPathsForValuesAffectingGreenComponent</div><div class="line">&#123;</div><div class="line">    return [NSSet setWithObjects:@&quot;lComponent&quot;, @&quot;aComponent&quot;, nil];</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (NSSet *)keyPathsForValuesAffectingBlueComponent</div><div class="line">&#123;</div><div class="line">    return [NSSet setWithObjects:@&quot;lComponent&quot;, @&quot;bComponent&quot;, nil];</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (NSSet *)keyPathsForValuesAffectingColor</div><div class="line">&#123;</div><div class="line">    return [NSSet setWithObjects:@&quot;redComponent&quot;, @&quot;greenComponent&quot;, @&quot;blueComponent&quot;, nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>æ³¨æ„</strong></p>
<p>è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œå¯èƒ½æœ‰ä¸€äº›æœ‹å‹å¯¹è¿™é‡Œçš„å¯¹è±¡ä¾èµ–å…³ç³»ä¸æ˜¯ç‰¹åˆ«æ¸…æ¥šã€‚æˆ‘ä»¬æ‹¿å‡ºä¸€ä¸ªæ¥è§£é‡Š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">+ (NSSet *)keyPathsForValuesAffectingGreenComponent</div><div class="line">&#123;</div><div class="line">    return [NSSet setWithObjects:@&quot;lComponent&quot;, @&quot;aComponent&quot;, nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>é‡è¦</strong></p>
<p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå®ƒä»£è¡¨çš„æ„æ€æ˜¯å½“lComponentå±æ€§ï¼Œæˆ–è€…aComponentå±æ€§æ”¹å˜æ—¶ï¼Œéœ€è¦é€šçŸ¥åˆ°greenComponentï¼Œå°±ç›¸å½“äºï¼ŒlComponentæˆ–è€…aComponentä¸­çš„ä»»ä½•ä¸€ä¸ªä½œå‡ºæ”¹å˜æ—¶ï¼Œå¯ä»¥è®¤ä¸ºgreenComponentä¹Ÿå‘ç”Ÿäº†æ”¹å˜ï¼Œå¦‚æœè¿™æ—¶ï¼Œæœ‰ä¸€ä¸ªç›‘å¬å¯¹è±¡ï¼Œåœ¨ç›‘å¬greenComponentï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬æ”¹å˜lComponentæˆ–aComponentï¼Œè¿™ä¸ªç›‘å¬ä¼šè¢«è§¦å‘</p>
<p>è‡³äºè¿™ä¸ªæ–¹æ³•æ€ä¹ˆå¾—æ¥çš„ï¼Œåœ¨peopertyä¸­å®šä¹‰äº†è¯¥å±æ€§ï¼Œä½ åªè¦æ•²keyPathå°±ä¼šè‡ªåŠ¨æç¤ºå‡ºæ¥ï¼Œæœ‰å“ªäº›å¯ä»¥è®¾ç½®ä¾èµ–äº†</p>
<p>åœ¨æˆ‘ä»¬çš„colorä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">+ (NSSet *)keyPathsForValuesAffectingColor</div><div class="line">&#123;</div><div class="line">    return [NSSet setWithObjects:@&quot;redComponent&quot;, @&quot;greenComponent&quot;, @&quot;blueComponent&quot;, nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>coloræ˜¯ä¾èµ–äºredComponentã€greenComponentå’ŒblueComponentï¼Œè¿™æ · æˆ‘ä»¬å°±èƒ½çŸ¥é“ï¼Œæ”¹å˜lComponentã€aComponentã€bComponentä»»ä½•ä¸€ä¸ªï¼Œéƒ½ä¼šè§¦å‘colorçš„ç›‘å¬</p>
<p>ç°åœ¨æˆ‘ä»¬å®Œæ•´çš„è¡¨è¾¾äº†å±æ€§ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›å±æ€§é“¾æ¥èµ·æ¥ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœæˆ‘ä»¬å†™ä¸€ä¸ªå­ç±»å» override redComponent æ–¹æ³•ï¼Œè¿™äº›ä¾èµ–å…³ç³»ä»ç„¶èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<h3 id="è§‚å¯Ÿå˜åŒ–"><a href="#è§‚å¯Ÿå˜åŒ–" class="headerlink" title="è§‚å¯Ÿå˜åŒ–"></a>è§‚å¯Ÿå˜åŒ–</h3><p>ç°åœ¨è®©æˆ‘ä»¬ç›®å…‰è½¬å‘æ§åˆ¶å™¨ã€‚ UIViewController çš„å­ç±»æ‹¥æœ‰ LabColor model å¯¹è±¡ä½œä¸ºå…¶å±æ€§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@interface ViewController ()</div><div class="line"></div><div class="line">@property (nonatomic, strong) LabColor *labColor;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŠŠè§†å›¾æ§åˆ¶å™¨æ³¨å†Œä¸ºè§‚å¯Ÿè€…æ¥æ¥æ”¶ KVO çš„é€šçŸ¥ï¼Œè¿™å¯ä»¥ç”¨ä»¥ä¸‹ NSObject çš„æ–¹æ³•æ¥å®ç°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (void)addObserver:(NSObject *)anObserver</div><div class="line">         forKeyPath:(NSString *)keyPath</div><div class="line">            options:(NSKeyValueObservingOptions)options</div><div class="line">            context:(void *)context</div></pre></td></tr></table></figure>
<p>è¿™ä¼šè®©ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (void)observeValueForKeyPath:(NSString *)keyPath</div><div class="line">                      ofObject:(id)object</div><div class="line">                        change:(NSDictionary *)change</div><div class="line">                       context:(void *)context</div></pre></td></tr></table></figure>
<p>åœ¨å½“ keyPath çš„å€¼æ”¹å˜çš„æ—¶å€™åœ¨è§‚å¯Ÿè€… anObserver ä¸Šé¢è¢«è°ƒç”¨ã€‚è¿™ä¸ª API çœ‹èµ·æ¥æœ‰ä¸€ç‚¹å“äººã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œæˆ‘ä»¬è¿˜å¾—è®°å¾—è°ƒç”¨ä»¥ä¸‹çš„æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- (void)removeObserver:(NSObject *)anObserver</div><div class="line">            forKeyPath:(NSString *)keyPath</div></pre></td></tr></table></figure>
<p>æ¥ç§»é™¤è§‚å¯Ÿè€…ï¼Œå¦åˆ™æˆ‘ä»¬æˆ‘ä»¬çš„ app ä¼šå› ä¸ºæŸäº›å¥‡æ€ªçš„åŸå› å´©æºƒã€‚</p>
<p>å¯¹äºå¤§å¤šæ•°çš„åº”ç”¨æ¥è¯´ï¼ŒKVO å¯ä»¥é€šè¿‡è¾…åŠ©ç±»ç”¨ä¸€ç§æ›´ç®€å•ä¼˜é›…çš„æ–¹å¼å®ç°ã€‚æˆ‘ä»¬åœ¨è§†å›¾æ§åˆ¶å™¨æ·»åŠ ä»¥ä¸‹çš„è§‚å¯Ÿè®°å·ï¼ˆObservation tokenï¼‰å±æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@property (nonatomic, strong) id colorObserveToken;</div></pre></td></tr></table></figure>
<p>å½“ labColor åœ¨è§†å›¾æ§åˆ¶å™¨ä¸­è¢«è®¾ç½®æ—¶ï¼Œæˆ‘ä»¬åªè¦ override labColor çš„ setter æ–¹æ³•å°±è¡Œäº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- (void)setLabColor:(LabColor *)labColor</div><div class="line">&#123;</div><div class="line">    _labColor = labColor;</div><div class="line">    self.colorObserveToken = [KeyValueObserver observeObject:labColor</div><div class="line">                                                     keyPath:@&quot;color&quot;</div><div class="line">                                                      target:self</div><div class="line">                                                    selector:@selector(colorDidChange:)</div><div class="line">                                                     options:NSKeyValueObservingOptionInitial];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)colorDidChange:(NSDictionary *)change;</div><div class="line">&#123;</div><div class="line">    self.colorView.backgroundColor = self.labColor.color;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å°è£…ä¸€ä¸ªKeyValueObserverè¾…åŠ©ç±»</p>
<p>KeyValueObserver è¾…åŠ©ç±» å°è£…äº† -addObserver:forKeyPath:options:context:ï¼Œ-observeValueForKeyPath:ofObject:change:context:å’Œ-removeObserverForKeyPath: çš„è°ƒç”¨ï¼Œè®©è§†å›¾æ§åˆ¶å™¨è¿œç¦»æ‚ä¹±çš„ä»£ç ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// å…¶ä¸­__attribute__((warn_unused_result))è¿™ä¸ªçš„æ„æ€æ˜¯ï¼Œå½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå¿…é¡»è¦æ£€æŸ¥è¿”å›å€¼ï¼Œæˆ–è€…ä½¿ç”¨è¿”å›å€¼ï¼Œä¸ç„¶ç¼–è¯‘å™¨ç›´æ¥æŠ¥è­¦å‘Š</div><div class="line"></div><div class="line">+ (NSObject *)observeObject:(id)object keyPath:(NSString*)keyPath target:(id)target selector:(SEL)selector __attribute__((warn_unused_result));</div><div class="line"></div><div class="line"></div><div class="line">+ (NSObject *)observeObject:(id)object keyPath:(NSString*)keyPath target:(id)target selector:(SEL)selector options:(NSKeyValueObservingOptions)options __attribute__((warn_unused_result));</div></pre></td></tr></table></figure>
<h3 id="æ•´åˆåˆ°ä¸€èµ·"><a href="#æ•´åˆåˆ°ä¸€èµ·" class="headerlink" title="æ•´åˆåˆ°ä¸€èµ·"></a>æ•´åˆåˆ°ä¸€èµ·</h3><p>è§†å›¾æ§åˆ¶å™¨éœ€è¦å¯¹ Lï¼Œaï¼Œb çš„æ»‘å—æ§åˆ¶åšå‡ºååº”ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- (void)updateLComponent:(UISlider *)sender;</div><div class="line">&#123;</div><div class="line">    self.labColor.lComponent = sender.value;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)updateAComponent:(UISlider *)sender;</div><div class="line">&#123;</div><div class="line">    self.labColor.aComponent = sender.value;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)updateBComponent:(UISlider *)sender;</div><div class="line">&#123;</div><div class="line">    self.labColor.bComponent = sender.value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ•ˆæœ</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-21-KVC%26KVO-%E4%B8%80-.gif" alt=""></p>
<p>æºå·¥ç¨‹:</p>
<p><a href="https://github.com/yangqian111/blog/tree/master/iOS%20KVCå’ŒKVO(ä¸€" target="_blank" rel="external">https://github.com/yangqian111/blog/tree/master/iOS%20KVCå’ŒKVO(ä¸€</a>)</p>
<p>å‚è€ƒ:<br>    <a href="https://www.objccn.io/issue-7-3/" target="_blank" rel="external">https://www.objccn.io/issue-7-3/</a></p>
]]></content>
    
    <summary type="html">
    
      Key-value coding (KVC) å’Œ key-value observing (KVO) æ˜¯ä¸¤ç§èƒ½è®©æˆ‘ä»¬é©¾é©­ Objective-C åŠ¨æ€ç‰¹æ€§å¹¶ç®€åŒ–ä»£ç çš„æœºåˆ¶ã€‚åœ¨è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä»¬å°†æ¥è§¦ä¸€äº›å¦‚ä½•åˆ©ç”¨è¿™äº›ç‰¹æ€§çš„ä¾‹å­ã€‚
    
    </summary>
    
      <category term="KVCå’ŒKVO" scheme="http://ppsheep.com/all-categories/KVC%E5%92%8CKVO/"/>
    
    
      <category term="KVCå’ŒKVO" scheme="http://ppsheep.com/all-tags/KVC%E5%92%8CKVO/"/>
    
  </entry>
  
  <entry>
    <title>iOSå›¾å½¢å‡ ä½•å­¦åŸºç¡€-åŠ¨ç”»åŸºç¡€ä¹‹äºŒ</title>
    <link href="http://ppsheep.com/2016/11/18/iOS%E5%9B%BE%E5%BD%A2%E5%87%A0%E4%BD%95%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%80%E4%B9%8B%E4%BA%8C/"/>
    <id>http://ppsheep.com/2016/11/18/iOSå›¾å½¢å‡ ä½•å­¦åŸºç¡€-åŠ¨ç”»åŸºç¡€ä¹‹äºŒ/</id>
    <published>2016-11-18T05:58:09.000Z</published>
    <updated>2016-11-19T07:49:58.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œæˆ‘ä¼šå®šæœŸåˆ†äº«ä¸€äº›æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•å’Œä¸€äº›iOSå®ç”¨çš„æŠ€å·§ï¼Œç°é˜¶æ®µä¸»è¦æ˜¯æ•´ç†å‡ºä¸€äº›åŸºç¡€çš„çŸ¥è¯†è®°å½•ä¸‹æ¥</strong></p>
<div align="middle"><br>    <image src="http://ac-mhke0kuv.clouddn.com/830a4ead8294ceff5160.jpg"></image><br></div>

<p>æ–‡ç« ä¹Ÿä¼šåŒæ­¥æ›´æ–°åˆ°æˆ‘çš„åšå®¢ï¼š<br><a href="http://ppsheep.com">http://ppsheep.com</a></p>
<h3 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h3><p>UIViewæœ‰ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„å¸ƒå±€å±æ€§ï¼š</p>
<ul>
<li>frame    (ä»£è¡¨äº†å›¾å±‚çš„å¤–éƒ¨åæ ‡ï¼Œä¹Ÿå°±æ˜¯ç›¸å¯¹äºçˆ¶è§†å›¾çš„ä½ç½®)</li>
<li>bounds    (ä»£è¡¨äº†å†…éƒ¨åæ ‡ï¼Œå…¶å‚ç…§çš„æ˜¯è‡ªå·±ï¼Œå·¦ä¸Šè§’çš„å·¦è¾¹æ°¸è¿œæ˜¯{0,0})</li>
<li>center    (ä»£è¡¨äº†ç›¸å¯¹äºçˆ¶å›¾å±‚çš„anchorPointæ‰€åœ¨çš„ä½ç½®ï¼Œè¿™ä¸ªæˆ‘ä»¬åé¢ä¼šä»‹ç»ï¼Œç°åœ¨å°†ä»–æƒ³è±¡æˆä¸­å¿ƒç‚¹å°±è¡Œ)</li>
</ul>
<p>è€Œåœ¨CALayrä¸­ä¹Ÿæœ‰ä¸‰ä¸ªä¸ä¹‹ç›¸å¯¹çš„å±æ€§ï¼š</p>
<ul>
<li>frame</li>
<li>bounds</li>
<li>position</li>
</ul>
<p>ä»–ä»¬ä¸€ä¸€å¯¹åº”</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-3.1.jpeg" alt=""></p>
<p>ä»ä¸Šé¢è¿™å¼ å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œframeçš„å·¦ä¸Šè§’åæ ‡ï¼Œæ˜¯ç›¸å¯¹äºçˆ¶å›¾å±‚çš„ä½ç½®</p>
<p><strong>æ³¨æ„</strong><br>æˆ‘ä»¬é€šå¸¸ä¿®æ”¹è§†å›¾çš„frameã€boundsã€centerå…¶å®éƒ½åªæ˜¯å­˜å–æ–¹æ³•ï¼Œå®è´¨ä¸Šä¿®æ”¹çš„è¿˜æ˜¯ä½äºè§†å›¾ä¸‹çš„CALayerçš„frameã€boundså’Œcenter</p>
<p>åœ¨æˆ‘ä»¬æ—¥å¸¸çš„åšå›¾å±‚å˜æ¢ä¸­ï¼Œç»å¸¸åšä¸€äº›æ—‹è½¬æˆ–è€…ç¼©æ”¾ï¼Œè¿™æ—¶å€™ï¼Œframeå’Œboundsçš„å°±ä¸å†ä¸€è‡´äº†</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-3.2.jpeg" alt=""></p>
<p>åœ¨è¿™å¹…å›¾ä¸­ï¼Œæˆ‘ä»¬å°†å›¾å±‚åšäº†ä¸€ä¸ªæ—‹è½¬ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œframeæ˜¯æ•´ä¸ªå›¾å±‚å æ®çš„å¤–å±‚çš„é‚£ä¸ªå¤§çŸ©å½¢çš„åŒºåŸŸï¼Œè€Œboundsæ˜¯å›¾å±‚çš„å†…éƒ¨åæ ‡ï¼Œæ‰€ä»¥boundsä¾ç„¶æ²¡æœ‰æ”¹å˜</p>
<h3 id="é”šç‚¹"><a href="#é”šç‚¹" class="headerlink" title="é”šç‚¹"></a>é”šç‚¹</h3><p>ä¹‹å‰æˆ‘ä»¬æåˆ°è¿‡anchorPointï¼Œè§†å›¾çš„centerå’Œå›¾å±‚çš„positionå±æ€§ï¼ŒæŒ‡å®šçš„anchorPointç›¸å¯¹äºçˆ¶å›¾å±‚çš„ä½ç½®ã€‚å›¾å±‚çš„anchorPointé€šè¿‡positionæ¥æ§åˆ¶å®ƒçš„frameä½ç½®ï¼Œå…¶å®å°±æ˜¯é€šè¿‡anchorPointæ¥ç§»åŠ¨å›¾å±‚</p>
<p>é»˜è®¤anchorPointä½äºå›¾å±‚çš„ä¸­ç‚¹ï¼Œä½†æ˜¯anchorPointæ˜¯å±æ€§å¹¶æ²¡æœ‰è¢«UIViewæš´éœ²å‡ºæ¥ï¼Œè¿™ä¹Ÿæ˜¯è§†å›¾çš„å±æ€§è¢«å«åšcenterçš„åŸå› ã€‚</p>
<p><strong>æ¥ä¸‹æ¥ï¼Œæˆ‘è¦è®²çš„éƒ½æ˜¯è·Ÿå›¾å±‚ç›¸å…³ï¼Œéœ€è¦æŠ›å¼€è§†å›¾çš„æ¦‚å¿µï¼Œä¸ç„¶ï¼Œå°±æ¯”è¾ƒéš¾ä»¥ç†è§£äº†</strong></p>
<p>å› ä¸ºå›¾å±‚çš„anchorPointå¯ä»¥è¢«ç§»åŠ¨ï¼Œæˆ‘ä»¬ä¹‹å‰è¯´è¿‡å›¾å±‚çš„anchorPointé€šè¿‡positionæ¥æ§åˆ¶å®ƒçš„frameçš„ä½ç½®ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬å°†å›¾å±‚çš„anchorPointç½®äºå›¾å±‚çš„frameçš„å·¦ä¸Šè§’ï¼Œé‚£ä¹ˆå›¾å±‚å°†ä¼šæ€ä¹ˆç§»åŠ¨å‘¢ï¼Œå›¾å±‚å°†ä¼šå‘å³ä¸‹è§’ç§»åŠ¨</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-3.3.jpeg" alt=""></p>
<p>è¿™é‡Œéœ€è¦å¤§å®¶å¥½å¥½ç†è§£ä¸€ä¸‹ï¼Œpositionå±æ€§ä¸ºä»€ä¹ˆæ²¡æœ‰å˜ï¼Œè€Œframeå´æ”¹å˜äº†</p>
<p>anchorPointçš„åæ ‡ ä¹Ÿæ˜¯ä½¿ç”¨çš„ç›¸å¯¹åæ ‡æ¥è¡¨ç¤ºï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šä»–æ˜¯å°äº0æˆ–è€…å¤§äº1ï¼Œæ¥å°†å›¾å±‚å†…å®¹æ”¾åœ¨å›¾å±‚èŒƒå›´ä¹‹å¤–</p>
<p>é‚£æˆ‘ä»¬åœ¨æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å›¾å±‚çš„frameéšæ„æ”¹å˜å›¾å±‚çš„ä½ç½®ï¼Œä¸ºä»€ä¹ˆè¿˜è¦é€šè¿‡anchorPointæ¥æ”¹å˜å›¾å±‚çš„ä½ç½®ï¼Œè€Œä¸”è¿™ä¸ªè¿™ä¹ˆéš¾ä»¥ç†è§£</p>
<p>æˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</p>
<p>æˆ‘ä»¬éœ€è¦æ¨¡æ‹Ÿä¸€ä¸ªé—¹é’Ÿï¼Œé—¹é’Ÿçš„é’Ÿé¢ç”±å››å¼ å›¾ç‰‡ç»„æˆï¼Œä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„å››ä¸ªUIImgaeViewæ¥åŠ è½½ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨contentså±æ€§</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-3.5.jpeg" alt=""></p>
<p>æˆ‘ä»¬ä½¿ç”¨NSTimeræ¥æ›´æ–°é—¹é’Ÿï¼Œä½¿ç”¨è§†å›¾çš„transformå±æ€§æ¥æ—‹è½¬é’Ÿè¡¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (void)viewDidLoad</div><div class="line">&#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    //start timer</div><div class="line">    self.timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(tick) userInfo:nil repeats:YES];</div><div class="line">                  ï¿¼</div><div class="line">    //set initial hand positions</div><div class="line">    [self tick];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//convert time to hours, minutes </div><div class="line"></div><div class="line">NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];</div><div class="line">NSUInteger units = NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;</div><div class="line">NSDateComponents *components = [calendar components:units fromDate:[NSDate date]];</div><div class="line">CGFloat hoursAngle = (components.hour / 12.0) * M_PI * 2.0;</div><div class="line">//calculate hour hand angle //calculate minute hand angle</div><div class="line">CGFloat minsAngle = (components.minute / 60.0) * M_PI * 2.0;</div><div class="line">//calculate second hand angle</div><div class="line">CGFloat secsAngle = (components.second / 60.0) * M_PI * 2.0;</div><div class="line">//rotate hands</div><div class="line">self.hourHand.transform = CGAffineTransformMakeRotation(hoursAngle);</div><div class="line">self.minuteHand.transform = CGAffineTransformMakeRotation(minsAngle);</div><div class="line">self.secondHand.transform = CGAffineTransformMakeRotation(secsAngle);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-3.6.jpeg" alt=""></p>
<p>è¿™æ ·çœ‹èµ·æ¥æœ‰ç‚¹æ€ªï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ˜æ˜¾çš„æ—¶é’ˆåˆ†é’ˆçš„è½¬åŠ¨ï¼Œéƒ½æ˜¯é€šè¿‡ä¸­å¿ƒä½ç½®è½¬åŠ¨ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>å› ä¸ºé»˜è®¤çš„anchorPointåœ¨ä¸­å¿ƒä½ç½®ï¼Œå›¾ç‰‡çš„æ—‹è½¬ï¼Œéƒ½æ˜¯å›´ç»•anchorPointè½¬åŠ¨çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç§»åŠ¨anchorPointçš„ä½ç½®äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">self.secondHand.layer.anchorPoint = CGPointMake(0.5f, 0.9f); </div><div class="line">self.minuteHand.layer.anchorPoint = CGPointMake(0.5f, 0.9f); </div><div class="line">self.hourHand.layer.anchorPoint = CGPointMake(0.5f, 0.9f);</div></pre></td></tr></table></figure>
<p>å°†æ¯ä¸ªæŒ‡é’ˆçš„anchorPointç§»åŠ¨åˆ°éœ€è¦ä»–å›´ç»•æ—‹è½¬çš„ä½ç½®</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-3.7.jpeg" alt=""></p>
<h3 id="åœ†è§’"><a href="#åœ†è§’" class="headerlink" title="åœ†è§’"></a>åœ†è§’</h3><p>åœ†è§’æ˜¯iOSçš„ä¸€ä¸ªæ ‡å¿—æ€§ç¾å­¦æ•ˆæœï¼Œæˆ‘ä»¬æƒ³è¦å®ç°åœ†è§’æ•ˆæœå…¶å®å¾ˆç®€å•</p>
<p>CALayeræœ‰ä¸€ä¸ªå±æ€§å«åšconrnerRadiusæ§åˆ¶ç€å›¾å±‚çš„è§’çš„æ›²ç‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä»–ä¸º0è¡¨ç¤º<br>çŸ©å½¢ï¼Œä½†æ˜¯æˆ‘ä»¬å°†ä»–è®¾ç½®æˆä»»æ„çš„å€¼</p>
<p>æˆ‘ä»¬åœ¨å½“å‰çš„VCä¸­æ·»åŠ ä¸€ä¸ªUIImageView,å¹¶è®¾ç½®ä»–çš„cornerRadiusä¸º20ä¸ªç‚¹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">UIImageView *imagView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;timg&quot;]];</div><div class="line">imagView.frame = CGRectMake(50, 100, 150, 200);</div><div class="line">imagView.layer.cornerRadius = 20;</div><div class="line">[self.view addSubview:imagView];</div></pre></td></tr></table></figure>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-Snip20161119_1.png" alt=""></p>
<p>æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªè§†å›¾å¹¶æ²¡æœ‰æ˜¾ç¤ºå‡ºåœ†è§’ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸º</p>
<p><strong>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ›²ç‡å€¼åªå½±å“èƒŒæ™¯é¢œè‰²è€Œä¸å½±å“èƒŒæ™¯å›¾ç‰‡æˆ–æ˜¯å­å›¾å±‚</strong></p>
<p>ä¸è¿‡ï¼Œå¦‚æœæˆ‘ä»¬å°†masksToBoundsè®¾ç½®ä¸ºyesï¼Œé‚£ä¹ˆå›¾å±‚é‡Œé¢çš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè¢«æˆªå–</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">imagView.layer.masksToBounds = YES;</div></pre></td></tr></table></figure>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-070020.jpg" alt=""></p>
<p>è¿™æ ·æ•ˆæœå°±å‡ºæ¥äº†</p>
<p>å†æ¥è¯•ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªå›¾å±‚çš„å·¦ä¸Šè§’åŠ ä¸Šä¸€ä¸ªè¶…å‡ºäº†å›¾ç‰‡è¾¹ç•Œçš„ä¸€ä¸ªview</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">UIImageView *imagView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;timg&quot;]];</div><div class="line">imagView.frame = CGRectMake(50, 100, 150, 200);</div><div class="line">//    imagView.layer.masksToBounds = YES;</div><div class="line">imagView.layer.cornerRadius = 20;</div><div class="line">[self.view addSubview:imagView];</div><div class="line">    </div><div class="line">UIView *view = [[UIView alloc] initWithFrame:CGRectMake(-10, -10, 20, 20)];</div><div class="line">view.backgroundColor = [UIColor redColor];</div><div class="line">[imagView addSubview:view];</div></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬æœªå°†å›¾å±‚çš„masksToBoundsè®¾ç½®ä¸ºyesï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾—åˆ°çš„æ•ˆæœæ˜¯è¿™æ ·çš„</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-070343.jpg" alt=""></p>
<p>æˆ‘ä»¬ä¹‹å‰è®²è¿‡ï¼Œä¸ç®¡æ˜¯å›¾å±‚è¿˜æ˜¯è§†å›¾ï¼Œéƒ½ä¼šé»˜è®¤æ¸²æŸ“è¶…å‡ºçˆ¶å›¾å±‚çš„è§†å›¾æˆ–è€…å›¾å±‚</p>
<p>å¦‚æœæˆ‘ä»¬å°†masksToBoundsè®¾ç½®æˆäº†yesï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¹‹å‰è®²çš„ï¼Œè¿™ä¸ªçº¢è‰²çš„åŒºåŸŸåº”è¯¥ä¼šè¢«è£å‰ªï¼Œé‚£æˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœ</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-070514.jpg" alt=""></p>
<p>è¿™æ ·å°±å®Œå…¨å°†å›¾å±‚è£å‰ª</p>
<h3 id="å›¾å±‚è¾¹æ¡†"><a href="#å›¾å±‚è¾¹æ¡†" class="headerlink" title="å›¾å±‚è¾¹æ¡†"></a>å›¾å±‚è¾¹æ¡†</h3><p>CALayerè¿˜æœ‰ä¸¤ä¸ªéå¸¸æœ‰ç”¨çš„å±æ€§ï¼ŒborderWidthå’ŒborderColorï¼Œè¿™ä¸¤ä¸ªå¯ä»¥ç”¨æ¥è®¾ç½®å›¾å±‚è¾¹çš„æ ·å¼</p>
<p>æˆ‘ä»¬è®¾ç½®ä¸€ä¸‹å›¾ç‰‡çš„è¾¹æ¡†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">UIImageView *imagView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;timg&quot;]];</div><div class="line">imagView.frame = CGRectMake(50, 100, 150, 200);</div><div class="line">//    imagView.layer.masksToBounds = YES;</div><div class="line">imagView.layer.cornerRadius = 20;</div><div class="line">[self.view addSubview:imagView];</div><div class="line">    </div><div class="line">UIView *view = [[UIView alloc] initWithFrame:CGRectMake(-10, -10, 20, 20)];</div><div class="line">view.backgroundColor = [UIColor redColor];</div><div class="line">[imagView addSubview:view];</div><div class="line">    </div><div class="line">imagView.layer.borderColor = [UIColor greenColor].CGColor;</div><div class="line">imagView.layer.borderWidth = 4;</div></pre></td></tr></table></figure>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-070912.jpg" alt=""></p>
<p>å¤§å®¶ä¸è¦å¥‡æ€ªï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬çš„è¾¹æ¡†ä¼šæ˜¯è¿™æ ·çš„ï¼Œé‚£æ˜¯å› ä¸ºå›¾å±‚çš„è¾¹æ¡†æ˜¯è·Ÿç€è¾¹ç•Œèµ°çš„ï¼Œå’Œå›¾å±‚çš„å†…å®¹å¹¶ä¸ç›¸å…³ï¼Œæˆ‘ä»¬ä¹‹å‰è®¾ç½®äº†å›¾å±‚çš„åœ†è§’ï¼Œé‚£ä¹ˆå›¾å±‚çš„è¾¹æ¡†å°±å·²ç»æˆä¸ºäº†æœ‰åœ†è§’çš„ï¼Œä½†æ˜¯å›¾å±‚å†…å®¹ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰è®¾ç½®masksToBoundsï¼Œæ‰€ä»¥å›¾å±‚çš„å†…å®¹æ²¡æœ‰è¢«è£å‰ª</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-071146.jpg" alt=""></p>
<p>è®¾ç½®ä¸€ä¸‹masksToBoundså°±å¯ä»¥äº†</p>
<p><strong>æ‰€ä»¥è®¾ç½®åœ†è§’çš„æ—¶å€™ä¸è¦å¿˜è®°äº†masksToBoundså±æ€§</strong></p>
<h3 id="é˜´å½±"><a href="#é˜´å½±" class="headerlink" title="é˜´å½±"></a>é˜´å½±</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä»‹ç»é˜´å½±ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡shadowOpacityæ¥è®¾ç½®å›¾å±‚çš„é˜´å½±ï¼Œ<strong><em>shadowOpacityæ˜¯ä¸€ä¸ªå¿…é¡»åœ¨0.0ï¼ˆä¸å¯è§ï¼‰å’Œ1.0ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰ä¹‹é—´çš„æµ®ç‚¹æ•°</em></strong></p>
<p>å¦‚æœæˆ‘ä»¬è¦æ”¹å˜é˜´å½±çš„è¡¨ç°ï¼Œæœ‰ä¸‰ä¸ªå±æ€§ï¼Œå¯ä»¥é€šè¿‡ä»–ä»¬æ¥æ”¹å˜é˜´å½±çš„è¡¨ç°</p>
<ul>
<li>shadowColor</li>
<li>shadowOffset</li>
<li>shadowRadius</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">UIImageView *imagView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;1&quot;]];</div><div class="line">imagView.frame = CGRectMake(50, 100, 150, 200);</div><div class="line">[self.view addSubview:imagView];</div><div class="line">    </div><div class="line">imagView.layer.shadowColor = [UIColor redColor].CGColor;</div><div class="line">imagView.layer.shadowOffset = CGSizeMake(10, 20);</div><div class="line">imagView.layer.shadowRadius = 10;</div><div class="line">imagView.layer.shadowOpacity = 0.5;</div></pre></td></tr></table></figure>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-19-072737.jpg" alt=""></p>
<p><strong>shadowColor</strong>è‚¯å®šæ˜¯æ§åˆ¶é˜´å½±é¢œè‰²çš„ï¼Œè¿™ä¸ªä¸ç”¨è®²<br><strong>shadowOffset</strong>æ§åˆ¶ç€é˜´å½±çš„æ–¹å‘å’Œè·ç¦»ï¼Œä»–æ˜¯ä¸€ä¸ªCGSizeï¼Œå®½åº¦æ§åˆ¶è¿™é˜´å½±æ¨ªå‘çš„ä½ç§»ï¼Œé«˜åº¦æ§åˆ¶ç€çºµå‘çš„ä½ç§»<br><strong>shadowRadius</strong>æ§åˆ¶ç€é˜´å½±çš„æ¨¡ç³Šåº¦</p>
<p>æˆ‘ä»¬é€šè¿‡é˜´å½±å¯ä»¥å°†æˆ‘ä»¬çš„è§†å›¾çš„ç«‹ä½“æ„Ÿå¢å¼º</p>
]]></content>
    
    <summary type="html">
    
      ä¹‹å‰æˆ‘ä»¬ä»‹ç»äº†CALayerçš„ä¸€äº›é‡è¦çš„å±æ€§ï¼Œåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘å°†ç»§ç»­ä»‹ç»å…³äºCALayerçš„ä¸€äº›å±æ€§çš„ä½¿ç”¨ï¼Œåœ¨æœ¬ç« ç»“æŸä¹‹åï¼Œæˆ‘ä»¬å°†æ¥å®ç°ä¸€äº›åŠ¨ç”»æ•ˆæœ
    
    </summary>
    
      <category term="iOSåŠ¨ç”»åŸºç¡€" scheme="http://ppsheep.com/all-categories/iOS%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="åŠ¨ç”»åŸºç¡€" scheme="http://ppsheep.com/all-tags/%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>iOS sqliteç®€å•å°è£…ä½¿ç”¨</title>
    <link href="http://ppsheep.com/2016/11/17/iOS-sqlite%E7%AE%80%E5%8D%95%E5%B0%81%E8%A3%85%E4%BD%BF%E7%94%A8/"/>
    <id>http://ppsheep.com/2016/11/17/iOS-sqliteç®€å•å°è£…ä½¿ç”¨/</id>
    <published>2016-11-17T08:38:49.000Z</published>
    <updated>2016-11-17T09:04:28.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œæˆ‘ä¼šå®šæœŸåˆ†äº«ä¸€äº›æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•å’Œä¸€äº›iOSå®ç”¨çš„æŠ€å·§ï¼Œç°é˜¶æ®µä¸»è¦æ˜¯æ•´ç†å‡ºä¸€äº›åŸºç¡€çš„çŸ¥è¯†è®°å½•ä¸‹æ¥</strong></p>
<div align="middle"><br>    <image src="http://ac-mhke0kuv.clouddn.com/830a4ead8294ceff5160.jpg"></image><br></div>

<p>æ–‡ç« ä¹Ÿä¼šåŒæ­¥æ›´æ–°åˆ°æˆ‘çš„åšå®¢ï¼š<br><a href="http://ppsheep.com">http://ppsheep.com</a></p>
<h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹æˆ‘çš„é¡¹ç›®ç»“æ„</p>
<p><img src="http://ww2.sinaimg.cn/large/006tNc79jw1f9v75zwsfkj307d0gv0tu.jpg" alt=""></p>
<h3 id="å°è£…æ€è·¯"><a href="#å°è£…æ€è·¯" class="headerlink" title="å°è£…æ€è·¯"></a>å°è£…æ€è·¯</h3><p>æ•°æ®å±‚çš„åŸºæœ¬å°è£…æ€è·¯æ˜¯ï¼š</p>
<ul>
<li>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®åº“ç®¡ç†ç±»ï¼Œè¿™ä¸ªç®¡ç†ç±»ä¸»è¦æ˜¯ç®¡ç†æ•°æ®åº“æ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªæ•°æ®åº“æ–‡ä»¶ï¼Œéœ€è¦è¿™æ ·ä¸€ä¸ªç®¡ç†ç±»</li>
<li>ä¸€ä¸ªåŸºç¡€çš„BaseDBStoreï¼Œå…¶ä¸­ä¸»è¦æ˜¯æˆ‘ä»¬éœ€è¦æ‰§è¡Œçš„ä¸€äº›åŸºæœ¬çš„æ“ä½œï¼ŒåŒ…æ‹¬å¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼Œç„¶åæ¯ä¸ªæ¨¡å—éœ€è¦ä½¿ç”¨åˆ°æ•°æ®åº“çš„æ—¶å€™ï¼Œä»–ä»¬æœ‰å•ç‹¬çš„å­æ¨¡å—ï¼Œæ˜¯ä»Baseç»§æ‰¿è€Œæ¥</li>
</ul>
<p>æ•°æ®åº“ç®¡ç†ç±»çš„å®ç°ä»£ç :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line">#import &quot;FMDB.h&quot;</div><div class="line"></div><div class="line">@interface PPSDBManager : NSObject</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> *  DBé˜Ÿåˆ—  è¿˜å¯ä»¥å®šä¹‰å…¶ä»–çš„æ•°æ®åº“ è¿™é‡Œåªæ˜¯ä¸€ä¸ªç¤ºä¾‹</div><div class="line"> */</div><div class="line">@property (nonatomic, strong) FMDatabaseQueue *commonQueue;</div><div class="line"></div><div class="line">+ (PPSDBManager *)sharedInstance;</div><div class="line"></div><div class="line">/**</div><div class="line"> åˆ›å»ºæ•°æ®åº“æ–‡ä»¶</div><div class="line"></div><div class="line"> @param userId ä¼ å…¥ç”¨æˆ·id</div><div class="line"> @return æ•°æ®åº“æ–‡ä»¶åœ°å€</div><div class="line"> */</div><div class="line">+ (NSString *)dbPath:(NSString *)userId;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>è¿™é‡ŒåŠ å…¥äº†ç”¨æˆ·æ€æƒ³ï¼Œå³æ¯ä¸ªç”¨æˆ·æ˜¯ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶ï¼Œè¿™æ ·å¥½åŒºåˆ†ï¼Œè€Œä¸”æ¯ä¸ªç”¨æˆ·å¯ä»¥æ‹¥æœ‰ä¸åŒçš„æ•°æ®åº“æ–‡ä»¶ï¼Œè¿™é‡Œåªåˆ›å»ºäº†ä¸€ä¸ªï¼Œå½“ç„¶è¿˜å¯ä»¥åˆ›å»ºå¾ˆå¤šä¸ª</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">#import &quot;PPSDBManager.h&quot;</div><div class="line"></div><div class="line">static PPSDBManager *manager;</div><div class="line">@implementation PPSDBManager</div><div class="line"></div><div class="line">+(PPSDBManager *)sharedInstance&#123;</div><div class="line">    static dispatch_once_t onceToken;</div><div class="line">    dispatch_once(&amp;onceToken, ^&#123;</div><div class="line">        NSString *userID = @&quot;ppsheep&quot;;//éšä¾¿å†™äº†ä¸€ä¸ªid</div><div class="line">        manager = [[PPSDBManager alloc] initWithUserId:userID];</div><div class="line">    &#125;);</div><div class="line">    return manager;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> ä¸€èˆ¬çš„ï¼Œå¦‚æœæœ‰ç”¨æˆ·çš„APPï¼Œè¿™é‡Œå°±å¯ä»¥ä¼ å…¥å½“å‰ç”¨æˆ·çš„id ç”¨ä»¥åŒºåˆ†æ•°æ®åº“</div><div class="line"> è¿™é‡Œæˆ‘å°±éšä¾¿å†™äº†</div><div class="line"> @param userId ç”¨æˆ·id</div><div class="line"> @return å®ä¾‹</div><div class="line"> */</div><div class="line">- (instancetype)initWithUserId:(NSString *)userId&#123;</div><div class="line">    if (self = [super init]) &#123;</div><div class="line">        NSString *commonQueuePath = [PPSDBManager dbPath:userId];</div><div class="line">        self.commonQueue = [FMDatabaseQueue databaseQueueWithPath:commonQueuePath];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> æ•°æ®åº“æ–‡ä»¶åœ°å€</div><div class="line"></div><div class="line"> @return åœ°å€</div><div class="line"> */</div><div class="line">+ (NSString *)dbPath: (NSString *)userId&#123;</div><div class="line">     NSString *path = [NSString stringWithFormat:@&quot;%@/User/%@/Setting/DB/&quot;, NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0], userId];</div><div class="line">    if (![[NSFileManager defaultManager] fileExistsAtPath:path]) &#123;</div><div class="line">        //åˆ›å»ºæ•°æ®åº“æ–‡ä»¶</div><div class="line">        NSError *error;</div><div class="line">        [[NSFileManager defaultManager] createDirectoryAtPath:path withIntermediateDirectories:YES attributes:nil error:&amp;error];</div><div class="line">        if (error) &#123;</div><div class="line">            NSLog(@&quot;åˆ›å»ºæ•°æ®åº“æ–‡ä»¶å¤±è´¥ï¼š%@&quot;,path);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return [path stringByAppendingString:@&quot;common.sqlite3&quot;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>BaseStore</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line">#import &quot;PPSDBManager.h&quot;</div><div class="line"></div><div class="line">@interface PPSDBBaseStore : NSObject</div><div class="line"></div><div class="line"></div><div class="line">// æ•°æ®åº“æ“ä½œé˜Ÿåˆ—(ä»NADBManagerä¸­è·å–ï¼Œé»˜è®¤ä½¿ç”¨commonQueue)</div><div class="line">@property (nonatomic, weak) FMDatabaseQueue *dbQueue;</div><div class="line"></div><div class="line">/**</div><div class="line"> *  è¡¨åˆ›å»º</div><div class="line"> */</div><div class="line">- (BOOL)createTable:(NSString*)tableName withSQL:(NSString*)sqlString;</div><div class="line"></div><div class="line">/*</div><div class="line"> *  æ‰§è¡Œå¸¦æ•°ç»„å‚æ•°çš„sqlè¯­å¥ (å¢ï¼Œåˆ ï¼Œæ”¹)</div><div class="line"> */</div><div class="line">-(BOOL)excuteSQL:(NSString*)sqlString withArrParameter:(NSArray*)arrParameter;</div><div class="line"></div><div class="line">/*</div><div class="line"> *  æ‰§è¡Œå¸¦å­—å…¸å‚æ•°çš„sqlè¯­å¥ (å¢ï¼Œåˆ ï¼Œæ”¹)</div><div class="line"> */</div><div class="line">-(BOOL)excuteSQL:(NSString*)sqlString withDicParameter:(NSDictionary*)dicParameter;</div><div class="line"></div><div class="line">/*</div><div class="line"> *  æ‰§è¡Œæ ¼å¼åŒ–çš„sqlè¯­å¥ (å¢ï¼Œåˆ ï¼Œæ”¹)</div><div class="line"> */</div><div class="line">- (BOOL)excuteSQL:(NSString *)sqlString,...;</div><div class="line"></div><div class="line">/**</div><div class="line"> *  æ‰§è¡ŒæŸ¥è¯¢æŒ‡ä»¤</div><div class="line"> */</div><div class="line">- (void)excuteQuerySQL:(NSString*)sqlStr resultBlock:(void (^)(FMResultSet * rsSet))resultBlock;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>Baseå®šä¹‰çš„ä¸€äº›åŸºç¡€çš„æ“ä½œï¼Œæ³¨é‡Šéƒ½å†™çš„å¾ˆæ¸…æ¥šï¼Œæˆ‘å°±ä¸ä¸€ä¸€è§£é‡Šäº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//æŸ¥è¯¢è¯­å¥</div><div class="line">- (BOOL)excuteSQL:(NSString *)sqlString,...</div><div class="line">&#123;</div><div class="line">    __block BOOL ok = NO;</div><div class="line">    if (self.dbQueue) &#123;</div><div class="line">        va_list args;</div><div class="line">        va_list *p_args;</div><div class="line">        p_args = &amp;args;</div><div class="line">        va_start(args, sqlString);</div><div class="line">        [self.dbQueue inDatabase:^(FMDatabase *db) &#123;</div><div class="line">            ok = [db executeUpdate:sqlString withVAList:*p_args];</div><div class="line">        &#125;];</div><div class="line">        va_end(args);</div><div class="line">    &#125;</div><div class="line">    return ok;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¸¦å‚æ•°çš„æŸ¥è¯¢æ–¹æ³•:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- (BOOL)excuteSQL:(NSString *)sqlString withArrParameter:(NSArray *)arrParameter</div><div class="line">&#123;</div><div class="line">    __block BOOL ok = NO;</div><div class="line">    if (self.dbQueue) &#123;</div><div class="line">        [self.dbQueue inDatabase:^(FMDatabase *db) &#123;</div><div class="line">            ok = [db executeUpdate:sqlString withArgumentsInArray:arrParameter];</div><div class="line">        &#125;];</div><div class="line">    &#125;</div><div class="line">    return ok;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Baseé‡Œé¢çš„æ–¹æ³•ï¼Œéƒ½æ˜¯è°ƒç”¨FMDB</p>
<h3 id="Useræ¨¡å—"><a href="#Useræ¨¡å—" class="headerlink" title="Useræ¨¡å—"></a>Useræ¨¡å—</h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªUseræ¨¡å—ï¼Œéœ€è¦å®ç°ç”¨æˆ·çš„å­˜å–ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè£…SQLçš„æ–‡ä»¶ï¼Œåˆ†ç¦»SQL</p>
<p>PPSDBUserSQL.h</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">#ifndef PPSDBUserSQL_h</div><div class="line">#define PPSDBUserSQL_h</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">#define     USER_TABLE_NAME              @&quot;user&quot;</div><div class="line">/**</div><div class="line"> *  å»ºè¡¨</div><div class="line"> *</div><div class="line"> *  @param uid   å½“å‰ç”¨æˆ·Corpé‚®ç®±å‰ç¼€</div><div class="line"> *  @param fid    å¥½å‹Corpé‚®ç®±å‰ç¼€</div><div class="line"> *  @param email   Corpé‚®ç®±</div><div class="line"> *</div><div class="line"> *  @return</div><div class="line"> */</div><div class="line">#define     SQL_CREATE_USER_TABLE        </div><div class="line">			@&quot;CREATE TABLE IF NOT EXISTS %@(\</div><div class="line">                    uid TEXT,\</div><div class="line">                    name TEXT,\</div><div class="line">                    email TEXT,\</div><div class="line">                    phoneNum TEXT,\</div><div class="line">                    ext1 TEXT,\</div><div class="line">                    ext2 TEXT,\</div><div class="line">                    ext3 TEXT,\</div><div class="line">                    ext4 INTEGER DEFAULT (0),\</div><div class="line">                    ext5 INTEGER DEFAULT (0),\</div><div class="line">                    ext6 INTEGER DEFAULT (0),\</div><div class="line">                    PRIMARY KEY(uid))&quot;</div><div class="line"></div><div class="line">#define     SQL_ADD_USER      @&quot;INSERT OR REPLACE INTO %@ ( uid, name, email, phoneNum, ext1, ext2, ext3, ext4, ext5, ext6) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)&quot;</div><div class="line"></div><div class="line">#define     SQL_SELECT_USER   @&quot;SELECT * FROM %@ WHERE uid = &apos;%@&apos;&quot;</div><div class="line"></div><div class="line">#define     SQL_GET_ALL_USER   @&quot;SELECT * FROM %@ &quot;</div><div class="line"></div><div class="line">#define     SQL_DELETE_USER    @&quot;DELETE FROM %@ WHERE uid = &apos;%@&apos;&quot;</div><div class="line"></div><div class="line">#define     SQL_UPDATE_USER    @&quot;UPDATE %@ SET name = ?, email = ?, phoneNum = ? WHERE uid = &apos;%@&apos; &quot;</div><div class="line"></div><div class="line"></div><div class="line">#endif /* PPSDBUserSQL_h */</div></pre></td></tr></table></figure>
<p>ç„¶åæ˜¯å…·ä½“çš„æ“ä½œUserçš„Store åŒ…å«äº†åŸºæœ¬çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">#import &quot;PPSDBBaseStore.h&quot;</div><div class="line"></div><div class="line">@class PPSUser;</div><div class="line">@interface PPSDBUserStore : PPSDBBaseStore</div><div class="line"></div><div class="line">//æ”¹</div><div class="line">- (BOOL)updateUserData:(NSArray *)users;</div><div class="line"></div><div class="line">//å¢</div><div class="line">- (BOOL)addUser:(NSArray *)users;</div><div class="line"></div><div class="line">//æŸ¥</div><div class="line">- (NSMutableArray *)usersByUserIds:(NSArray *)userIds;</div><div class="line"></div><div class="line">//åˆ </div><div class="line">- (BOOL)deleteUserByUid:(NSArray *)userIds;</div><div class="line"></div><div class="line">- (NSArray *)allUsers;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>æ‰¹é‡æŸ¥è¯¢ç”¨æˆ·ï¼Œä¼ å…¥idæ•°ç»„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">-(NSMutableArray *)usersByUserIds:(NSArray *)userIds&#123;</div><div class="line">    NSArray *ids = [userIds copy];</div><div class="line">    __block NSMutableArray *data = [[NSMutableArray alloc] init];</div><div class="line">    </div><div class="line">    for (NSString *userId in ids) &#123;</div><div class="line">      NSString *sqlString = [NSString stringWithFormat:SQL_SELECT_USER, USER_TABLE_NAME, userId];</div><div class="line">        [self excuteQuerySQL:sqlString resultBlock:^(FMResultSet *retSet) &#123;</div><div class="line">            while ([retSet next]) &#123;</div><div class="line">                NSDictionary *dic = @&#123;</div><div class="line">                                      @&quot;userId&quot; : [retSet stringForColumn:@&quot;uid&quot;],</div><div class="line">                                      @&quot;email&quot; : [retSet stringForColumn:@&quot;email&quot;],</div><div class="line">                                      @&quot;name&quot; : [retSet stringForColumn:@&quot;name&quot;],</div><div class="line">                                      @&quot;phoneNum&quot; : [retSet stringForColumn:@&quot;phoneNum&quot;],</div><div class="line">                                      &#125;;</div><div class="line">                PPSUser *user = [[PPSUser alloc] initWithDic:dic];</div><div class="line">                [data addObject:user];</div><div class="line">            &#125;</div><div class="line">            [retSet close];</div><div class="line">        &#125;];</div><div class="line">    &#125;</div><div class="line">    return data;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ‰¹é‡æ›´æ–°ç”¨æˆ·ï¼Œä¼ å…¥ç”¨æˆ·æ•°ç»„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">-(BOOL)updateUserData:(NSArray *)users&#123;</div><div class="line">    NSArray *userCopy = [users copy];</div><div class="line">    BOOL ok = YES;</div><div class="line">    for (PPSUser *user in userCopy) &#123;</div><div class="line">        NSString *sql = [NSString stringWithFormat:SQL_UPDATE_USER, USER_TABLE_NAME, user.userId];</div><div class="line">        NSArray *arrPara = [NSArray arrayWithObjects:</div><div class="line">                            PPSNoNilString(user.name),</div><div class="line">                            PPSNoNilString(user.email),</div><div class="line">                            PPSNoNilString(user.phoneNum),</div><div class="line">                            @&quot;&quot;, @&quot;&quot;, @&quot;&quot;, @0, @0, @0,  nil];</div><div class="line">        ok = [self excuteSQL:sql withArrParameter:arrPara];</div><div class="line">    &#125;</div><div class="line">    return ok;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘å°±ç›´æ¥åœ¨ViewControllerä¸­å†™äº†ï¼Œåœ¨çœŸæ­£çš„å¼€å‘ä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šåœ¨ç®¡ç†ç±»ä¸­è¿›è¡Œæ•°æ®åº“æ“ä½œ</p>
<p>æ‡’åŠ è½½ä¸€ä¸ªç”¨æˆ·æ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-(PPSDBUserStore *)store&#123;</div><div class="line">    if (!_store) &#123;</div><div class="line">        _store = [[PPSDBUserStore alloc] init];</div><div class="line">    &#125;</div><div class="line">    return _store;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åˆå§‹åŒ–ç”¨æˆ·ï¼Œç›´æ¥æ’å…¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">- (void)initUsers&#123;</div><div class="line">    NSMutableArray *arr = [NSMutableArray array];</div><div class="line">    for (int i=0; i&lt;10; i++) &#123;</div><div class="line">        PPSUser *user = [[PPSUser alloc] init];</div><div class="line">        user.userId = [NSString stringWithFormat:@&quot;%ld_userId&quot;,(long)i];</div><div class="line">        user.name = [NSString stringWithFormat:@&quot;%ld_userName&quot;,(long)i];</div><div class="line">        user.email = [NSString stringWithFormat:@&quot;%ld_email&quot;,(long)i];</div><div class="line">        user.phoneNum = [NSString stringWithFormat:@&quot;%ld_phoneNum&quot;,(long)i];</div><div class="line">        [arr addObject:user];</div><div class="line">    &#125;</div><div class="line">    [self.store addUser:arr];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘å°±ä¸å†è´´ä»£ç å‡ºæ¥äº†ï¼Œé¡¹ç›®å·¥ç¨‹ï¼Œæˆ‘æ”¾åœ¨äº†</p>
<p><a href="https://github.com/yangqian111/blog/tree/master/iOS%20sqliteä½¿ç”¨" target="_blank" rel="external">https://github.com/yangqian111/blog/tree/master/iOS%20sqliteä½¿ç”¨</a></p>
]]></content>
    
    <summary type="html">
    
      sqliteå‡ ä¹åœ¨æ¯ä¸ªAPPç¼–ç éƒ½ä¼šæ¶‰åŠåˆ°ï¼Œå®ƒæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®åº“ï¼Œåœ¨æ‰‹æœºç«¯ä½¿ç”¨èµ·æ¥æå…¶æ–¹ä¾¿ï¼Œå› ä¸ºSQLiteåŸç”Ÿçš„æ¥å£éƒ½æ˜¯ä½¿ç”¨Cå†™çš„ï¼Œä¸æ˜¯ç‰¹åˆ«å‹å¥½ï¼Œæ‰€æœ‰æœ‰ä¸€ä¸ªå¼ºå¤§åº“å°±å‡ºç°äº†FMDBï¼Œä»Šå¤©æˆ‘ä»¬åŸºäºFMDBæ¥è¿›è¡ŒäºŒæ¬¡å°è£…
    
    </summary>
    
      <category term="sqliteæ•°æ®åº“" scheme="http://ppsheep.com/all-categories/sqlite%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="sqlite" scheme="http://ppsheep.com/all-tags/sqlite/"/>
    
  </entry>
  
  <entry>
    <title>iOSæ¯ä¸ªViewControllerä¸€ä¸ªNavigationBar</title>
    <link href="http://ppsheep.com/2016/11/17/iOS%E6%AF%8F%E4%B8%AAViewController%E4%B8%80%E4%B8%AANavigationBar/"/>
    <id>http://ppsheep.com/2016/11/17/iOSæ¯ä¸ªViewControllerä¸€ä¸ªNavigationBar/</id>
    <published>2016-11-17T05:03:38.000Z</published>
    <updated>2016-11-17T06:23:09.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œæˆ‘ä¼šå®šæœŸåˆ†äº«ä¸€äº›æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•å’Œä¸€äº›iOSå®ç”¨çš„æŠ€å·§ï¼Œç°é˜¶æ®µä¸»è¦æ˜¯æ•´ç†å‡ºä¸€äº›åŸºç¡€çš„çŸ¥è¯†è®°å½•ä¸‹æ¥</strong></p>
<div align="middle"><br>    <image src="http://ac-mhke0kuv.clouddn.com/830a4ead8294ceff5160.jpg"></image><br></div>

<p>æ–‡ç« ä¹Ÿä¼šåŒæ­¥æ›´æ–°åˆ°æˆ‘çš„åšå®¢ï¼š<br><a href="http://ppsheep.com">http://ppsheep.com</a></p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å·²ç»æœ‰çš„ä¸€äº›APPä½¿ç”¨çš„è¿™ç§æ•ˆæœ</p>
<p>è¿™æ˜¯å¤©çŒ«APPçš„æ•ˆæœï¼Œæ³¨æ„è§‚å¯Ÿä»–çš„å¯¼èˆªæ </p>
<p><img src="http://i.imgur.com/Hz7Ixkj.gif" alt=""></p>
<p>è¿™æ˜¯ç½‘æ˜“æ–°é—»ï¼Œæ³¨æ„çœ‹å¯¼èˆªæ </p>
<p><img src="http://i.imgur.com/JClX4Z3.gif" alt=""></p>
<p>è¶Šæ¥è¶Šå¤šçš„APPé‡‡ç”¨è¿™ç§æ ·å¼æ¥æ§åˆ¶å¯¼èˆªæ çš„ä¸åŒé£æ ¼ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥å®ç°è¿™ä¸€æ•ˆæœã€‚</p>
<p>è¿™é‡Œéœ€è¦ä½¿ç”¨åˆ°ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“</p>
<p><a href="https://github.com/rickytan/RTRootNavigationController" target="_blank" rel="external">https://github.com/rickytan/RTRootNavigationController</a></p>
<p>å€ŸåŠ©è¿™ä¸ªåº“æˆ‘ä»¬èƒ½å¤Ÿè½»æ¾å®ç°è¿™ä¸€æ•ˆæœ</p>
<p>æ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨cocoapodsæ¥é›†æˆè¿™ä¸ªç¬¬ä¸‰æ–¹åº“</p>
<h3 id="é›†æˆRTRootNavigationController"><a href="#é›†æˆRTRootNavigationController" class="headerlink" title="é›†æˆRTRootNavigationController"></a>é›†æˆRTRootNavigationController</h3><p>podfile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">workspace â€˜iOSæ¯ä¸ªVCå•ç‹¬çš„ä¸€ä¸ªå¯¼èˆªæ .xcworkspaceâ€™</div><div class="line"></div><div class="line">project â€˜iOSæ¯ä¸ªVCå•ç‹¬çš„ä¸€ä¸ªå¯¼èˆªæ .xcodeprojâ€™</div><div class="line"></div><div class="line">platform :ios, &apos;8.0&apos;</div><div class="line"></div><div class="line">target &apos;iOSæ¯ä¸ªVCå•ç‹¬çš„ä¸€ä¸ªå¯¼èˆªæ &apos; do </div><div class="line"></div><div class="line">pod â€˜RTRootNavigationControllerâ€™</div><div class="line"></div><div class="line">end</div></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨RTRootNavigationControllerå½“åšå½“å‰çš„rootController"><a href="#ä½¿ç”¨RTRootNavigationControllerå½“åšå½“å‰çš„rootController" class="headerlink" title="ä½¿ç”¨RTRootNavigationControllerå½“åšå½“å‰çš„rootController"></a>ä½¿ç”¨RTRootNavigationControllerå½“åšå½“å‰çš„rootController</h3><h4 id="åˆ›å»ºBaseViewController"><a href="#åˆ›å»ºBaseViewController" class="headerlink" title="åˆ›å»ºBaseViewController"></a>åˆ›å»ºBaseViewController</h4><p>æˆ‘è¿™é‡Œæ–°å»ºä¸€ä¸ªBaseViewController ä¸»è¦æ˜¯ä¸ºäº†å¼•å…¥RTRootNavigationControllerï¼Œå½“ç„¶å¦‚æœæ˜¯OCé¡¹ç›®çš„è¯ï¼Œå¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ªPCHæ–‡ä»¶ï¼Œç›´æ¥å…¨å±€å¼•ç”¨ä¹Ÿè¡Œï¼Œä¸è¿‡æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šæœ‰ä¸€ä¸ªåŸºç±»çš„ViewControllerï¼Œåœ¨è¿™ä¸ªåŸºç±»ä¸­ï¼Œæ²¡æœ‰åšä»»ä½•æ“ä½œï¼Œåªæ˜¯å¼•ç”¨äº†ä¸€ä¸ªRTRootNavigationController</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#import &quot;RTRootNavigationController.h&quot;</div><div class="line"></div><div class="line">@interface BaseViewController : UIViewController</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<h4 id="è®¾ç½®æ ¹æ§åˆ¶å™¨"><a href="#è®¾ç½®æ ¹æ§åˆ¶å™¨" class="headerlink" title="è®¾ç½®æ ¹æ§åˆ¶å™¨"></a>è®¾ç½®æ ¹æ§åˆ¶å™¨</h4><p>åœ¨Appdelegateä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„windowçš„rootcontrollerè®¾ç½®ä¸ºRTRootNavigationController</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];</div><div class="line">ViewController *viewController = [[ViewController alloc] init];</div><div class="line">RTRootNavigationController *rootViewController1 = [[RTRootNavigationController alloc] initWithRootViewController:viewController];</div><div class="line">_window.rootViewController = rootViewController1;</div><div class="line">_window.backgroundColor = [UIColor whiteColor];</div><div class="line">[_window makeKeyAndVisible];</div><div class="line">return YES;</div></pre></td></tr></table></figure>
<p>åœ¨ViewControllerä¸­ï¼Œæˆ‘ä»¬éœ€è¦pushå‡ºå»ä¸€ä¸ªvcçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è¿™æ ·å®ç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//æ³¨æ„è¿™é‡Œpushçš„æ—¶å€™éœ€è¦ä½¿ç”¨rt_navigation pushå‡ºå»</div><div class="line">[self.rt_navigationController pushViewController:vc1 animated:YES complete:nil];</div></pre></td></tr></table></figure>
<p>çœ‹ä¸€ä¸‹æ•ˆæœ</p>
<p><img src="http://i.imgur.com/L89Z6fk.gif" alt=""></p>
<h4 id="è®¾ç½®è¿”å›NavigationBaræŒ‰é’®"><a href="#è®¾ç½®è¿”å›NavigationBaræŒ‰é’®" class="headerlink" title="è®¾ç½®è¿”å›NavigationBaræŒ‰é’®"></a>è®¾ç½®è¿”å›NavigationBaræŒ‰é’®</h4><p>åœ¨å½“å‰çš„vcä¸­ï¼Œæˆ‘ä»¬è®¾ç½®è¿”å›æŒ‰é’®ï¼Œæˆ–è€…å…¶ä»–çš„æŒ‰é’®ï¼Œä¹Ÿå¾ˆæ–¹ä¾¿</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"> UIButton *btn1 = [UIButton buttonWithType:UIButtonTypeCustom];</div><div class="line">[btn1 addTarget:self action:@selector(leftBar1Clicked) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">[btn1 setTitle:@&quot;è¿”å›1&quot; forState:UIControlStateNormal];</div><div class="line">[btn1 setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];</div><div class="line">[btn1 sizeToFit];</div><div class="line">UIBarButtonItem *item1 = [[UIBarButtonItem alloc] initWithCustomView:btn1];</div><div class="line">    </div><div class="line">UIButton *btn2 = [UIButton buttonWithType:UIButtonTypeCustom];</div><div class="line">[btn2 setTitle:@&quot;è¿”å›2&quot; forState:UIControlStateNormal];</div><div class="line">[btn2 setTitleColor:[UIColor redColor] forState:UIControlStateNormal];</div><div class="line">[btn2 addTarget:self action:@selector(leftBar2Clicked) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">[btn2 sizeToFit];</div><div class="line">UIBarButtonItem *item2 = [[UIBarButtonItem alloc] initWithCustomView:btn2];</div><div class="line"></div><div class="line">self.navigationItem.leftBarButtonItems = @[item1,item2];</div><div class="line">    </div><div class="line">UIButton *btn3 = [UIButton buttonWithType:UIButtonTypeCustom];</div><div class="line">[btn3 setTitle:@&quot;å³é”®&quot; forState:UIControlStateNormal];</div><div class="line">[btn3 setTitleColor:[UIColor redColor] forState:UIControlStateNormal];</div><div class="line">[btn3 addTarget:self action:@selector(rightBarClicked) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">[btn3 sizeToFit];</div><div class="line">UIBarButtonItem *rightItem = [[UIBarButtonItem alloc] initWithCustomView:btn3];</div><div class="line">    </div><div class="line">self.navigationItem.rightBarButtonItem = rightItem;</div><div class="line">    </div><div class="line">[self.view addSubview:label];</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/zOrrJZW.jpg" alt=""></p>
<p>å¤šä¸ªæŒ‰é’®å®šä¹‰ä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„</p>
<p>å¦‚æœåªæ˜¯éœ€è¦ä¸€ä¸ªå·¦è¾¹çš„è¿”å›æŒ‰é’®ï¼Œè¿™ä¸ªæŒ‰é’®éœ€è¦è‡ªå®šä¹‰æ ·å¼ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥åœ¨å½“å‰VCå†²ä¸‹æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> å¦‚æœå¯¹äºè¿”å›äº‹ä»¶ä¸éœ€è¦åšä»»ä½•å¤„ç†ï¼Œ</div><div class="line"> ä½†æ˜¯æœ‰æƒ³è¦è‡ªå®šä¹‰è¿”å›æŒ‰é’®çš„æ ·å¼ï¼Œ</div><div class="line"> å¯ä»¥ç›´æ¥é‡å†™è¿™ä¸ªæ–¹æ³•</div><div class="line"></div><div class="line"> @param target ç›‘å¬å¯¹è±¡</div><div class="line"> @param action è¿”å›äº‹ä»¶</div><div class="line"> @return è‡ªå®šä¹‰çš„è¿”å›æŒ‰é’®</div><div class="line"> */</div><div class="line">-(UIBarButtonItem *)customBackItemWithTarget:(id)target action:(SEL)action&#123;</div><div class="line">    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];</div><div class="line">    [btn setTitle:@&quot;è¿”å›&quot; forState:UIControlStateNormal];</div><div class="line">    [btn setTitleColor:[UIColor redColor] forState:UIControlStateNormal];</div><div class="line">    [btn sizeToFit];</div><div class="line">    [btn addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];</div><div class="line">    UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithCustomView:btn];</div><div class="line">    return item;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·çš„è¯ï¼Œå°±ä¸è¦å»å•ç‹¬è®¾ç½®å·¦ä¸Šè§’çš„è¿”å›æŒ‰é’®äº†</p>
<p><img src="http://i.imgur.com/I5tVOEx.gif" alt=""></p>
<h4 id="è·³åˆ°æœ€å¼€å§‹çš„VC"><a href="#è·³åˆ°æœ€å¼€å§‹çš„VC" class="headerlink" title="è·³åˆ°æœ€å¼€å§‹çš„VC"></a>è·³åˆ°æœ€å¼€å§‹çš„VC</h4><p>åœ¨æˆ‘ä»¬popçš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥popåœ¨æ ˆé¡¶çš„VC</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[self.rt_navigationController popToRootViewControllerAnimated:YES complete:nil];</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/tQ2vyPz.gif" alt=""></p>
<h4 id="pushåˆ°å¦å¤–ä¸€ä¸ªVC-é”€æ¯å½“å‰çš„VC"><a href="#pushåˆ°å¦å¤–ä¸€ä¸ªVC-é”€æ¯å½“å‰çš„VC" class="headerlink" title="pushåˆ°å¦å¤–ä¸€ä¸ªVC é”€æ¯å½“å‰çš„VC"></a>pushåˆ°å¦å¤–ä¸€ä¸ªVC é”€æ¯å½“å‰çš„VC</h4><p>æœ‰æ—¶æˆ‘ä»¬æƒ³è¦å®ç°è¿™æ ·ä¸€ç§æ•ˆæœï¼Œå½“å½“å‰çš„VCpushå‡ºå»è¿‡åï¼Œå¸Œæœ›é”€æ¯å½“å‰çš„VC</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ViewController4 *vc4 = [[ViewController4 alloc] init];</div><div class="line">[self.rt_navigationController pushViewController:vc4 animated:vc4 complete:^(BOOL finished) &#123;</div><div class="line">     [self.rt_navigationController removeViewController:self];</div><div class="line"> &#125;];</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/8ABurCG.gif" alt=""></p>
<h4 id="æ›´æ”¹å¯¼èˆªæ é¢œè‰²"><a href="#æ›´æ”¹å¯¼èˆªæ é¢œè‰²" class="headerlink" title="æ›´æ”¹å¯¼èˆªæ é¢œè‰²"></a>æ›´æ”¹å¯¼èˆªæ é¢œè‰²</h4><p>ä¹‹å‰å¿˜è®°æ›´æ”¹å¯¼èˆªæ çš„é¢œè‰²äº†ï¼Œè¿™é‡Œçœ‹ä¸€ä¸‹ï¼Œæ›´æ”¹å¯¼èˆªæ çš„é¢œè‰²ï¼Œåªéœ€è¦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">self.navigationController.navigationBar.barTintColor = [UIColor greenColor];</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/mFby2bB.gif" alt=""></p>
<p><strong>æ€»ç»“</strong></p>
<p>å¦‚æœä½ çš„APPåœ¨å¯¼èˆªæ æœ‰å¤šç§æ ·å¼çš„è¯ï¼Œä½ å®Œå…¨å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿</p>
<p>æ„Ÿè°¢:<br>    rickyTanå¼€æº<br>    <a href="https://github.com/rickytan/RTRootNavigationController" target="_blank" rel="external">https://github.com/rickytan/RTRootNavigationController</a></p>
<p>é¡¹ç›®çš„æºç æˆ‘æ”¾åœ¨äº†ï¼š<br>    <a href="https://github.com/yangqian111/blog/tree/master/iOSæ¯ä¸ªVCå•ç‹¬çš„ä¸€ä¸ªå¯¼èˆªæ " target="_blank" rel="external">https://github.com/yangqian111/blog/tree/master/iOSæ¯ä¸ªVCå•ç‹¬çš„ä¸€ä¸ªå¯¼èˆªæ </a></p>
]]></content>
    
    <summary type="html">
    
      åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°ä¸€äº›å…³äºå¯¼èˆªæ çš„é—®é¢˜ï¼Œä¾‹å¦‚è§†è§‰è®¾è®¡ï¼Œç»å¸¸æ€§çš„æ”¹å˜NavigationBarçš„é£æ ¼ï¼Œè™½ç„¶æˆ‘ä»¬èƒ½å¤Ÿåœ¨viewwillApperä¸­æ¥è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯æ€»æ˜¯å¤ªéº»çƒ¦ï¼Œè€Œä¸”éœ€è¦å†™å¾ˆå¤šå¤šä½™çš„ä»£ç ï¼Œä»Šå¤©å°±æ¥è®²è®²è¿™ç§æ•ˆæœï¼Œå…¶å®å·²ç»æœ‰å¾ˆå¤šAPPéƒ½æ˜¯ä½¿ç”¨è¿™ç§æ•ˆæœ
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>iOS CALayeråŸºç¡€ä»‹ç»-åŠ¨ç”»åŸºç¡€ä¹‹ä¸€</title>
    <link href="http://ppsheep.com/2016/11/16/iOS%20CALayer%E5%9F%BA%E7%A1%80%E4%BB%8B%E7%BB%8D-%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%80%E4%B9%8B%E4%B8%80/"/>
    <id>http://ppsheep.com/2016/11/16/iOS CALayeråŸºç¡€ä»‹ç»-åŠ¨ç”»åŸºç¡€ä¹‹ä¸€/</id>
    <published>2016-11-16T10:40:46.000Z</published>
    <updated>2016-11-19T07:48:21.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼Œæˆ‘ä¼šå®šæœŸåˆ†äº«ä¸€äº›æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•å’Œä¸€äº›iOSå®ç”¨çš„æŠ€å·§ï¼Œç°é˜¶æ®µä¸»è¦æ˜¯æ•´ç†å‡ºä¸€äº›åŸºç¡€çš„çŸ¥è¯†è®°å½•ä¸‹æ¥</strong></p>
<div align="middle"><br>    <image src="http://ac-mhke0kuv.clouddn.com/830a4ead8294ceff5160.jpg"></image><br></div>

<p>æ–‡ç« ä¹Ÿä¼šåŒæ­¥æ›´æ–°åˆ°æˆ‘çš„åšå®¢ï¼š<br><a href="http://ppsheep.com">http://ppsheep.com</a></p>
<h3 id="åŠ¨ç”»çš„ç”±æ¥"><a href="#åŠ¨ç”»çš„ç”±æ¥" class="headerlink" title="åŠ¨ç”»çš„ç”±æ¥"></a>åŠ¨ç”»çš„ç”±æ¥</h3><p>åœ¨iOSä¸­æ‰€æœ‰çš„è§†å›¾éƒ½æ˜¯ä»UIViewçš„åŸºç±»æ´¾ç”Ÿè€Œæ¥ï¼ŒUIViewå¯ä»¥å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œå¯ä»¥æ”¯æŒåŸºäºCore Graphicsç»˜å›¾ï¼Œä¹Ÿèƒ½å¤Ÿåšä¸€äº›ç®€å•çš„åŠ¨ç”»ï¼Œæ¯”å¦‚æ—‹è½¬ã€ç¼©æ”¾æˆ–è€…å…¶ä»–ä¸€äº›æ»‘åŠ¨æ¸å˜çš„åŠ¨ç”»ã€‚ä½†æ˜¯å®é™…ä¸Šï¼Œè¿™æ˜¯è‹¹æœä¸ºæˆ‘ä»¬å°è£…äº†ä¸€å±‚ï¼ŒçœŸæ­£å®ç°åŠ¨ç”»çš„å…¶å®æ˜¯ä¸€ä¸ªå«åšå›¾å±‚çš„ç©æ„å„¿(CALayer)ï¼ŒUIViewæ‰€åšçš„ä¸€åˆ‡åŠ¨ç”»ï¼Œéƒ½æ˜¯è‹¹æœä»CALayerå°è£…è€Œæ¥ã€‚</p>
<h3 id="CALayer"><a href="#CALayer" class="headerlink" title="CALayer"></a>CALayer</h3><p>CALayerç±»åœ¨æ¦‚å¿µä¸Šå’ŒUIViewç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥åƒViewä¸€æ ·æ·»åŠ ä¸€äº›å­layer(å›¾ç‰‡ï¼Œæ–‡æœ¬ç­‰ç­‰)ï¼Œä¹Ÿèƒ½å¤ŸåƒViewä¸€æ ·ï¼Œç®¡ç†å­å›¾å±‚çš„ä½ç½®å¤§å°ç­‰ç­‰ï¼Œå¹¶ä¸”ï¼ŒCALayeræœ‰ä¸€äº›éå¸¸é‡è¦çš„å±æ€§å’Œæ–¹æ³•ï¼ŒiOSä¸­çš„åŠ¨ç”»å°±æ˜¯é€šè¿‡è¿™äº›æ¥åšåŠ¨ç”»å’Œå˜æ¢ï¼ŒCALayerå’ŒUIViewæœ€å¤§çš„ä¸åŒå°±æ˜¯CALayerä¸å¤„ç†ç”¨æˆ·çš„äº¤äº’ã€‚</p>
<h3 id="UIViewå’ŒCALayerçš„å…³ç³»"><a href="#UIViewå’ŒCALayerçš„å…³ç³»" class="headerlink" title="UIViewå’ŒCALayerçš„å…³ç³»"></a>UIViewå’ŒCALayerçš„å…³ç³»</h3><p>æ¯ä¸€ä¸ªUIViewéƒ½æœ‰ä¸€ä¸ªCALayerå®ä¾‹å±æ€§ï¼ŒUIViewçš„èŒè´£å°±æ˜¯åˆ›å»ºå¹¶åˆ›å»ºè¿™ä¸ªå›¾å±‚ï¼Œä»¥ç¡®ä¿åœ¨å­è§†å›¾è¢«åˆ›å»ºæ—¶ï¼Œå­å›¾å±‚ä¹Ÿèƒ½å¤Ÿè¢«åˆ›å»ºï¼Œå­è§†å›¾è¢«æ·»åŠ å’Œç§»é™¤çš„æ—¶å€™ï¼Œå­å›¾å±‚ä¹Ÿèƒ½å¤Ÿåšç›¸å¯¹çš„æ·»åŠ ç§»é™¤æ“ä½œã€‚ ä»–ä»¬çš„å…³ç³»æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p>
<p><img src="http://i.imgur.com/2tvoYIJ.jpg" alt=""></p>
<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„è§†å›¾æˆ–è€…åŠ¨ç”»ï¼Œå…¶å®éƒ½æ˜¯å›¾å±‚ã€‚UIViewåªæ˜¯è‹¹æœä¸ºæˆ‘ä»¬å°è£…çš„é«˜çº§API</p>
<p>è¿™ä¸ªå°±æœ‰ä¸ªå†å²åŸå› äº†ï¼Œä¸»è¦å‘¢ æ˜¯è¦åœ¨Macä¸Šä¹Ÿä½¿ç”¨CALayerï¼Œä½†æ˜¯iOSè®¾å¤‡çš„è§¦æ‘¸å’ŒMacçš„é¼ æ ‡ç‚¹å‡»åˆä¸ä¸€æ ·ï¼Œåœ¨Macä¸Šï¼Œé«˜çº§APIå°±å«åšNSViewäº†ï¼Œæ›´å¤šäº†ï¼Œå°±ä¸åœ¨è¿™é‡Œè®²äº†ã€‚</p>
<h3 id="å“ªé‡Œèƒ½ç”¨åˆ°CALayer"><a href="#å“ªé‡Œèƒ½ç”¨åˆ°CALayer" class="headerlink" title="å“ªé‡Œèƒ½ç”¨åˆ°CALayer"></a>å“ªé‡Œèƒ½ç”¨åˆ°CALayer</h3><p>ä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬åœ¨å¤„ç†ä¸€äº›ç®€å•çš„åŠ¨ç”»æ—¶ï¼Œéƒ½ç”¨ä¸åˆ°CALayerï¼Œæ—¢ç„¶è‹¹æœä¸ºæˆ‘ä»¬å°è£…å¥½äº†ï¼Œå¹²å˜›ä¸ç”¨å‘¢ï¼Ÿä½†æ˜¯å¦‚æœéœ€è¦å†å¤„ç†ä¸€äº›é«˜çº§çš„åŠ¨ç”»ï¼Œé‚£UIViewå¯èƒ½å°±ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†ã€‚</p>
<p>æ²¡æœ‰æš´éœ²å‡ºæ¥çš„CALayeråŠŸèƒ½ï¼š</p>
<ul>
<li>é˜´å½±ï¼Œåœ†è§’ï¼Œå¸¦é¢œè‰²çš„è¾¹æ¡†</li>
<li>3Då˜æ¢</li>
<li>éçŸ©å½¢èŒƒå›´</li>
<li>é€æ˜é®ç½©</li>
<li>å¤šçº§éçº¿æ€§åŠ¨ç”»</li>
</ul>
<h3 id="ä½¿ç”¨å›¾å±‚"><a href="#ä½¿ç”¨å›¾å±‚" class="headerlink" title="ä½¿ç”¨å›¾å±‚"></a>ä½¿ç”¨å›¾å±‚</h3><p>æˆ‘ä»¬å…ˆæ¥æ„Ÿå—ä¸€ä¸‹å›¾å±‚</p>
<p>æ–°å»ºä¸€ä¸ªå·¥ç¨‹</p>
<p>åœ¨viewä¸­æ·»åŠ ä¸€ä¸ªview</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">UIView *layerView = [[UIView alloc] initWithFrame:CGRectMake(10, 10, 200, 200)];</div><div class="line">layerView.backgroundColor = [UIColor redColor];</div><div class="line">layerView.center = self.view.center;</div><div class="line">[self.view addSubview:layerView];</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/zEKwKE7.jpg" alt=""></p>
<p>ç„¶åæˆ‘ä»¬æƒ³è¦åœ¨è¿™ä¸ªå°çº¢æ–¹æ¡†çš„ä¸­é—´æ·»åŠ ä¸Šä¸€ä¸ªè“è‰²çš„å°æ–¹æ¡†ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è‚¯å®šçŸ¥é“è¿™å¾ˆç®€å•ï¼Œç›´æ¥åŠ ä¸Šä¸€ä¸ªå­viewå°±è¡Œäº†ï¼Œä½†æ˜¯è¿™æ ·åšçš„ï¼Œå°±å¤±å»äº†æˆ‘ä»¬å­¦ä¹ CALayerçš„æ„ä¹‰ã€‚</p>
<p>æˆ‘çš„æƒ³æ³•æ˜¯è¿™æ ·ï¼Œæ—¢ç„¶layeråƒviewä¸€æ ·ï¼Œé‚£æˆ‘ä»¬æ˜¯å¦å¯ä»¥åœ¨layerViewçš„layerä¸ŠåŠ ä¸Šä¸€ä¸ªè“è‰²æ–¹æ¡†æ ·å¼çš„layer æˆ‘ä»¬çš„åšæ³•æ˜¯è¿™æ ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CALayer *blueLayer = [CALayer layer];</div><div class="line">blueLayer.frame = CGRectMake(50, 50, 100, 100);</div><div class="line">blueLayer.backgroundColor = [UIColor blueColor].CGColor;</div><div class="line">[layerView.layer addSublayer:blueLayer];</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/TrH8GPi.jpg" alt=""></p>
<p>æ•ˆæœå°±å‡ºæ¥äº† æˆ‘ä»¬æ¥çœ‹çœ‹3Då›¾</p>
<p><img src="http://i.imgur.com/z6Tv4S7.jpg" alt=""></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬åªèƒ½çœ‹åˆ°ä¸€ä¸ªå›¾å±‚ï¼Œä¸€ä¸ªview å¹¶æ²¡æœ‰å‘layerViewä¸Šæ·»åŠ å­view</p>
<p>å½“ç„¶è¿™é‡Œæˆ‘ä»¬åªæ˜¯åšä¸€ä¸ªlayerçš„ä»‹ç»ï¼Œå¹¶ä¸æ˜¯è¯´ä½ ä¹‹åæ·»åŠ è§†å›¾è¿™æ ·æ·»åŠ ï¼Œè¿™æ ·è‚¯å®šæ˜¯é”™è¯¯çš„ï¼Œæˆ‘ä»¬ä¹‹å‰è®²è¿‡ï¼Œlayerä¸èƒ½å¤„ç†ç”¨æˆ·çš„äº¤äº’ï¼Œè¿™ä¸ªå¾ˆé‡è¦ã€‚</p>
<p>ä½†æ˜¯åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿™æ ·æ¥ä½¿ç”¨CALayerå‘¢ï¼Ÿ</p>
<ul>
<li>å¼€å‘åŒæ—¶å¯ä»¥åœ¨macOSä¸Šè¿è¡Œçš„è·¨å¹³å°åº”ç”¨</li>
<li>ä½¿ç”¨å¤šç§CALayerï¼Œå¹¶ä¸æƒ³åˆ›å»ºé¢å¤–çš„UIViewå»å°è£…ä»–ä»¬(è¿™ä¸ªåé¢ä¼šè®²åˆ°)</li>
<li>åšä¸€äº›å¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„å·¥ä½œï¼Œä½†æ˜¯é‡åˆ°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¾ˆå¤šæ—¶å€™éƒ½ç›´æ¥ä½¿ç”¨OpenGLç»˜å›¾äº†</li>
</ul>
<p>æ€»çš„æ¥è¯´å‘¢ï¼Œå¤„ç†è§†å›¾è‚¯å®šæ¯”å¤„ç†å›¾å±‚ç®€å•å¤šäº†</p>
<p>æˆ‘ä»¬è¿™é‡Œåˆ›å»ºè¿™ä¸€ä¸ªä¾‹å­ï¼Œåªæ˜¯ä¸ºäº†æ¥ä»‹ç»ï¼Œå›¾å±‚çš„æ ‘çŠ¶ç»“æ„ï¼Œå’Œè§†å›¾çš„ä¸€ä¸€å…³è”å…³ç³»ã€‚</p>
<h3 id="å¯„å®¿å›¾"><a href="#å¯„å®¿å›¾" class="headerlink" title="å¯„å®¿å›¾"></a>å¯„å®¿å›¾</h3><p>å¯„å®¿å›¾æ˜¯ä»€ä¹ˆæ„æ€å‘¢?å…¶å®å‘¢ï¼Œå°±æ˜¯å›¾å±‚ä¸­åŒ…å«å›¾</p>
<h4 id="contentså±æ€§"><a href="#contentså±æ€§" class="headerlink" title="contentså±æ€§"></a>contentså±æ€§</h4><p>åœ¨CALayerä¸­æœ‰ä¸€ä¸ªå±æ€§ï¼Œå«åšcontentsï¼Œè¿™ä¸ªå±æ€§çš„ç±»å‹è¢«å®šä¹‰ä¸ºidï¼Œçœ‹ä¸Šå»å¥½åƒè¿™ä¸ªå±æ€§èƒ½å¤Ÿæ¥æ”¶ä»»æ„ç±»å‹çš„å€¼ï¼Œå¦‚æœç»™contentsèµ‹äºˆäº†ä»»æ„ä¸€ä¸ªç±»å‹çš„å€¼ï¼Œä½ çš„APPä¹Ÿèƒ½å¤Ÿç¼–è¯‘æˆåŠŸï¼Œä½†æ˜¯å¾—åˆ°çš„å›¾å±‚ç¡®å®ä¸€ä¸ªç©ºç™½çš„å›¾å±‚ï¼Œäº‹å®ä¸Šï¼Œè¿™ä¸ªcontentsåœ¨iOSä¸‹ï¼Œæ˜¯éœ€è¦ä¸€ä¸ªCGImageçš„å€¼ã€‚</p>
<p>é‚£ä¸ºä»€ä¹ˆè¿™ä¸ªåˆè¦å†™ä½œä¸€ä¸ªidç±»å‹å‘¢ï¼Œè¿™ä¸ªåˆæ˜¯ä¸€ä¸ªå†å²åŸå› äº† ï¼Œæ˜æ˜¾çš„è¿™ä¸ªæ˜¯å› ä¸ºmacOSçš„åŸå› ï¼Œå› ä¸ºåœ¨macOSä¸‹ï¼Œè¿™ä¸ªæ˜¯æ¥æ”¶NSImageç±»å‹ã€‚</p>
<p>åœ¨UIImageä¸­ æœ‰ä¸€ä¸ªCGImageå±æ€§ï¼Œä»–è¿”å›çš„æ˜¯ä¸€ä¸ªCGImageRef(æŒ‡å‘CGImageçš„æŒ‡é’ˆ)ï¼Œå¦‚æœä½ ç›´æ¥æŠŠè¿™ä¸ªèµ‹ç»™contentsï¼Œé‚£æ˜¯ä¼šç¼–è¯‘å‡ºé”™çš„ã€‚CGImageRefæ˜¯ä¸€ä¸ªCore Foundationå¯¹è±¡ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªcocoaå¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡bridgedæ¥è¿›è¡Œè½¬æ¢ï¼Œæˆ‘ä»¬æ¥å‘åˆšåˆšåˆ›å»ºçš„layerViewçš„å›¾å±‚èµ‹äºˆä¸€å¼ å›¾ç‰‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">UIImage *image = [UIImage imageNamed:@&quot;plane&quot;];</div><div class="line">layerView.layer.contents = (__bridge id _Nullable)(image.CGImage);</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/TbHbXhg.jpg" alt=""></p>
<p>è¿™æ ·æˆ‘ä»¬å°±é¿å¼€äº†UIImageViewï¼Œç›´æ¥å‘UIViewçš„å›¾å±‚è®¾ç½®ä¸€å¼ å›¾ç‰‡</p>
<h4 id="contentsGravityå±æ€§"><a href="#contentsGravityå±æ€§" class="headerlink" title="contentsGravityå±æ€§"></a>contentsGravityå±æ€§</h4><p>ä½†æ˜¯æˆ‘ä»¬çœ‹åˆ°ä¸­é—´çš„å›¾ç‰‡æ˜æ˜¾è¢«æ‹‰ä¼¸äº†ï¼Œæˆ‘ä»¬æƒ³è¦å±•ç¤ºä»–åŸæœ‰çš„æ•ˆæœï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>åœ¨æˆ‘ä»¬ä½¿ç”¨UIImageViewæ—¶ï¼Œæˆ‘ä»¬å¤„ç†è¿™ç§æ‹‰ä¼¸ï¼Œä¸€èˆ¬æ˜¯ä½¿ç”¨UIimageViewçš„ä¸€ä¸ªå±æ€§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">imageView.contentModel = UIViewContentModeScaleAspectFit;</div></pre></td></tr></table></figure>
<p>åœ¨CALayerä¸­æœ‰ä¸€ä¸ªå’ŒcontentModeç›¸ä¼¼çš„å±æ€§ï¼Œå«åšcontentsGravityï¼Œä¸åŒçš„æ˜¯ä»–æ˜¯ä¸€ä¸ªNSStringç±»å‹ã€‚</p>
<p>contentsGravityå€¼çš„ç±»å‹åŒ…å«ï¼š</p>
<ul>
<li>kCAGravityCenter</li>
<li>kCAGravityTop</li>
<li>kCAGravityBottom</li>
<li>kCAGravityLeft</li>
<li>kCAGravityRight</li>
<li>kCAGravityTopLeft</li>
<li>kCAGravityTopRight</li>
<li>kCAGravityBottomLeft</li>
<li>kCAGravityBottomRight</li>
<li>kCAGravityResize</li>
<li>kCAGravityResizeAspect</li>
<li>kCAGravityResizeAspectFill</li>
</ul>
<p>è¿™å…¶ä¸­çš„ç±»å‹ä¸contentModeéƒ½æœ‰ä¸€ä¸€å¯¹åº”å…³ç³»çš„ï¼Œå…¶ä¸­kCAGravityResizeAspectç›¸å½“äºè§†å›¾ä¸­contentModeç±»å‹çš„UIViewContentModeScaleAspectFit</p>
<p>å½“æˆ‘ä»¬å°†layerViewçš„contentsGravityè®¾ç½®æˆkCAGravityResizeAspect</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">layerView.layer.contentsGravity = kCAGravityResizeAspect;</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/cTH6idP.jpg" alt=""></p>
<p>æ•ˆæœå°±ä¸ä¸€æ ·äº†</p>
<h4 id="contentsScaleå±æ€§-ä¸»è¦é’ˆå¯¹Mac"><a href="#contentsScaleå±æ€§-ä¸»è¦é’ˆå¯¹Mac" class="headerlink" title="contentsScaleå±æ€§(ä¸»è¦é’ˆå¯¹Mac)"></a>contentsScaleå±æ€§(ä¸»è¦é’ˆå¯¹Mac)</h4><p>contentsScaleå®šä¹‰äº†å¯„å®¿å›¾çš„åƒç´ å°ºå¯¸å’Œè§†å›¾å¤§å°çš„æ¯”ä¾‹ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸€ä¸ªå€¼ä¸º1.0çš„æµ®ç‚¹æ•°ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¸€èˆ¬æ€ä¹ˆä½¿ç”¨è¿™ä¸ªå±æ€§å‘¢ï¼Ÿ</p>
<p>è¿™ä¸ªå±æ€§å…¶å®æ˜¯ä¸ºäº†æ”¯æŒé«˜åˆ†è¾¨ç‡å±å¹•æœºåˆ¶è€Œå‡ºç°çš„ï¼Œä»–ç”¨æ¥åˆ¤æ–­åœ¨ç»˜åˆ¶å›¾å±‚çš„æ—¶å€™ï¼Œåº”è¯¥ä¸ºå¯„å®¿å›¾åˆ›å»ºåˆ›å»ºçš„ç©ºé—´å¤§å°å’Œéœ€è¦æ˜¾ç¤ºå›¾ç‰‡çš„æ‹‰ä¼¸åº¦ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬å°†contentsScaleè®¾ç½®ä¸º1.0 é‚£ä¹ˆå¯„å®¿å›¾åˆ›å»ºå‡ºæ¥çš„å›¾ç‰‡å°†ä¼šä»¥æ¯ä¸ªç‚¹ä¸€ä¸ªåƒç´ æ¥ç»˜åˆ¶å›¾ç‰‡ï¼Œå¦‚æœè®¾ç½®ä¸º2ï¼Œé‚£ä¹ˆå°†ä¼šä»¥æ¯ä¸ªç‚¹2ä¸ªåƒç´ æ¥ç»˜åˆ¶å›¾ç‰‡ã€‚è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„retinaå±å¹•ã€‚</p>
<p>åœ¨æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨contentsGravity = kCAGravityResizeAspectè¿™ä¸ªå±æ€§æ—¶ï¼Œé»˜è®¤æ˜¯å°†å›¾ç‰‡ç­‰æ¯”ä¾‹æ‹‰ä¼¸è‡³é€‚åº”å›¾å±‚å¤§å°ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å°†contentsGravityè®¾ç½®æˆkCAGravityCenterï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼Œæ•ˆæœä¼šæ˜¯ä»€ä¹ˆæ ·ï¼Ÿ</p>
<p><img src="http://i.imgur.com/e9qmb5i.jpg" alt=""></p>
<p>æ•´ä¸ªå›¾ç‰‡ç›´æ¥æ”¾å¤§ï¼Œå°†åŸå›¾å±‚ç›–ä½ï¼Œè¿™æ˜¯å› ä¸ºkCAGravityCenterå±æ€§å€¼ï¼Œé»˜è®¤æ˜¯ä¸ä¼šå¯¹å›¾ç‰‡è¿›è¡Œæ‹‰ä¼¸ï¼Œæ‰€ä»¥å°†å›¾ç‰‡çš„åŸå§‹å¤§å°å±•ç¤ºäº†å‡ºæ¥ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬çš„contentsScaleå°±èµ·åˆ°äº†ä½œç”¨ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">layerView.layer.contentsScale = image.scale;</div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/RyHbQXJ.jpg" alt=""></p>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œç°åœ¨ä½¿ç”¨äº†æ­£ç¡®çš„å›¾ç‰‡æ¥è¿›è¡Œç»˜åˆ¶</p>
<p><strong>æ³¨æ„ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä»£ç æ¥è®¾ç½®å¯„å®¿å›¾æ—¶ï¼Œæˆ‘ä»¬ä¸€å®šè¦æ‰‹åŠ¨è®¾ç½®contentsScale</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">layerView.layer.contentsScale = [UIScreen mainScreen].scale;</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬çš„å›¾ç‰‡åœ¨retinaè®¾å¤‡ä¸Šï¼Œæ‰ä¼šæ˜¾ç¤ºæ­£å¸¸ã€‚</p>
<h4 id="maskToBoundså±æ€§"><a href="#maskToBoundså±æ€§" class="headerlink" title="maskToBoundså±æ€§"></a>maskToBoundså±æ€§</h4><p>ä¸çŸ¥å¤§å®¶æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œåœ¨ä¸Šé¢çš„å›¾ä¸­ï¼Œæˆ‘ä»¬çš„å›¾ç‰‡å·²ç»è¶…è¿‡äº†å›¾å±‚çš„è¾¹ç•Œï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨UIViewä¸­ï¼Œä¹Ÿä¼šç»˜åˆ¶è¶…è¿‡è¾¹ç•Œçš„å†…å®¹æˆ–è€…å­è§†å›¾ã€‚</p>
<p>åœ¨UIViewä¸­ï¼Œæ§åˆ¶æ˜¯å¦è¶…å‡ºè¾¹ç•Œçš„å±æ€§æ˜¯clipsToBoundsï¼Œåœ¨CALayerä¸­ï¼Œæ§åˆ¶çš„å±æ€§æ˜¯masksToBoundsï¼Œå°†ä»–è®¾ç½®æˆyes</p>
<p><img src="http://i.imgur.com/7Uh0sZd.jpg" alt=""></p>
<h4 id="contentsRectå±æ€§"><a href="#contentsRectå±æ€§" class="headerlink" title="contentsRectå±æ€§"></a>contentsRectå±æ€§</h4><p>contentRectå±æ€§ï¼Œå…è®¸æˆ‘ä»¬åœ¨å›¾å±‚ä¸­æ˜¾ç¤ºå¯„å®¿å›¾çš„éƒ¨åˆ†åŒºåŸŸï¼Œè¿™æ¶‰åŠåˆ°å›¾ç‰‡çš„æ˜¾ç¤ºå’Œå›¾ç‰‡æ˜¯å¦‚ä½•æ‹‰ä¼¸çš„ï¼Œæ‰€ä»¥æ¯”contentsGravityçµæ´»å¾—å¤šï¼Œè¿™é‡Œä¹Ÿä¼šå¤šè®²ä¸€ä¸‹ã€‚</p>
<p>è™½ç„¶è¿™ä¸ªå±æ€§æœ‰å¸¦ä¸€ä¸ªrectçš„æ ·å¼ï¼Œè¿™æ ·å¾ˆå®¹æ˜“è®©æˆ‘ä»¬æƒ³åˆ°boundså’Œframeï¼Œä½†æ˜¯è¿™ä¸ªå±æ€§å’Œä»–ä»¬çš„ä½¿ç”¨æ–¹æ³•ç¡®æ˜¯ä¸ä¸€æ ·çš„ã€‚ä»–ä½¿ç”¨çš„æ˜¯å•ä½åæ ‡ï¼Œå•ä½åæ ‡æŒ‡å®šåœ¨0åˆ°1ä¹‹é—´ï¼Œæ˜¯ä¸€ä¸ªç›¸å¯¹å€¼ï¼Œæ˜¯ç›¸å¯¹äºå¯„å®¿å›¾çš„ä½ç½®å’Œå¤§å°ã€‚</p>
<p>é»˜è®¤çš„contentsRectæ˜¯{0ï¼Œ0ï¼Œ1ï¼Œ1} è¿™æ ·å°±è¡¨ç¤ºå¯„å®¿å›¾çš„å…¨éƒ¨åŒºåŸŸã€‚å¦‚æœæˆ‘ä»¬æŒ‡å®šä¸€ä¸ªåŒºåŸŸï¼Œé‚£ä¹ˆå¯„å®¿å›¾å°±ä¼šè¢«æ˜¾ç¤ºä¸€éƒ¨åˆ†åŒºåŸŸ</p>
<p><img src="https://farm6.staticflickr.com/5726/25392255929_3569dda784_o.jpg" alt=""></p>
<p>å¯ä»¥çœ‹åˆ°ç°åœ¨å¯„å®¿å›¾æ˜¯å…¨éƒ¨æ˜¾ç¤ºçš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æ¥è®¾ç½®ä¸€ä¸‹layerçš„contentsRectå±æ€§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">layerView.layer.contentsRect = CGRectMake(0.5, 0.5, 0.5, 0.5);</div></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™ï¼Œå›¾å±‚å°±ä¼šè¿™æ ·æ˜¾ç¤º</p>
<p><img src="https://farm6.staticflickr.com/5583/30726952920_0a80ddf4ee_o.jpg" alt=""></p>
<p>æ˜æ˜¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ° è¿™æ˜¯æ˜¾ç¤ºçš„å›¾ç‰‡çš„å³ä¸‹è§’åŒºåŸŸ è¿™æ ·æ˜¾ç¤ºä¹Ÿæ˜¯æˆ‘ä»¬ç»™å®šçš„{0.5ï¼Œ0.5ï¼Œ0.5ï¼Œ0.5}å†³å®šçš„ ä»å›¾ç‰‡çš„ä¸­ç‚¹ä½ç½®å¼€å§‹ï¼Œæ˜¾ç¤ºåŠå®½åŠé«˜</p>
<p>é‚£ä¹ˆæˆ‘ä»¬åœ¨åšAPPæ—¶ï¼Œä»€ä¹ˆåœ°æ–¹ç»å¸¸ä½¿ç”¨åˆ°è¿™ä¸ªå±æ€§å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬ç»å¸¸åœ¨å›¾ç‰‡æ‹¼åˆçš„æ—¶å€™ç”¨åˆ°è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªå›¾ç‰‡æ‹¼åˆæ¦‚å¿µåœ¨æ¸¸æˆå¼€å‘ä¸­ç»å¸¸ç¢°åˆ°ã€‚<br>è¯´ç®€å•ç‚¹ï¼Œå°±æ˜¯å°†å¤šå¼ å›¾ç‰‡æ‰“åŒ…æˆä¸€å¼ å›¾ç‰‡ï¼Œç„¶åä¸€æ¬¡æ€§è½½å…¥è¿™ä¸€å¸å›¾ç‰‡ï¼Œè¿™æ ·å¸¦æ¥çš„å¥½å¤„å°±æ˜¯èƒ½å¤Ÿåœ¨å†…å­˜ä½¿ç”¨ä¸Šï¼Œå±å¹•æ¸²æŸ“ä¸ŠèŠ‚çœå¾ˆå¤šæ€§èƒ½ã€‚</p>
<p>ä¾‹å­ï¼šè¿™ç§ä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬å¸¸è§çš„APPä¸­ï¼Œå¾ˆå¤šç¾é¢œçš„ç›¸æœºä½¿ç”¨äº†layeræ·»åŠ ä¸€äº›æ•ˆæœå›¾ç‰‡åˆ°å½“å‰çš„æ˜¾ç¤ºè§†å›¾ä¸Šï¼Œæ¯”å¦‚æ·»åŠ ä¸€ä¸ªä»€ä¹ˆç¬‘è„¸å•Šï¼Œç›¸æ¡†å•Šä¹‹ç±»çš„ã€‚</p>
<h4 id="contentsCenterå±æ€§"><a href="#contentsCenterå±æ€§" class="headerlink" title="contentsCenterå±æ€§"></a>contentsCenterå±æ€§</h4><p>å’‹ä¸€çœ‹ï¼Œæˆ‘ä»¬ä¼šä»¥ä¸ºè¿™ä¸ªå’Œå¯„å®¿å›¾çš„ä½ç½®ç›¸å…³ï¼Œå…¶å®ä¸æ˜¯çš„ï¼Œè¿™ä¸ªå±æ€§ä¸»è¦æ˜¯ç”¨æ¥æ§åˆ¶å›¾ç‰‡çš„æ‹‰ä¼¸ï¼Œå…¶å®ä»–æ˜¯ä¸€ä¸ªCGRectï¼Œä»–å®šä¹‰äº†<strong>ä¸€ä¸ªå›ºå®šçš„è¾¹æ¡†å’Œä¸€ä¸ªåœ¨å›¾å±‚ä¸Šå¯ä»¥æ‹‰ä¼¸çš„åŒºåŸŸï¼Œæ”¹å˜contentsCenterçš„å€¼ï¼Œå¹¶ä¸ä¼šå½±å“å¯„å®¿å›¾çš„æ˜¾ç¤ºï¼Œé™¤éè¿™ä¸ªå›¾å±‚çš„å¤§å°æ”¹å˜äº†ï¼Œæˆ‘ä»¬æ‰èƒ½çœ‹å¾—åˆ°ç»“æœ</strong></p>
<p>contentsCenteré»˜è®¤çš„å¤§å°æ˜¯{0ï¼Œ0ï¼Œ1ï¼Œ1}ï¼Œè¿™å°±æ„å‘³ç€ï¼Œå¦‚æœå›¾å±‚çš„å¤§å°æ”¹å˜äº†ï¼Œé‚£ä¹ˆæ•´ä¸ªå¯„å®¿å›¾éƒ½ä¼šè¢«å‡åŒ€æ‹‰ä¼¸ï¼Œå¦‚æœæˆ‘ä»¬æ”¹å˜contentsCenterè¿™ä¸ªå±æ€§ï¼Œå®šä¹‰ä¸€ä¸ªæ‹‰ä¼¸çš„åŒºåŸŸï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½çœ‹åˆ°æ•ˆæœäº†</p>
<p><img src="http://o8bxt3lx0.bkt.clouddn.com/blog/2016-11-16-006tNbRwjw1f9u68sxw6ij31kw23uqt1.jpg" alt=""></p>
<p><strong>æ³¨æ„</strong><br>è¿™é‡Œæˆ‘ç”»äº†ä¸€å¼ å›¾ï¼Œæ•´ä¸ªä¸€ä¸ªæ–¹æ¡†è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå›¾å±‚ï¼Œå¦‚æœæˆ‘ä»¬å°†å›¾å±‚çš„contentsCenterè®¾ç½®ä¸º{0.25ï¼Œ0.25ï¼Œ0.25ï¼Œ0.25}é‚£ä¹ˆï¼Œå…¶å®è¿™ä¸ªrectå½¢æˆçš„ä¸€ä¸ªæ–¹æ¡†å°±æ˜¯ä¸­é—´çš„IåŒºåŸŸï¼Œç›¸å½“äºæ•´ä¸ªå›¾å±‚çš„æ­£ä¸­å¿ƒï¼Œå®½é«˜å„ä¸€åŠçš„ä½ç½®  å¦‚æœæˆ‘ä»¬ç°åœ¨æ”¹å˜äº†å›¾å±‚çš„å¤§å°çš„è¯ï¼Œæˆ‘ä»¬å®šä¹‰äº†è¿™æ ·ä¸€ä¸ªæ‹‰ä¼¸åŒºåŸŸ{0.25ï¼Œ0.25ï¼Œ0.25ï¼Œ0.25}ï¼Œè¡¨ç¤ºçš„å°±æ˜¯åœ¨æ¨ªå‘æ‹‰ä¼¸ä¸­HåŒºåŸŸå’ŒDåŒºåŸŸä¼šè¢«æ‹‰ä¼¸ï¼Œåœ¨çºµå‘æ‹‰ä¼¸ä¸­ï¼ŒBåŒºåŸŸå’ŒFåŒºåŸŸä¼šè¢«æ‹‰ä¼¸ï¼Œè€Œä¸­é—´çš„IåŒºåŸŸåˆ™æ˜¯æ¨ªå‘çºµå‘å‡ä¼šè¢«æ‹‰ä¼¸ï¼Œè€Œå…¶ä¸­çš„Aã€Cã€Eã€Gåˆ™ä¸ä¼šè¢«æ‹‰ä¼¸ï¼Œå¯èƒ½è¿™é‡Œéœ€è¦ç€é‡ç†è§£ä¸€ä¸‹</p>
<blockquote>
<p>åˆ°è¿™é‡Œï¼ŒåŸºæœ¬ä¸Šå°±å°†CALayerä¸­æˆ‘ä»¬å¯èƒ½ä¼šç»å¸¸ä½¿ç”¨åˆ°çš„ä¸€äº›é‡è¦å±æ€§è®²è§£äº†ä¸€ä¸‹</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬è®²äº†CALayerå’ŒUIViewä¹‹é—´çš„ç›¸ä¼¼çš„æ ‘çº§å…³ç³»ï¼Œå’Œä»–ä»¬ä¹‹é—´çš„ç®¡ç†å…³ç³»ï¼Œå¹¶ä¸”ä»‹ç»äº†CALayerçš„ä¸€äº›å±æ€§ï¼Œåœ¨è¿™ç‰‡æ–‡ç« ä¸­ï¼Œå°†ç»§ç»­ä»‹ç»ä¸€äº›CALayerçš„å±æ€§ï¼Œè™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯åé¢ç­‰åˆ°æˆ‘ä»¬åšåŠ¨ç”»çš„æ—¶å€™ï¼Œè¿™äº›å±æ€§éƒ½æ˜¯æå…¶é‡è¦çš„ã€‚
    
    </summary>
    
      <category term="iOSåŠ¨ç”»åŸºç¡€" scheme="http://ppsheep.com/all-categories/iOS%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="åŠ¨ç”»åŸºç¡€" scheme="http://ppsheep.com/all-tags/%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>iOSåŸºç¡€å¼€å‘æŠ€å·§-äºŒ</title>
    <link href="http://ppsheep.com/2016/11/09/iOS%E5%9F%BA%E7%A1%80%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7-%E4%BA%8C/"/>
    <id>http://ppsheep.com/2016/11/09/iOSåŸºç¡€å¼€å‘æŠ€å·§-äºŒ/</id>
    <published>2016-11-09T08:51:35.000Z</published>
    <updated>2016-11-15T09:03:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™é‡Œä¸»è¦è®²ä¸€äº›æˆ‘åœ¨æ—¥å¸¸å¼€å‘ä¸­ç”¨åˆ°çš„ä¸€äº›å°çš„æŠ€å·§ï¼Œå…¶å®ä¹Ÿç®—ä¸ä¸ŠæŠ€å·§å§ï¼Œå°±æ˜¯çœå»ä¸€äº›ä¸å¿…è¦çš„ä»£ç ï¼Œæˆ–è€…æœ‰çš„å°é—®é¢˜å›°æ‰°ä½ å¾ˆä¹…è¯´ä¸è¡Œåœ¨è¿™é‡Œä½ èƒ½æ‰¾åˆ°ç­”æ¡ˆ</p>
<a id="more"></a>
<h3 id="æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°"><a href="#æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°" class="headerlink" title="æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°"></a>æ‰“å°ç³»ç»Ÿæ‰€æœ‰å·²æ³¨å†Œçš„å­—ä½“åç§°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (void)enumerateFonts&#123;</div><div class="line">    for(NSString *familyName in [UIFont familyNames])</div><div class="line">    &#123;</div><div class="line">        NSLog(@&quot;%@&quot;,familyName);</div><div class="line">        NSArray *fontNames = [UIFont fontNamesForFamilyName:familyName];</div><div class="line">        for(NSString *fontName in fontNames)</div><div class="line">        &#123;</div><div class="line">            NSLog(@&quot;\t|- %@&quot;,fontName);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²åè½¬"><a href="#å­—ç¬¦ä¸²åè½¬" class="headerlink" title="å­—ç¬¦ä¸²åè½¬"></a>å­—ç¬¦ä¸²åè½¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (NSString*)reverseWordsInString:(NSString*)str</div><div class="line">&#123;</div><div class="line">    NSMutableString *reverString = [NSMutableString stringWithCapacity:str.length];</div><div class="line">    [str enumerateSubstringsInRange:NSMakeRange(0, str.length) options:NSStringEnumerationReverse | NSStringEnumerationByComposedCharacterSequences  usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) &#123;</div><div class="line">        [reverString appendString:substring];</div><div class="line">    &#125;];</div><div class="line">    return reverString;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç¦æ­¢é”å±"><a href="#ç¦æ­¢é”å±" class="headerlink" title="ç¦æ­¢é”å±"></a>ç¦æ­¢é”å±</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[UIApplication sharedApplication].idleTimerDisabled = YES;</div></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²æŒ‰å¤šä¸ªç¬¦å·åˆ†å‰²"><a href="#å­—ç¬¦ä¸²æŒ‰å¤šä¸ªç¬¦å·åˆ†å‰²" class="headerlink" title="å­—ç¬¦ä¸²æŒ‰å¤šä¸ªç¬¦å·åˆ†å‰²"></a>å­—ç¬¦ä¸²æŒ‰å¤šä¸ªç¬¦å·åˆ†å‰²</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (void)seprartStringWithCharters&#123;</div><div class="line">    NSString *str = @&quot;abc,dsd/123.789&quot;;</div><div class="line">    NSCharacterSet *set = [NSCharacterSet characterSetWithCharactersInString:@&quot;,/.&quot;];</div><div class="line">    NSLog(@&quot;%@&quot;,[str componentsSeparatedByCharactersInSet:set]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="iOSè·³è½¬åˆ°App-Storeä¸‹è½½åº”ç”¨è¯„åˆ†"><a href="#iOSè·³è½¬åˆ°App-Storeä¸‹è½½åº”ç”¨è¯„åˆ†" class="headerlink" title="iOSè·³è½¬åˆ°App Storeä¸‹è½½åº”ç”¨è¯„åˆ†"></a>iOSè·³è½¬åˆ°App Storeä¸‹è½½åº”ç”¨è¯„åˆ†</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;itms-apps://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&amp;id=APPID&quot;]];</div></pre></td></tr></table></figure>
<h3 id="åˆ¤æ–­å½“å‰ViewControlleræ˜¯pushè¿˜æ˜¯presentçš„æ–¹å¼æ˜¾ç¤ºçš„"><a href="#åˆ¤æ–­å½“å‰ViewControlleræ˜¯pushè¿˜æ˜¯presentçš„æ–¹å¼æ˜¾ç¤ºçš„" class="headerlink" title="åˆ¤æ–­å½“å‰ViewControlleræ˜¯pushè¿˜æ˜¯presentçš„æ–¹å¼æ˜¾ç¤ºçš„"></a>åˆ¤æ–­å½“å‰ViewControlleræ˜¯pushè¿˜æ˜¯presentçš„æ–¹å¼æ˜¾ç¤ºçš„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">NSArray *viewcontrollers=self.navigationController.viewControllers;</div><div class="line"></div><div class="line">if (viewcontrollers.count &gt; 1)</div><div class="line">&#123;</div><div class="line">    if ([viewcontrollers objectAtIndex:viewcontrollers.count - 1] == self)</div><div class="line">    &#123;</div><div class="line">        //pushæ–¹å¼</div><div class="line">       [self.navigationController popViewControllerAnimated:YES];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">    //presentæ–¹å¼</div><div class="line">    [self dismissViewControllerAnimated:YES completion:nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è·å–å®é™…ä½¿ç”¨çš„LaunchImageå›¾ç‰‡"><a href="#è·å–å®é™…ä½¿ç”¨çš„LaunchImageå›¾ç‰‡" class="headerlink" title="è·å–å®é™…ä½¿ç”¨çš„LaunchImageå›¾ç‰‡"></a>è·å–å®é™…ä½¿ç”¨çš„LaunchImageå›¾ç‰‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">- (NSString *)getLaunchImageName</div><div class="line">&#123;</div><div class="line">    CGSize viewSize = self.window.bounds.size;</div><div class="line">    // ç«–å±    </div><div class="line">    NSString *viewOrientation = @&quot;Portrait&quot;;  </div><div class="line">    NSString *launchImageName = nil;    </div><div class="line">    NSArray* imagesDict = [[[NSBundle mainBundle] infoDictionary] valueForKey:@&quot;UILaunchImages&quot;];</div><div class="line">    for (NSDictionary* dict in imagesDict)</div><div class="line">    &#123;</div><div class="line">        CGSize imageSize = CGSizeFromString(dict[@&quot;UILaunchImageSize&quot;]);</div><div class="line">        if (CGSizeEqualToSize(imageSize, viewSize) &amp;&amp; [viewOrientation isEqualToString:dict[@&quot;UILaunchImageOrientation&quot;]])</div><div class="line">        &#123;</div><div class="line">            launchImageName = dict[@&quot;UILaunchImageName&quot;];        </div><div class="line">        &#125;    </div><div class="line">    &#125;    </div><div class="line">    return launchImageName;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="iOSåœ¨å½“å‰å±å¹•è·å–ç¬¬ä¸€å“åº”"><a href="#iOSåœ¨å½“å‰å±å¹•è·å–ç¬¬ä¸€å“åº”" class="headerlink" title="iOSåœ¨å½“å‰å±å¹•è·å–ç¬¬ä¸€å“åº”"></a>iOSåœ¨å½“å‰å±å¹•è·å–ç¬¬ä¸€å“åº”</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">UIWindow * keyWindow = [[UIApplication sharedApplication] keyWindow];</div><div class="line">UIView * firstResponder = [keyWindow performSelector:@selector(firstResponder)];</div></pre></td></tr></table></figure>
<h3 id="åˆ¤æ–­å¯¹è±¡æ˜¯å¦éµå¾ªäº†æŸåè®®"><a href="#åˆ¤æ–­å¯¹è±¡æ˜¯å¦éµå¾ªäº†æŸåè®®" class="headerlink" title="åˆ¤æ–­å¯¹è±¡æ˜¯å¦éµå¾ªäº†æŸåè®®"></a>åˆ¤æ–­å¯¹è±¡æ˜¯å¦éµå¾ªäº†æŸåè®®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if ([self.selectedController conformsToProtocol:@protocol(RefreshPtotocol)])</div><div class="line">&#123;</div><div class="line">     [self.selectedController performSelector:@selector(onTriggerRefresh)];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="åˆ¤æ–­viewæ˜¯ä¸æ˜¯æŒ‡å®šè§†å›¾çš„å­è§†å›¾"><a href="#åˆ¤æ–­viewæ˜¯ä¸æ˜¯æŒ‡å®šè§†å›¾çš„å­è§†å›¾" class="headerlink" title="åˆ¤æ–­viewæ˜¯ä¸æ˜¯æŒ‡å®šè§†å›¾çš„å­è§†å›¾"></a>åˆ¤æ–­viewæ˜¯ä¸æ˜¯æŒ‡å®šè§†å›¾çš„å­è§†å›¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">BOOL isView = [textView isDescendantOfView:self.view];</div></pre></td></tr></table></figure>
<h3 id="NSArray-å¿«é€Ÿæ±‚æ€»å’Œ-æœ€å¤§å€¼-æœ€å°å€¼-å’Œ-å¹³å‡å€¼"><a href="#NSArray-å¿«é€Ÿæ±‚æ€»å’Œ-æœ€å¤§å€¼-æœ€å°å€¼-å’Œ-å¹³å‡å€¼" class="headerlink" title="NSArray å¿«é€Ÿæ±‚æ€»å’Œ æœ€å¤§å€¼ æœ€å°å€¼ å’Œ å¹³å‡å€¼"></a>NSArray å¿«é€Ÿæ±‚æ€»å’Œ æœ€å¤§å€¼ æœ€å°å€¼ å’Œ å¹³å‡å€¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">NSArray *array = [NSArray arrayWithObjects:@&quot;2.0&quot;, @&quot;2.3&quot;, @&quot;3.0&quot;, @&quot;4.0&quot;, @&quot;10&quot;, nil];</div><div class="line">CGFloat sum = [[array valueForKeyPath:@&quot;@sum.floatValue&quot;] floatValue];</div><div class="line">CGFloat avg = [[array valueForKeyPath:@&quot;@avg.floatValue&quot;] floatValue];</div><div class="line">CGFloat max =[[array valueForKeyPath:@&quot;@max.floatValue&quot;] floatValue];</div><div class="line">CGFloat min =[[array valueForKeyPath:@&quot;@min.floatValue&quot;] floatValue];</div><div class="line">NSLog(@&quot;%f\n%f\n%f\n%f&quot;,sum,avg,max,min);</div></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹UITextFieldä¸­Placeholderçš„æ–‡å­—é¢œè‰²"><a href="#ä¿®æ”¹UITextFieldä¸­Placeholderçš„æ–‡å­—é¢œè‰²" class="headerlink" title="ä¿®æ”¹UITextFieldä¸­Placeholderçš„æ–‡å­—é¢œè‰²"></a>ä¿®æ”¹UITextFieldä¸­Placeholderçš„æ–‡å­—é¢œè‰²</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[textField setValue:[UIColor redColor] forKeyPath:@&quot;_placeholderLabel.textColor&quot;];</div></pre></td></tr></table></figure>
<h3 id="å…³äºNSDateFormatterçš„æ ¼å¼"><a href="#å…³äºNSDateFormatterçš„æ ¼å¼" class="headerlink" title="å…³äºNSDateFormatterçš„æ ¼å¼"></a>å…³äºNSDateFormatterçš„æ ¼å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">G: å…¬å…ƒæ—¶ä»£ï¼Œä¾‹å¦‚ADå…¬å…ƒ</div><div class="line">yy: å¹´çš„å2ä½</div><div class="line">yyyy: å®Œæ•´å¹´</div><div class="line">MM: æœˆï¼Œæ˜¾ç¤ºä¸º1-12</div><div class="line">MMM: æœˆï¼Œæ˜¾ç¤ºä¸ºè‹±æ–‡æœˆä»½ç®€å†™,å¦‚ Jan</div><div class="line">MMMM: æœˆï¼Œæ˜¾ç¤ºä¸ºè‹±æ–‡æœˆä»½å…¨ç§°ï¼Œå¦‚ Janualy</div><div class="line">dd: æ—¥ï¼Œ2ä½æ•°è¡¨ç¤ºï¼Œå¦‚02</div><div class="line">d: æ—¥ï¼Œ1-2ä½æ˜¾ç¤ºï¼Œå¦‚ 2</div><div class="line">EEE: ç®€å†™æ˜ŸæœŸå‡ ï¼Œå¦‚Sun</div><div class="line">EEEE: å…¨å†™æ˜ŸæœŸå‡ ï¼Œå¦‚Sunday</div><div class="line">aa: ä¸Šä¸‹åˆï¼ŒAM/PM</div><div class="line">H: æ—¶ï¼Œ24å°æ—¶åˆ¶ï¼Œ0-23</div><div class="line">Kï¼šæ—¶ï¼Œ12å°æ—¶åˆ¶ï¼Œ0-11</div><div class="line">m: åˆ†ï¼Œ1-2ä½</div><div class="line">mm: åˆ†ï¼Œ2ä½</div><div class="line">s: ç§’ï¼Œ1-2ä½</div><div class="line">ss: ç§’ï¼Œ2ä½</div><div class="line">S: æ¯«ç§’</div></pre></td></tr></table></figure>
<h3 id="é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡æ ¼å¼"><a href="#é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡æ ¼å¼" class="headerlink" title="é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡æ ¼å¼"></a>é˜¿æ‹‰ä¼¯æ•°å­—è½¬ä¸­æ–‡æ ¼å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">+(NSString *)translation:(NSString *)arebic</div><div class="line">&#123;  </div><div class="line">    NSString *str = arebic;</div><div class="line">    NSArray *arabic_numerals = @[@&quot;1&quot;,@&quot;2&quot;,@&quot;3&quot;,@&quot;4&quot;,@&quot;5&quot;,@&quot;6&quot;,@&quot;7&quot;,@&quot;8&quot;,@&quot;9&quot;,@&quot;0&quot;];</div><div class="line">    NSArray *chinese_numerals = @[@&quot;ä¸€&quot;,@&quot;äºŒ&quot;,@&quot;ä¸‰&quot;,@&quot;å››&quot;,@&quot;äº”&quot;,@&quot;å…­&quot;,@&quot;ä¸ƒ&quot;,@&quot;å…«&quot;,@&quot;ä¹&quot;,@&quot;é›¶&quot;];</div><div class="line">    NSArray *digits = @[@&quot;ä¸ª&quot;,@&quot;å&quot;,@&quot;ç™¾&quot;,@&quot;åƒ&quot;,@&quot;ä¸‡&quot;,@&quot;å&quot;,@&quot;ç™¾&quot;,@&quot;åƒ&quot;,@&quot;äº¿&quot;,@&quot;å&quot;,@&quot;ç™¾&quot;,@&quot;åƒ&quot;,@&quot;å…†&quot;];</div><div class="line">    NSDictionary *dictionary = [NSDictionary dictionaryWithObjects:chinese_numerals forKeys:arabic_numerals];</div><div class="line"></div><div class="line">    NSMutableArray *sums = [NSMutableArray array];</div><div class="line">    for (int i = 0; i &lt; str.length; i ++) &#123;</div><div class="line">        NSString *substr = [str substringWithRange:NSMakeRange(i, 1)];</div><div class="line">        NSString *a = [dictionary objectForKey:substr];</div><div class="line">        NSString *b = digits[str.length -i-1];</div><div class="line">        NSString *sum = [a stringByAppendingString:b];</div><div class="line">        if ([a isEqualToString:chinese_numerals[9]])</div><div class="line">        &#123;</div><div class="line">            if([b isEqualToString:digits[4]] || [b isEqualToString:digits[8]])</div><div class="line">            &#123;</div><div class="line">                sum = b;</div><div class="line">                if ([[sums lastObject] isEqualToString:chinese_numerals[9]])</div><div class="line">                &#123;</div><div class="line">                    [sums removeLastObject];</div><div class="line">                &#125;</div><div class="line">            &#125;else</div><div class="line">            &#123;</div><div class="line">                sum = chinese_numerals[9];</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            if ([[sums lastObject] isEqualToString:sum])</div><div class="line">            &#123;</div><div class="line">                continue;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        [sums addObject:sum];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    NSString *sumStr = [sums componentsJoinedByString:@&quot;&quot;];</div><div class="line">    NSString *chinese = [sumStr substringToIndex:sumStr.length-1];</div><div class="line">    NSLog(@&quot;%@&quot;,str);</div><div class="line">    NSLog(@&quot;%@&quot;,chinese);</div><div class="line">    return chinese;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Base64ç¼–ç ä¸NSStringå¯¹è±¡æˆ–NSDataå¯¹è±¡çš„è½¬æ¢"><a href="#Base64ç¼–ç ä¸NSStringå¯¹è±¡æˆ–NSDataå¯¹è±¡çš„è½¬æ¢" class="headerlink" title="Base64ç¼–ç ä¸NSStringå¯¹è±¡æˆ–NSDataå¯¹è±¡çš„è½¬æ¢"></a>Base64ç¼–ç ä¸NSStringå¯¹è±¡æˆ–NSDataå¯¹è±¡çš„è½¬æ¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">NSData *nsdata = [@&quot;iOS Developer Tips encoded in Base64&quot;</div><div class="line">  dataUsingEncoding:NSUTF8StringEncoding];</div><div class="line"></div><div class="line"></div><div class="line">NSString *base64Encoded = [nsdata base64EncodedStringWithOptions:0];</div><div class="line"></div><div class="line"></div><div class="line">NSLog(@&quot;Encoded: %@&quot;, base64Encoded);</div><div class="line"></div><div class="line">//å¦å¤–ä¸€ç§æ–¹æ³•</div><div class="line"></div><div class="line"></div><div class="line">NSData *nsdataFromBase64String = [[NSData alloc]</div><div class="line">  initWithBase64EncodedString:base64Encoded options:0];</div><div class="line"></div><div class="line"></div><div class="line">NSString *base64Decoded = [[NSString alloc]</div><div class="line">  initWithData:nsdataFromBase64String encoding:NSUTF8StringEncoding];</div><div class="line">NSLog(@&quot;Decoded: %@&quot;, base64Decoded);</div></pre></td></tr></table></figure>
<h3 id="å–æ¶ˆUICollectionViewçš„éšå¼åŠ¨ç”»"><a href="#å–æ¶ˆUICollectionViewçš„éšå¼åŠ¨ç”»" class="headerlink" title="å–æ¶ˆUICollectionViewçš„éšå¼åŠ¨ç”»"></a>å–æ¶ˆUICollectionViewçš„éšå¼åŠ¨ç”»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">//æ–¹æ³•ä¸€</div><div class="line">[UIView performWithoutAnimation:^&#123;</div><div class="line">    [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</div><div class="line">&#125;];</div><div class="line"></div><div class="line">//æ–¹æ³•äºŒ</div><div class="line">[UIView animateWithDuration:0 animations:^&#123;</div><div class="line">    [collectionView performBatchUpdates:^&#123;</div><div class="line">        [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</div><div class="line">    &#125; completion:nil];</div><div class="line">&#125;];</div><div class="line"></div><div class="line">//æ–¹æ³•ä¸‰</div><div class="line">[UIView setAnimationsEnabled:NO];</div><div class="line">[self.trackPanel performBatchUpdates:^&#123;</div><div class="line">    [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</div><div class="line">&#125; completion:^(BOOL finished) &#123;</div><div class="line">    [UIView setAnimationsEnabled:YES];</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹æŸä¸ªUIImageå ç”¨å†…å­˜å¤§å°"><a href="#æŸ¥çœ‹æŸä¸ªUIImageå ç”¨å†…å­˜å¤§å°" class="headerlink" title="æŸ¥çœ‹æŸä¸ªUIImageå ç”¨å†…å­˜å¤§å°"></a>æŸ¥çœ‹æŸä¸ªUIImageå ç”¨å†…å­˜å¤§å°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">UIImage *image = [UIImage imageNamed:@&quot;image&quot;];</div><div class="line">NSUInteger size  = CGImageGetHeight(image.CGImage) * CGImageGetBytesPerRow(image.CGImage);</div></pre></td></tr></table></figure>
<h3 id="UIViewè®¾ç½®éƒ¨åˆ†åœ†è§’"><a href="#UIViewè®¾ç½®éƒ¨åˆ†åœ†è§’" class="headerlink" title="UIViewè®¾ç½®éƒ¨åˆ†åœ†è§’"></a>UIViewè®¾ç½®éƒ¨åˆ†åœ†è§’</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">CGRect rect = view.bounds;</div><div class="line">CGSize radio = CGSizeMake(30, 30);//åœ†è§’å°ºå¯¸</div><div class="line">UIRectCorner corner = UIRectCornerTopLeft|UIRectCornerTopRight;//è¿™åªåœ†è§’ä½ç½®</div><div class="line">UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:rect byRoundingCorners:corner cornerRadii:radio];</div><div class="line">CAShapeLayer *masklayer = [[CAShapeLayer alloc]init];//åˆ›å»ºshapelayer</div><div class="line">masklayer.frame = view.bounds;</div><div class="line">masklayer.path = path.CGPath;//è®¾ç½®è·¯å¾„</div><div class="line">view.layer.mask = masklayer;</div></pre></td></tr></table></figure>
<h3 id="å»æ‰å¯¼èˆªæ çš„backæ ‡é¢˜"><a href="#å»æ‰å¯¼èˆªæ çš„backæ ‡é¢˜" class="headerlink" title="å»æ‰å¯¼èˆªæ çš„backæ ‡é¢˜"></a>å»æ‰å¯¼èˆªæ çš„backæ ‡é¢˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[UIBarButtonItemappearance]setBackButtonTitlePositionAdjustment:UIOffsetMake(0, -60)forBarMetrics:UIBarMetricsDefault];</div></pre></td></tr></table></figure>
<h3 id="dispatch-groupçš„ä½¿ç”¨"><a href="#dispatch-groupçš„ä½¿ç”¨" class="headerlink" title="dispatch_groupçš„ä½¿ç”¨"></a>dispatch_groupçš„ä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">dispatch_group_t dispatchGroup = dispatch_group_create();</div><div class="line">    dispatch_group_enter(dispatchGroup);</div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        NSLog(@&quot;ç¬¬ä¸€ä¸ªè¯·æ±‚å®Œæˆ&quot;);</div><div class="line">        dispatch_group_leave(dispatchGroup);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    dispatch_group_enter(dispatchGroup);</div><div class="line"></div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(10 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        NSLog(@&quot;ç¬¬äºŒä¸ªè¯·æ±‚å®Œæˆ&quot;);</div><div class="line">        dispatch_group_leave(dispatchGroup);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    dispatch_group_notify(dispatchGroup, dispatch_get_main_queue(), ^()&#123;</div><div class="line">        NSLog(@&quot;è¯·æ±‚å®Œæˆ&quot;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h3 id="è·å–ç§æœ‰å±æ€§å’Œæˆå‘˜å˜é‡-è®°å¾—å¼•å…¥runtime"><a href="#è·å–ç§æœ‰å±æ€§å’Œæˆå‘˜å˜é‡-è®°å¾—å¼•å…¥runtime" class="headerlink" title="è·å–ç§æœ‰å±æ€§å’Œæˆå‘˜å˜é‡ è®°å¾—å¼•å…¥runtime"></a>è·å–ç§æœ‰å±æ€§å’Œæˆå‘˜å˜é‡ è®°å¾—å¼•å…¥runtime</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">//è·å–ç§æœ‰å±æ€§ æ¯”å¦‚è®¾ç½®UIDatePickerçš„å­—ä½“é¢œè‰²</div><div class="line">- (void)setTextColor</div><div class="line">&#123;</div><div class="line">    //è·å–æ‰€æœ‰çš„å±æ€§ï¼Œå»æŸ¥çœ‹æœ‰æ²¡æœ‰å¯¹åº”çš„å±æ€§</div><div class="line">    unsigned int count = 0;</div><div class="line">    objc_property_t *propertys = class_copyPropertyList([UIDatePicker class], &amp;count);</div><div class="line">    for(int i = 0;i &lt; count;i ++)</div><div class="line">    &#123;</div><div class="line">        //è·å¾—æ¯ä¸€ä¸ªå±æ€§</div><div class="line">        objc_property_t property = propertys[i];</div><div class="line">        //è·å¾—å±æ€§å¯¹åº”çš„nsstring</div><div class="line">        NSString *propertyName = [NSString stringWithCString:property_getName(property) encoding:NSUTF8StringEncoding];</div><div class="line">        //è¾“å‡ºæ‰“å°çœ‹å¯¹åº”çš„å±æ€§</div><div class="line">        NSLog(@&quot;propertyname = %@&quot;,propertyName);</div><div class="line">        if ([propertyName isEqualToString:@&quot;textColor&quot;])</div><div class="line">        &#123;</div><div class="line">            [datePicker setValue:[UIColor whiteColor] forKey:propertyName];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//è·å¾—æˆå‘˜å˜é‡ æ¯”å¦‚ä¿®æ”¹UIAlertActionçš„æŒ‰é’®å­—ä½“é¢œè‰²</div><div class="line">    unsigned int count = 0;</div><div class="line">    Ivar *ivars = class_copyIvarList([UIAlertAction class], &amp;count);</div><div class="line">    for(int i =0;i &lt; count;i ++)</div><div class="line">    &#123;</div><div class="line">        Ivar ivar = ivars[i];</div><div class="line">        NSString *ivarName = [NSString stringWithCString:ivar_getName(ivar) encoding:NSUTF8StringEncoding];</div><div class="line">        NSLog(@&quot;uialertion.ivarName = %@&quot;,ivarName);</div><div class="line">        if ([ivarName isEqualToString:@&quot;_titleTextColor&quot;])</div><div class="line">        &#123;</div><div class="line">            [alertOk setValue:[UIColor blueColor] forKey:@&quot;titleTextColor&quot;];</div><div class="line">            [alertCancel setValue:[UIColor purpleColor] forKey:@&quot;titleTextColor&quot;];</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="iOSä¸­æ•°å­—çš„æ ¼å¼åŒ–"><a href="#iOSä¸­æ•°å­—çš„æ ¼å¼åŒ–" class="headerlink" title="iOSä¸­æ•°å­—çš„æ ¼å¼åŒ–"></a>iOSä¸­æ•°å­—çš„æ ¼å¼åŒ–</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//é€šè¿‡NSNumberFormatterï¼ŒåŒæ ·å¯ä»¥è®¾ç½®NSNumberè¾“å‡ºçš„æ ¼å¼ã€‚ä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼š</div><div class="line">NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];</div><div class="line">formatter.numberStyle = NSNumberFormatterDecimalStyle;</div><div class="line">NSString *string = [formatter stringFromNumber:[NSNumber numberWithInt:123456789]];</div><div class="line">NSLog(@&quot;Formatted number string:%@&quot;,string);</div><div class="line">//è¾“å‡ºç»“æœä¸ºï¼š[1223:403] Formatted number string:123,456,789</div><div class="line"></div><div class="line">//å…¶ä¸­NSNumberFormatterç±»æœ‰ä¸ªå±æ€§numberStyleï¼Œå®ƒæ˜¯ä¸€ä¸ªæšä¸¾å‹ï¼Œè®¾ç½®ä¸åŒçš„å€¼å¯ä»¥è¾“å‡ºä¸åŒçš„æ•°å­—æ ¼å¼ã€‚è¯¥æšä¸¾åŒ…æ‹¬ï¼š</div><div class="line">typedef NS_ENUM(NSUInteger, NSNumberFormatterStyle) &#123;</div><div class="line">    NSNumberFormatterNoStyle = kCFNumberFormatterNoStyle,</div><div class="line">    NSNumberFormatterDecimalStyle = kCFNumberFormatterDecimalStyle,</div><div class="line">    NSNumberFormatterCurrencyStyle = kCFNumberFormatterCurrencyStyle,</div><div class="line">    NSNumberFormatterPercentStyle = kCFNumberFormatterPercentStyle,</div><div class="line">    NSNumberFormatterScientificStyle = kCFNumberFormatterScientificStyle,</div><div class="line">    NSNumberFormatterSpellOutStyle = kCFNumberFormatterSpellOutStyle</div><div class="line">&#125;;</div><div class="line">//å„ä¸ªæšä¸¾å¯¹åº”è¾“å‡ºæ•°å­—æ ¼å¼çš„æ•ˆæœå¦‚ä¸‹ï¼šå…¶ä¸­ç¬¬ä¸‰é¡¹å’Œæœ€åä¸€é¡¹çš„è¾“å‡ºä¼šæ ¹æ®ç³»ç»Ÿè®¾ç½®çš„è¯­è¨€åŒºåŸŸçš„ä¸åŒè€Œä¸åŒã€‚</div><div class="line">[1243:403] Formatted number string:123456789</div><div class="line">[1243:403] Formatted number string:123,456,789</div><div class="line">[1243:403] Formatted number string:ï¿¥123,456,789.00</div><div class="line">[1243:403] Formatted number string:-539,222,988%</div><div class="line">[1243:403] Formatted number string:1.23456789E8</div><div class="line">[1243:403] Formatted number string:ä¸€äº¿äºŒåƒä¸‰ç™¾å››åäº”ä¸‡å…­åƒä¸ƒç™¾å…«åä¹</div></pre></td></tr></table></figure>
<h3 id="è·å–WebViewæ‰€æœ‰çš„å›¾ç‰‡åœ°å€"><a href="#è·å–WebViewæ‰€æœ‰çš„å›¾ç‰‡åœ°å€" class="headerlink" title="è·å–WebViewæ‰€æœ‰çš„å›¾ç‰‡åœ°å€"></a>è·å–WebViewæ‰€æœ‰çš„å›¾ç‰‡åœ°å€</h3><p>åœ¨ç½‘é¡µåŠ è½½å®Œæˆæ—¶ï¼Œé€šè¿‡jsè·å–å›¾ç‰‡å’Œæ·»åŠ ç‚¹å‡»çš„è¯†åˆ«æ–¹å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">//UIWebView</div><div class="line">- (void)webViewDidFinishLoad:(UIWebView *)webView</div><div class="line">&#123;</div><div class="line">    //è¿™é‡Œæ˜¯jsï¼Œä¸»è¦ç›®çš„å®ç°å¯¹urlçš„è·å–</div><div class="line">    static  NSString * const jsGetImages =</div><div class="line">    @&quot;function getImages()&#123;\</div><div class="line">    var objs = document.getElementsByTagName(\&quot;img\&quot;);\</div><div class="line">    var imgScr = &apos;&apos;;\</div><div class="line">    for(var i=0;i&lt;objs.length;i++)&#123;\</div><div class="line">    imgScr = imgScr + objs[i].src + &apos;+&apos;;\</div><div class="line">    &#125;;\</div><div class="line">    return imgScr;\</div><div class="line">    &#125;;&quot;;</div><div class="line"></div><div class="line">    [webView stringByEvaluatingJavaScriptFromString:jsGetImages];//æ³¨å…¥jsæ–¹æ³•</div><div class="line">    NSString *urlResult = [webView stringByEvaluatingJavaScriptFromString:@&quot;getImages()&quot;];</div><div class="line">    NSArray *urlArray = [NSMutableArray arrayWithArray:[urlResult componentsSeparatedByString:@&quot;+&quot;]];</div><div class="line">    //urlResurlt å°±æ˜¯è·å–åˆ°å¾—æ‰€æœ‰å›¾ç‰‡çš„urlçš„æ‹¼æ¥ï¼›mUrlArrayå°±æ˜¯æ‰€æœ‰Urlçš„æ•°ç»„</div><div class="line">&#125;</div><div class="line"></div><div class="line">//WKWebView</div><div class="line">- (void)webView:(WKWebView *)webView didFinishNavigation:(null_unspecified WKNavigation *)navigation</div><div class="line">&#123;</div><div class="line">    static  NSString * const jsGetImages =</div><div class="line">    @&quot;function getImages()&#123;\</div><div class="line">    var objs = document.getElementsByTagName(\&quot;img\&quot;);\</div><div class="line">    var imgScr = &apos;&apos;;\</div><div class="line">    for(var i=0;i&lt;objs.length;i++)&#123;\</div><div class="line">    imgScr = imgScr + objs[i].src + &apos;+&apos;;\</div><div class="line">    &#125;;\</div><div class="line">    return imgScr;\</div><div class="line">    &#125;;&quot;;</div><div class="line"></div><div class="line">    [webView evaluateJavaScript:jsGetImages completionHandler:nil];</div><div class="line">    [webView evaluateJavaScript:@&quot;getImages()&quot; completionHandler:^(id _Nullable result, NSError * _Nullable error) &#123;</div><div class="line">        NSLog(@&quot;%@&quot;,result);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è·å–åˆ°webviewçš„é«˜åº¦"><a href="#è·å–åˆ°webviewçš„é«˜åº¦" class="headerlink" title="è·å–åˆ°webviewçš„é«˜åº¦"></a>è·å–åˆ°webviewçš„é«˜åº¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CGFloat height = [[self.webView stringByEvaluatingJavaScriptFromString:@&quot;document.body.offsetHeight&quot;] floatValue];</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™é‡Œä¸»è¦è®²ä¸€äº›æˆ‘åœ¨æ—¥å¸¸å¼€å‘ä¸­ç”¨åˆ°çš„ä¸€äº›å°çš„æŠ€å·§ï¼Œå…¶å®ä¹Ÿç®—ä¸ä¸ŠæŠ€å·§å§ï¼Œå°±æ˜¯çœå»ä¸€äº›ä¸å¿…è¦çš„ä»£ç ï¼Œæˆ–è€…æœ‰çš„å°é—®é¢˜å›°æ‰°ä½ å¾ˆä¹…è¯´ä¸è¡Œåœ¨è¿™é‡Œä½ èƒ½æ‰¾åˆ°ç­”æ¡ˆ&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
